{"version":3,"names":["_element","require","useDimensionHandler","customHeight","customWidth","defaultHeight","defaultWidth","onChange","_ref","_ref2","currentWidth","setCurrentWidth","useState","currentHeight","setCurrentHeight","useEffect","undefined","Number","parseInt","updateDimension","dimension","value","parsedValue","updateDimensions","nextHeight","nextWidth","height","width"],"sources":["@wordpress/block-editor/src/components/image-size-control/use-dimension-handler.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\nexport default function useDimensionHandler(\n\tcustomHeight,\n\tcustomWidth,\n\tdefaultHeight,\n\tdefaultWidth,\n\tonChange\n) {\n\tconst [ currentWidth, setCurrentWidth ] = useState(\n\t\tcustomWidth ?? defaultWidth ?? ''\n\t);\n\tconst [ currentHeight, setCurrentHeight ] = useState(\n\t\tcustomHeight ?? defaultHeight ?? ''\n\t);\n\n\t// When an image is first inserted, the default dimensions are initially\n\t// undefined. This effect updates the dimensions when the default values\n\t// come through.\n\tuseEffect( () => {\n\t\tif ( customWidth === undefined && defaultWidth !== undefined ) {\n\t\t\tsetCurrentWidth( defaultWidth );\n\t\t}\n\t\tif ( customHeight === undefined && defaultHeight !== undefined ) {\n\t\t\tsetCurrentHeight( defaultHeight );\n\t\t}\n\t}, [ defaultWidth, defaultHeight ] );\n\n\t// If custom values change, it means an outsider has resized the image using some other method (eg resize box)\n\t// this keeps track of these values too. We need to parse before comparing; custom values can be strings.\n\tuseEffect( () => {\n\t\tif (\n\t\t\tcustomWidth !== undefined &&\n\t\t\tNumber.parseInt( customWidth ) !== Number.parseInt( currentWidth )\n\t\t) {\n\t\t\tsetCurrentWidth( customWidth );\n\t\t}\n\t\tif (\n\t\t\tcustomHeight !== undefined &&\n\t\t\tNumber.parseInt( customHeight ) !== Number.parseInt( currentHeight )\n\t\t) {\n\t\t\tsetCurrentHeight( customHeight );\n\t\t}\n\t}, [ customWidth, customHeight ] );\n\n\tconst updateDimension = ( dimension, value ) => {\n\t\tconst parsedValue = value === '' ? undefined : parseInt( value, 10 );\n\t\tif ( dimension === 'width' ) {\n\t\t\tsetCurrentWidth( parsedValue );\n\t\t} else {\n\t\t\tsetCurrentHeight( parsedValue );\n\t\t}\n\t\tonChange( {\n\t\t\t[ dimension ]: parsedValue,\n\t\t} );\n\t};\n\n\tconst updateDimensions = ( nextHeight, nextWidth ) => {\n\t\tsetCurrentHeight( nextHeight ?? defaultHeight );\n\t\tsetCurrentWidth( nextWidth ?? defaultWidth );\n\t\tonChange( { height: nextHeight, width: nextWidth } );\n\t};\n\n\treturn {\n\t\tcurrentHeight,\n\t\tcurrentWidth,\n\t\tupdateDimension,\n\t\tupdateDimensions,\n\t};\n}\n"],"mappings":";;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AAHA;AACA;AACA;;AAGe,SAASC,mBAAmBA,CAC1CC,YAAY,EACZC,WAAW,EACXC,aAAa,EACbC,YAAY,EACZC,QAAQ,EACP;EAAA,IAAAC,IAAA,EAAAC,KAAA;EACD,MAAM,CAAEC,YAAY,EAAEC,eAAe,CAAE,GAAG,IAAAC,iBAAQ,GAAAJ,IAAA,GACjDJ,WAAW,aAAXA,WAAW,cAAXA,WAAW,GAAIE,YAAY,cAAAE,IAAA,cAAAA,IAAA,GAAI,EAChC,CAAC;EACD,MAAM,CAAEK,aAAa,EAAEC,gBAAgB,CAAE,GAAG,IAAAF,iBAAQ,GAAAH,KAAA,GACnDN,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAIE,aAAa,cAAAI,KAAA,cAAAA,KAAA,GAAI,EAClC,CAAC;;EAED;EACA;EACA;EACA,IAAAM,kBAAS,EAAE,MAAM;IAChB,IAAKX,WAAW,KAAKY,SAAS,IAAIV,YAAY,KAAKU,SAAS,EAAG;MAC9DL,eAAe,CAAEL,YAAa,CAAC;IAChC;IACA,IAAKH,YAAY,KAAKa,SAAS,IAAIX,aAAa,KAAKW,SAAS,EAAG;MAChEF,gBAAgB,CAAET,aAAc,CAAC;IAClC;EACD,CAAC,EAAE,CAAEC,YAAY,EAAED,aAAa,CAAG,CAAC;;EAEpC;EACA;EACA,IAAAU,kBAAS,EAAE,MAAM;IAChB,IACCX,WAAW,KAAKY,SAAS,IACzBC,MAAM,CAACC,QAAQ,CAAEd,WAAY,CAAC,KAAKa,MAAM,CAACC,QAAQ,CAAER,YAAa,CAAC,EACjE;MACDC,eAAe,CAAEP,WAAY,CAAC;IAC/B;IACA,IACCD,YAAY,KAAKa,SAAS,IAC1BC,MAAM,CAACC,QAAQ,CAAEf,YAAa,CAAC,KAAKc,MAAM,CAACC,QAAQ,CAAEL,aAAc,CAAC,EACnE;MACDC,gBAAgB,CAAEX,YAAa,CAAC;IACjC;EACD,CAAC,EAAE,CAAEC,WAAW,EAAED,YAAY,CAAG,CAAC;EAElC,MAAMgB,eAAe,GAAGA,CAAEC,SAAS,EAAEC,KAAK,KAAM;IAC/C,MAAMC,WAAW,GAAGD,KAAK,KAAK,EAAE,GAAGL,SAAS,GAAGE,QAAQ,CAAEG,KAAK,EAAE,EAAG,CAAC;IACpE,IAAKD,SAAS,KAAK,OAAO,EAAG;MAC5BT,eAAe,CAAEW,WAAY,CAAC;IAC/B,CAAC,MAAM;MACNR,gBAAgB,CAAEQ,WAAY,CAAC;IAChC;IACAf,QAAQ,CAAE;MACT,CAAEa,SAAS,GAAIE;IAChB,CAAE,CAAC;EACJ,CAAC;EAED,MAAMC,gBAAgB,GAAGA,CAAEC,UAAU,EAAEC,SAAS,KAAM;IACrDX,gBAAgB,CAAEU,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAInB,aAAc,CAAC;IAC/CM,eAAe,CAAEc,SAAS,aAATA,SAAS,cAATA,SAAS,GAAInB,YAAa,CAAC;IAC5CC,QAAQ,CAAE;MAAEmB,MAAM,EAAEF,UAAU;MAAEG,KAAK,EAAEF;IAAU,CAAE,CAAC;EACrD,CAAC;EAED,OAAO;IACNZ,aAAa;IACbH,YAAY;IACZS,eAAe;IACfI;EACD,CAAC;AACF"}