{"version":3,"names":["_reactNative","require","_i18n","_blocks","_components","_data","_notices","_store","BlockTransformationsMenu","anchorNodeRef","blockTitle","pickerRef","possibleTransformations","selectedBlock","selectedBlockClientId","replaceBlocks","useDispatch","blockEditorStore","createSuccessNotice","noticesStore","pickerOptions","_selectedBlock$name","selectedBlockName","name","blocksThatSplitWhenTransformed","map","item","label","length","includes","id","title","value","getAnchor","findNodeHandle","undefined","onPickerSelect","switchToBlockType","selectedItem","find","successNotice","sprintf","__","_react","createElement","Picker","testID","ref","options","onChange","hideCancelButton","Platform","OS","leftAlign","_default","exports","default"],"sources":["@wordpress/block-editor/src/components/block-switcher/block-transformations-menu.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { findNodeHandle, Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { switchToBlockType } from '@wordpress/blocks';\nimport { Picker } from '@wordpress/components';\nimport { useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst BlockTransformationsMenu = ( {\n\tanchorNodeRef,\n\tblockTitle,\n\tpickerRef,\n\tpossibleTransformations,\n\tselectedBlock,\n\tselectedBlockClientId,\n} ) => {\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\n\tconst pickerOptions = () => {\n\t\tconst selectedBlockName = selectedBlock?.name ?? '';\n\t\tconst blocksThatSplitWhenTransformed = {\n\t\t\t'core/list': [ 'core/paragraph', 'core/heading' ],\n\t\t\t'core/quote': [ 'core/paragraph' ],\n\t\t\t'core/pullquote': [ 'core/paragraph' ],\n\t\t};\n\n\t\treturn possibleTransformations.map( ( item ) => {\n\t\t\tconst label =\n\t\t\t\tselectedBlockName.length &&\n\t\t\t\tblocksThatSplitWhenTransformed[ selectedBlockName ] &&\n\t\t\t\tblocksThatSplitWhenTransformed[ selectedBlockName ].includes(\n\t\t\t\t\titem.id\n\t\t\t\t)\n\t\t\t\t\t? `${ item.title } blocks`\n\t\t\t\t\t: item.title;\n\t\t\treturn {\n\t\t\t\tlabel,\n\t\t\t\tvalue: item.id,\n\t\t\t};\n\t\t} );\n\t};\n\n\tconst getAnchor = () =>\n\t\tanchorNodeRef ? findNodeHandle( anchorNodeRef ) : undefined;\n\n\tfunction onPickerSelect( value ) {\n\t\treplaceBlocks(\n\t\t\tselectedBlockClientId,\n\t\t\tswitchToBlockType( selectedBlock, value )\n\t\t);\n\n\t\tconst selectedItem = pickerOptions().find(\n\t\t\t( item ) => item.value === value\n\t\t);\n\t\tconst successNotice = sprintf(\n\t\t\t/* translators: 1: From block title, e.g. Paragraph. 2: To block title, e.g. Header. */\n\t\t\t__( '%1$s transformed to %2$s' ),\n\t\t\tblockTitle,\n\t\t\tselectedItem.label\n\t\t);\n\t\tcreateSuccessNotice( successNotice );\n\t}\n\n\treturn (\n\t\t<Picker\n\t\t\ttestID=\"block-transformations-menu\"\n\t\t\tref={ pickerRef }\n\t\t\toptions={ pickerOptions() }\n\t\t\tonChange={ onPickerSelect }\n\t\t\thideCancelButton={ Platform.OS !== 'ios' }\n\t\t\tleftAlign\n\t\t\tgetAnchor={ getAnchor }\n\t\t\t// translators: %s: block title e.g: \"Paragraph\".\n\t\t\ttitle={ sprintf( __( 'Transform %s to' ), blockTitle ) }\n\t\t/>\n\t);\n};\n\nexport default BlockTransformationsMenu;\n"],"mappings":";;;;;;;AAGA,IAAAA,YAAA,GAAAC,OAAA;AAKA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AACA,IAAAK,QAAA,GAAAL,OAAA;AAKA,IAAAM,MAAA,GAAAN,OAAA;AAjBA;AACA;AACA;;AAGA;AACA;AACA;;AAOA;AACA;AACA;;AAGA,MAAMO,wBAAwB,GAAGA,CAAE;EAClCC,aAAa;EACbC,UAAU;EACVC,SAAS;EACTC,uBAAuB;EACvBC,aAAa;EACbC;AACD,CAAC,KAAM;EACN,MAAM;IAAEC;EAAc,CAAC,GAAG,IAAAC,iBAAW,EAAEC,YAAiB,CAAC;EACzD,MAAM;IAAEC;EAAoB,CAAC,GAAG,IAAAF,iBAAW,EAAEG,cAAa,CAAC;EAE3D,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,mBAAA;IAC3B,MAAMC,iBAAiB,IAAAD,mBAAA,GAAGR,aAAa,EAAEU,IAAI,cAAAF,mBAAA,cAAAA,mBAAA,GAAI,EAAE;IACnD,MAAMG,8BAA8B,GAAG;MACtC,WAAW,EAAE,CAAE,gBAAgB,EAAE,cAAc,CAAE;MACjD,YAAY,EAAE,CAAE,gBAAgB,CAAE;MAClC,gBAAgB,EAAE,CAAE,gBAAgB;IACrC,CAAC;IAED,OAAOZ,uBAAuB,CAACa,GAAG,CAAIC,IAAI,IAAM;MAC/C,MAAMC,KAAK,GACVL,iBAAiB,CAACM,MAAM,IACxBJ,8BAA8B,CAAEF,iBAAiB,CAAE,IACnDE,8BAA8B,CAAEF,iBAAiB,CAAE,CAACO,QAAQ,CAC3DH,IAAI,CAACI,EACN,CAAC,GACG,GAAGJ,IAAI,CAACK,KAAO,SAAQ,GACxBL,IAAI,CAACK,KAAK;MACd,OAAO;QACNJ,KAAK;QACLK,KAAK,EAAEN,IAAI,CAACI;MACb,CAAC;IACF,CAAE,CAAC;EACJ,CAAC;EAED,MAAMG,SAAS,GAAGA,CAAA,KACjBxB,aAAa,GAAG,IAAAyB,2BAAc,EAAEzB,aAAc,CAAC,GAAG0B,SAAS;EAE5D,SAASC,cAAcA,CAAEJ,KAAK,EAAG;IAChCjB,aAAa,CACZD,qBAAqB,EACrB,IAAAuB,yBAAiB,EAAExB,aAAa,EAAEmB,KAAM,CACzC,CAAC;IAED,MAAMM,YAAY,GAAGlB,aAAa,CAAC,CAAC,CAACmB,IAAI,CACtCb,IAAI,IAAMA,IAAI,CAACM,KAAK,KAAKA,KAC5B,CAAC;IACD,MAAMQ,aAAa,GAAG,IAAAC,aAAO,GAC5B;IACA,IAAAC,QAAE,EAAE,0BAA2B,CAAC,EAChChC,UAAU,EACV4B,YAAY,CAACX,KACd,CAAC;IACDT,mBAAmB,CAAEsB,aAAc,CAAC;EACrC;EAEA,OACC,IAAAG,MAAA,CAAAC,aAAA,EAACxC,WAAA,CAAAyC,MAAM;IACNC,MAAM,EAAC,4BAA4B;IACnCC,GAAG,EAAGpC,SAAW;IACjBqC,OAAO,EAAG5B,aAAa,CAAC,CAAG;IAC3B6B,QAAQ,EAAGb,cAAgB;IAC3Bc,gBAAgB,EAAGC,qBAAQ,CAACC,EAAE,KAAK,KAAO;IAC1CC,SAAS;IACTpB,SAAS,EAAGA;IACZ;IAAA;IACAF,KAAK,EAAG,IAAAU,aAAO,EAAE,IAAAC,QAAE,EAAE,iBAAkB,CAAC,EAAEhC,UAAW;EAAG,CACxD,CAAC;AAEJ,CAAC;AAAC,IAAA4C,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEahD,wBAAwB"}