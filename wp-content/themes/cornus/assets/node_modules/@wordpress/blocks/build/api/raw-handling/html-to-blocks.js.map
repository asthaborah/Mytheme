{"version":3,"names":["_element","require","_factory","_parser","_interopRequireDefault","_getBlockAttributes","_getRawTransforms","htmlToBlocks","html","handler","doc","document","implementation","createHTMLDocument","body","innerHTML","Array","from","children","flatMap","node","rawTransform","findTransform","getRawTransforms","isMatch","Platform","isNative","parse","outerHTML","createBlock","getBlockAttributes","transform","blockName"],"sources":["@wordpress/blocks/src/api/raw-handling/html-to-blocks.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { createBlock, findTransform } from '../factory';\nimport parse from '../parser';\nimport { getBlockAttributes } from '../parser/get-block-attributes';\nimport { getRawTransforms } from './get-raw-transforms';\n\n/**\n * Converts HTML directly to blocks. Looks for a matching transform for each\n * top-level tag. The HTML should be filtered to not have any text between\n * top-level tags and formatted in a way that blocks can handle the HTML.\n *\n * @param {string}   html    HTML to convert.\n * @param {Function} handler The handler calling htmlToBlocks: either rawHandler\n *                           or pasteHandler.\n *\n * @return {Array} An array of blocks.\n */\nexport function htmlToBlocks( html, handler ) {\n\tconst doc = document.implementation.createHTMLDocument( '' );\n\n\tdoc.body.innerHTML = html;\n\n\treturn Array.from( doc.body.children ).flatMap( ( node ) => {\n\t\tconst rawTransform = findTransform(\n\t\t\tgetRawTransforms(),\n\t\t\t( { isMatch } ) => isMatch( node )\n\t\t);\n\n\t\tif ( ! rawTransform ) {\n\t\t\t// Until the HTML block is supported in the native version, we'll parse it\n\t\t\t// instead of creating the block to generate it as an unsupported block.\n\t\t\tif ( Platform.isNative ) {\n\t\t\t\treturn parse(\n\t\t\t\t\t`<!-- wp:html -->${ node.outerHTML }<!-- /wp:html -->`\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn createBlock(\n\t\t\t\t// Should not be hardcoded.\n\t\t\t\t'core/html',\n\t\t\t\tgetBlockAttributes( 'core/html', node.outerHTML )\n\t\t\t);\n\t\t}\n\n\t\tconst { transform, blockName } = rawTransform;\n\n\t\tif ( transform ) {\n\t\t\treturn transform( node, handler );\n\t\t}\n\n\t\treturn createBlock(\n\t\t\tblockName,\n\t\t\tgetBlockAttributes( blockName, node.outerHTML )\n\t\t);\n\t} );\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AAKA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,mBAAA,GAAAJ,OAAA;AACA,IAAAK,iBAAA,GAAAL,OAAA;AAXA;AACA;AACA;;AAGA;AACA;AACA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASM,YAAYA,CAAEC,IAAI,EAAEC,OAAO,EAAG;EAC7C,MAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAc,CAACC,kBAAkB,CAAE,EAAG,CAAC;EAE5DH,GAAG,CAACI,IAAI,CAACC,SAAS,GAAGP,IAAI;EAEzB,OAAOQ,KAAK,CAACC,IAAI,CAAEP,GAAG,CAACI,IAAI,CAACI,QAAS,CAAC,CAACC,OAAO,CAAIC,IAAI,IAAM;IAC3D,MAAMC,YAAY,GAAG,IAAAC,sBAAa,EACjC,IAAAC,kCAAgB,EAAC,CAAC,EAClB,CAAE;MAAEC;IAAQ,CAAC,KAAMA,OAAO,CAAEJ,IAAK,CAClC,CAAC;IAED,IAAK,CAAEC,YAAY,EAAG;MACrB;MACA;MACA,IAAKI,iBAAQ,CAACC,QAAQ,EAAG;QACxB,OAAO,IAAAC,eAAK,EACV,mBAAmBP,IAAI,CAACQ,SAAW,mBACrC,CAAC;MACF;MACA,OAAO,IAAAC,oBAAW;MACjB;MACA,WAAW,EACX,IAAAC,sCAAkB,EAAE,WAAW,EAAEV,IAAI,CAACQ,SAAU,CACjD,CAAC;IACF;IAEA,MAAM;MAAEG,SAAS;MAAEC;IAAU,CAAC,GAAGX,YAAY;IAE7C,IAAKU,SAAS,EAAG;MAChB,OAAOA,SAAS,CAAEX,IAAI,EAAEX,OAAQ,CAAC;IAClC;IAEA,OAAO,IAAAoB,oBAAW,EACjBG,SAAS,EACT,IAAAF,sCAAkB,EAAEE,SAAS,EAAEZ,IAAI,CAACQ,SAAU,CAC/C,CAAC;EACF,CAAE,CAAC;AACJ"}