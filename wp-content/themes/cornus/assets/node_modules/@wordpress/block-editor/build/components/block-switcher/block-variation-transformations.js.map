{"version":3,"names":["_components","require","_blocks","_data","_element","_store","_blockIcon","_interopRequireDefault","_previewBlockPopover","EMPTY_OBJECT","useBlockVariationTransforms","clientIds","blocks","activeBlockVariation","blockVariationTransformations","useSelect","select","getBlockRootClientId","getBlockAttributes","canRemoveBlocks","blockEditorStore","getActiveBlockVariation","getBlockVariations","blocksStore","rootClientId","Array","isArray","canRemove","length","firstBlock","name","clientId","transformations","useMemo","filter","BlockVariationTransformations","onSelect","hoveredTransformItemName","setHoveredTransformItemName","useState","_react","createElement","Fragment","default","cloneBlock","find","attributes","map","item","BlockVariationTranformationItem","key","icon","title","MenuItem","className","getBlockMenuDefaultClassName","onClick","event","preventDefault","onMouseLeave","onMouseEnter","showColors","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-switcher/block-variation-transformations.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport {\n\tgetBlockMenuDefaultClassName,\n\tcloneBlock,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport PreviewBlockPopover from './preview-block-popover';\n\nconst EMPTY_OBJECT = {};\n\nexport function useBlockVariationTransforms( { clientIds, blocks } ) {\n\tconst { activeBlockVariation, blockVariationTransformations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\tArray.isArray( clientIds ) ? clientIds[ 0 ] : clientIds\n\t\t\t);\n\t\t\tconst canRemove = canRemoveBlocks( clientIds, rootClientId );\n\t\t\t// Only handle single selected blocks for now.\n\t\t\tif ( blocks.length !== 1 || ! canRemove ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\t\t\tconst [ firstBlock ] = blocks;\n\t\t\treturn {\n\t\t\t\tblockVariationTransformations: getBlockVariations(\n\t\t\t\t\tfirstBlock.name,\n\t\t\t\t\t'transform'\n\t\t\t\t),\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\n\t\t\t\t\tfirstBlock.name,\n\t\t\t\t\tgetBlockAttributes( firstBlock.clientId )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, blocks ]\n\t);\n\tconst transformations = useMemo( () => {\n\t\treturn blockVariationTransformations?.filter(\n\t\t\t( { name } ) => name !== activeBlockVariation?.name\n\t\t);\n\t}, [ blockVariationTransformations, activeBlockVariation ] );\n\treturn transformations;\n}\n\nconst BlockVariationTransformations = ( {\n\ttransformations,\n\tonSelect,\n\tblocks,\n} ) => {\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\n\t\tuseState();\n\treturn (\n\t\t<>\n\t\t\t{ hoveredTransformItemName && (\n\t\t\t\t<PreviewBlockPopover\n\t\t\t\t\tblocks={ cloneBlock(\n\t\t\t\t\t\tblocks[ 0 ],\n\t\t\t\t\t\ttransformations.find(\n\t\t\t\t\t\t\t( { name } ) => name === hoveredTransformItemName\n\t\t\t\t\t\t).attributes\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ transformations?.map( ( item ) => (\n\t\t\t\t<BlockVariationTranformationItem\n\t\t\t\t\tkey={ item.name }\n\t\t\t\t\titem={ item }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</>\n\t);\n};\n\nfunction BlockVariationTranformationItem( {\n\titem,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\tconst { name, icon, title } = item;\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\n\t\t\tonClick={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonSelect( name );\n\t\t\t} }\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\n\t\t>\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t{ title }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockVariationTransformations;\n"],"mappings":"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"}