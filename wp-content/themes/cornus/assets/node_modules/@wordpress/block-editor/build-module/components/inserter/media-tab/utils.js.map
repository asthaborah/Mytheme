{"version":3,"names":["createBlock","mediaTypeTag","image","video","audio","getBlockAndPreviewFromMedia","media","mediaType","attributes","id","undefined","caption","mediaSrc","url","alt","includes","src","PreviewTag","preview","createElement","previewUrl","controls","inert","onError","currentTarget"],"sources":["@wordpress/block-editor/src/components/inserter/media-tab/utils.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\nconst mediaTypeTag = { image: 'img', video: 'video', audio: 'audio' };\n\n/** @typedef {import('./hooks').InserterMediaItem} InserterMediaItem */\n\n/**\n * Creates a block and a preview element from a media object.\n *\n * @param {InserterMediaItem}         media     The media object to create the block from.\n * @param {('image'|'audio'|'video')} mediaType The media type to create the block for.\n * @return {[WPBlock, JSX.Element]} An array containing the block and the preview element.\n */\nexport function getBlockAndPreviewFromMedia( media, mediaType ) {\n\t// Add the common attributes between the different media types.\n\tconst attributes = {\n\t\tid: media.id || undefined,\n\t\tcaption: media.caption || undefined,\n\t};\n\tconst mediaSrc = media.url;\n\tconst alt = media.alt || undefined;\n\tif ( mediaType === 'image' ) {\n\t\tattributes.url = mediaSrc;\n\t\tattributes.alt = alt;\n\t} else if ( [ 'video', 'audio' ].includes( mediaType ) ) {\n\t\tattributes.src = mediaSrc;\n\t}\n\tconst PreviewTag = mediaTypeTag[ mediaType ];\n\tconst preview = (\n\t\t<PreviewTag\n\t\t\tsrc={ media.previewUrl || mediaSrc }\n\t\t\talt={ alt }\n\t\t\tcontrols={ mediaType === 'audio' ? true : undefined }\n\t\t\tinert=\"true\"\n\t\t\tonError={ ( { currentTarget } ) => {\n\t\t\t\t// Fall back to the media source if the preview cannot be loaded.\n\t\t\t\tif ( currentTarget.src === media.previewUrl ) {\n\t\t\t\t\tcurrentTarget.src = mediaSrc;\n\t\t\t\t}\n\t\t\t} }\n\t\t/>\n\t);\n\treturn [ createBlock( `core/${ mediaType }`, attributes ), preview ];\n}\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,mBAAmB;AAE/C,MAAMC,YAAY,GAAG;EAAEC,KAAK,EAAE,KAAK;EAAEC,KAAK,EAAE,OAAO;EAAEC,KAAK,EAAE;AAAQ,CAAC;;AAErE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,2BAA2BA,CAAEC,KAAK,EAAEC,SAAS,EAAG;EAC/D;EACA,MAAMC,UAAU,GAAG;IAClBC,EAAE,EAAEH,KAAK,CAACG,EAAE,IAAIC,SAAS;IACzBC,OAAO,EAAEL,KAAK,CAACK,OAAO,IAAID;EAC3B,CAAC;EACD,MAAME,QAAQ,GAAGN,KAAK,CAACO,GAAG;EAC1B,MAAMC,GAAG,GAAGR,KAAK,CAACQ,GAAG,IAAIJ,SAAS;EAClC,IAAKH,SAAS,KAAK,OAAO,EAAG;IAC5BC,UAAU,CAACK,GAAG,GAAGD,QAAQ;IACzBJ,UAAU,CAACM,GAAG,GAAGA,GAAG;EACrB,CAAC,MAAM,IAAK,CAAE,OAAO,EAAE,OAAO,CAAE,CAACC,QAAQ,CAAER,SAAU,CAAC,EAAG;IACxDC,UAAU,CAACQ,GAAG,GAAGJ,QAAQ;EAC1B;EACA,MAAMK,UAAU,GAAGhB,YAAY,CAAEM,SAAS,CAAE;EAC5C,MAAMW,OAAO,GACZC,aAAA,CAACF,UAAU;IACVD,GAAG,EAAGV,KAAK,CAACc,UAAU,IAAIR,QAAU;IACpCE,GAAG,EAAGA,GAAK;IACXO,QAAQ,EAAGd,SAAS,KAAK,OAAO,GAAG,IAAI,GAAGG,SAAW;IACrDY,KAAK,EAAC,MAAM;IACZC,OAAO,EAAGA,CAAE;MAAEC;IAAc,CAAC,KAAM;MAClC;MACA,IAAKA,aAAa,CAACR,GAAG,KAAKV,KAAK,CAACc,UAAU,EAAG;QAC7CI,aAAa,CAACR,GAAG,GAAGJ,QAAQ;MAC7B;IACD;EAAG,CACH,CACD;EACD,OAAO,CAAEZ,WAAW,CAAG,QAAQO,SAAW,EAAC,EAAEC,UAAW,CAAC,EAAEU,OAAO,CAAE;AACrE"}