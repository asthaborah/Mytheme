{"version":3,"names":["_reactNative","require","_i18n","_element","_data","_warning","_interopRequireDefault","_unsupportedBlockDetails","_store","_constants","_useUnsupportedBlockEditor","_convertToGroupButtons","EMPTY_ARRAY","WarningMaxDepthExceeded","clientId","showDetails","setShowDetails","useState","isSelected","useSelect","select","blockEditorStore","isBlockSelected","convertToGroupButtonProps","useConvertToGroupButtonProps","isUngroupable","convertToGroupButtons","useConvertToGroupButtons","onUngroup","ungroup","onSelect","isUnsupportedBlockEditorSupported","canEnableUnsupportedBlockEditor","useUnsupportedBlockEditor","descriptionFormat","__","description","sprintf","MAX_NESTING_DEPTH","_react","createElement","TouchableWithoutFeedback","disabled","accessibilityLabel","accessibilityRole","accessibilityHint","onPress","View","default","message","showSheet","onCloseSheet","title","customActions","label","_default","exports"],"sources":["@wordpress/block-editor/src/components/inner-blocks/warning-max-depth-exceeded.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableWithoutFeedback, View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\nimport UnsupportedBlockDetails from '../unsupported-block-details';\nimport { store as blockEditorStore } from '../../store';\nimport { MAX_NESTING_DEPTH } from './constants';\nimport useUnsupportedBlockEditor from '../use-unsupported-block-editor';\nimport {\n\tuseConvertToGroupButtons,\n\tuseConvertToGroupButtonProps,\n} from '../convert-to-group-buttons';\n\nconst EMPTY_ARRAY = [];\n\nconst WarningMaxDepthExceeded = ( { clientId } ) => {\n\tconst [ showDetails, setShowDetails ] = useState( false );\n\n\tconst isSelected = useSelect(\n\t\t( select ) => select( blockEditorStore ).isBlockSelected( clientId ),\n\t\t[ clientId ]\n\t);\n\n\t// We rely on the logic related to the Group/Ungroup buttons used in the block options to\n\t// determine whether to use the Ungroup action.\n\tconst convertToGroupButtonProps = useConvertToGroupButtonProps( [\n\t\tclientId,\n\t] );\n\tconst { isUngroupable } = convertToGroupButtonProps;\n\tconst convertToGroupButtons = useConvertToGroupButtons( {\n\t\t...convertToGroupButtonProps,\n\t} );\n\tconst onUngroup = convertToGroupButtons.ungroup.onSelect;\n\n\tconst {\n\t\tisUnsupportedBlockEditorSupported,\n\t\tcanEnableUnsupportedBlockEditor,\n\t} = useUnsupportedBlockEditor( clientId );\n\n\t/* translators: Warning related to having blocks deeply nested. %d: The deepest nesting level. */\n\tconst descriptionFormat = __(\n\t\t'Blocks nested deeper than %d levels may not render properly in the mobile editor.'\n\t);\n\tlet description = sprintf( descriptionFormat, MAX_NESTING_DEPTH );\n\tif (\n\t\t! isUnsupportedBlockEditorSupported &&\n\t\t! canEnableUnsupportedBlockEditor\n\t) {\n\t\t// When UBE can't be used, the description mentions using the web browser to edit the block.\n\t\tdescription +=\n\t\t\t' ' +\n\t\t\t/* translators: Recommendation included in a warning related to having blocks deeply nested. */\n\t\t\t__(\n\t\t\t\t'For this reason, we recommend editing the block using your web browser.'\n\t\t\t);\n\t}\n\t// Otherwise, the description mentions using the web editor (i.e. UBE).\n\telse {\n\t\tdescription +=\n\t\t\t' ' +\n\t\t\t/* translators: Recommendation included in a warning related to having blocks deeply nested. */\n\t\t\t__(\n\t\t\t\t'For this reason, we recommend editing the block using the web editor.'\n\t\t\t);\n\t}\n\t// If the block can be flattened, we also suggest to ungroup the block.\n\tif ( isUngroupable ) {\n\t\tdescription +=\n\t\t\t' ' +\n\t\t\t/* translators: Alternative option included in a warning related to having blocks deeply nested. */\n\t\t\t__(\n\t\t\t\t'Alternatively, you can flatten the content by ungrouping the block.'\n\t\t\t);\n\t}\n\n\treturn (\n\t\t<TouchableWithoutFeedback\n\t\t\tdisabled={ ! isSelected }\n\t\t\taccessibilityLabel={ __( 'Warning message' ) }\n\t\t\taccessibilityRole={ 'button' }\n\t\t\taccessibilityHint={ __( 'Tap here to show more details.' ) }\n\t\t\tonPress={ () => setShowDetails( true ) }\n\t\t>\n\t\t\t<View>\n\t\t\t\t<Warning\n\t\t\t\t\tmessage={ __(\n\t\t\t\t\t\t'Block cannot be rendered because it is deeply nested. Tap here for more details.'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<UnsupportedBlockDetails\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tshowSheet={ showDetails }\n\t\t\t\t\tonCloseSheet={ () => setShowDetails( false ) }\n\t\t\t\t\ttitle={ __( 'Deeply nested block' ) }\n\t\t\t\t\tdescription={ description }\n\t\t\t\t\tcustomActions={\n\t\t\t\t\t\tisUngroupable\n\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: __( 'Ungroup block' ),\n\t\t\t\t\t\t\t\t\t\tonPress: onUngroup,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t: EMPTY_ARRAY\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n};\n\nexport default WarningMaxDepthExceeded;\n"],"mappings":"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"}