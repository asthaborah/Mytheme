{"version":3,"names":["_dom","require","phrasingContentReducer","node","doc","nodeName","style","fontWeight","fontStyle","textDecorationLine","textDecoration","verticalAlign","wrap","createElement","includes","replaceTag","target","toLowerCase","rel","removeAttribute","name","id","ownerDocument","querySelector"],"sources":["@wordpress/blocks/src/api/raw-handling/phrasing-content-reducer.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { wrap, replaceTag } from '@wordpress/dom';\n\nexport default function phrasingContentReducer( node, doc ) {\n\t// In jsdom-jscore, 'node.style' can be null.\n\t// TODO: Explore fixing this by patching jsdom-jscore.\n\tif ( node.nodeName === 'SPAN' && node.style ) {\n\t\tconst {\n\t\t\tfontWeight,\n\t\t\tfontStyle,\n\t\t\ttextDecorationLine,\n\t\t\ttextDecoration,\n\t\t\tverticalAlign,\n\t\t} = node.style;\n\n\t\tif ( fontWeight === 'bold' || fontWeight === '700' ) {\n\t\t\twrap( doc.createElement( 'strong' ), node );\n\t\t}\n\n\t\tif ( fontStyle === 'italic' ) {\n\t\t\twrap( doc.createElement( 'em' ), node );\n\t\t}\n\n\t\t// Some DOM implementations (Safari, JSDom) don't support\n\t\t// style.textDecorationLine, so we check style.textDecoration as a\n\t\t// fallback.\n\t\tif (\n\t\t\ttextDecorationLine === 'line-through' ||\n\t\t\ttextDecoration.includes( 'line-through' )\n\t\t) {\n\t\t\twrap( doc.createElement( 's' ), node );\n\t\t}\n\n\t\tif ( verticalAlign === 'super' ) {\n\t\t\twrap( doc.createElement( 'sup' ), node );\n\t\t} else if ( verticalAlign === 'sub' ) {\n\t\t\twrap( doc.createElement( 'sub' ), node );\n\t\t}\n\t} else if ( node.nodeName === 'B' ) {\n\t\tnode = replaceTag( node, 'strong' );\n\t} else if ( node.nodeName === 'I' ) {\n\t\tnode = replaceTag( node, 'em' );\n\t} else if ( node.nodeName === 'A' ) {\n\t\t// In jsdom-jscore, 'node.target' can be null.\n\t\t// TODO: Explore fixing this by patching jsdom-jscore.\n\t\tif ( node.target && node.target.toLowerCase() === '_blank' ) {\n\t\t\tnode.rel = 'noreferrer noopener';\n\t\t} else {\n\t\t\tnode.removeAttribute( 'target' );\n\t\t\tnode.removeAttribute( 'rel' );\n\t\t}\n\n\t\t// Saves anchor elements name attribute as id\n\t\tif ( node.name && ! node.id ) {\n\t\t\tnode.id = node.name;\n\t\t}\n\n\t\t// Keeps id only if there is an internal link pointing to it\n\t\tif (\n\t\t\tnode.id &&\n\t\t\t! node.ownerDocument.querySelector( `[href=\"#${ node.id }\"]` )\n\t\t) {\n\t\t\tnode.removeAttribute( 'id' );\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;AAGA,IAAAA,IAAA,GAAAC,OAAA;AAHA;AACA;AACA;;AAGe,SAASC,sBAAsBA,CAAEC,IAAI,EAAEC,GAAG,EAAG;EAC3D;EACA;EACA,IAAKD,IAAI,CAACE,QAAQ,KAAK,MAAM,IAAIF,IAAI,CAACG,KAAK,EAAG;IAC7C,MAAM;MACLC,UAAU;MACVC,SAAS;MACTC,kBAAkB;MAClBC,cAAc;MACdC;IACD,CAAC,GAAGR,IAAI,CAACG,KAAK;IAEd,IAAKC,UAAU,KAAK,MAAM,IAAIA,UAAU,KAAK,KAAK,EAAG;MACpD,IAAAK,SAAI,EAAER,GAAG,CAACS,aAAa,CAAE,QAAS,CAAC,EAAEV,IAAK,CAAC;IAC5C;IAEA,IAAKK,SAAS,KAAK,QAAQ,EAAG;MAC7B,IAAAI,SAAI,EAAER,GAAG,CAACS,aAAa,CAAE,IAAK,CAAC,EAAEV,IAAK,CAAC;IACxC;;IAEA;IACA;IACA;IACA,IACCM,kBAAkB,KAAK,cAAc,IACrCC,cAAc,CAACI,QAAQ,CAAE,cAAe,CAAC,EACxC;MACD,IAAAF,SAAI,EAAER,GAAG,CAACS,aAAa,CAAE,GAAI,CAAC,EAAEV,IAAK,CAAC;IACvC;IAEA,IAAKQ,aAAa,KAAK,OAAO,EAAG;MAChC,IAAAC,SAAI,EAAER,GAAG,CAACS,aAAa,CAAE,KAAM,CAAC,EAAEV,IAAK,CAAC;IACzC,CAAC,MAAM,IAAKQ,aAAa,KAAK,KAAK,EAAG;MACrC,IAAAC,SAAI,EAAER,GAAG,CAACS,aAAa,CAAE,KAAM,CAAC,EAAEV,IAAK,CAAC;IACzC;EACD,CAAC,MAAM,IAAKA,IAAI,CAACE,QAAQ,KAAK,GAAG,EAAG;IACnCF,IAAI,GAAG,IAAAY,eAAU,EAAEZ,IAAI,EAAE,QAAS,CAAC;EACpC,CAAC,MAAM,IAAKA,IAAI,CAACE,QAAQ,KAAK,GAAG,EAAG;IACnCF,IAAI,GAAG,IAAAY,eAAU,EAAEZ,IAAI,EAAE,IAAK,CAAC;EAChC,CAAC,MAAM,IAAKA,IAAI,CAACE,QAAQ,KAAK,GAAG,EAAG;IACnC;IACA;IACA,IAAKF,IAAI,CAACa,MAAM,IAAIb,IAAI,CAACa,MAAM,CAACC,WAAW,CAAC,CAAC,KAAK,QAAQ,EAAG;MAC5Dd,IAAI,CAACe,GAAG,GAAG,qBAAqB;IACjC,CAAC,MAAM;MACNf,IAAI,CAACgB,eAAe,CAAE,QAAS,CAAC;MAChChB,IAAI,CAACgB,eAAe,CAAE,KAAM,CAAC;IAC9B;;IAEA;IACA,IAAKhB,IAAI,CAACiB,IAAI,IAAI,CAAEjB,IAAI,CAACkB,EAAE,EAAG;MAC7BlB,IAAI,CAACkB,EAAE,GAAGlB,IAAI,CAACiB,IAAI;IACpB;;IAEA;IACA,IACCjB,IAAI,CAACkB,EAAE,IACP,CAAElB,IAAI,CAACmB,aAAa,CAACC,aAAa,CAAG,WAAWpB,IAAI,CAACkB,EAAI,IAAI,CAAC,EAC7D;MACDlB,IAAI,CAACgB,eAAe,CAAE,IAAK,CAAC;IAC7B;EACD;AACD"}