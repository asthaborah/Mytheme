{"version":3,"names":["_data","require","_layout","_store","_layouts","EMPTY_ARRAY","DEFAULT_CONTROLS","WIDE_CONTROLS","useAvailableAlignments","controls","includes","isNoneOnly","length","wideControlsEnabled","themeSupportsLayout","isBlockBasedTheme","useSelect","select","_settings$alignWide","settings","blockEditorStore","getSettings","alignWide","supportsLayout","__unstableIsBlockBasedTheme","layout","useLayout","layoutType","getLayoutType","type","layoutAlignments","getAlignments","alignments","filter","alignment","name","control","map"],"sources":["@wordpress/block-editor/src/components/block-alignment-control/use-available-alignments.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useLayout } from '../block-list/layout';\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\nconst EMPTY_ARRAY = [];\nconst DEFAULT_CONTROLS = [ 'none', 'left', 'center', 'right', 'wide', 'full' ];\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\n\nexport default function useAvailableAlignments( controls = DEFAULT_CONTROLS ) {\n\t// Always add the `none` option if not exists.\n\tif ( ! controls.includes( 'none' ) ) {\n\t\tcontrols = [ 'none', ...controls ];\n\t}\n\tconst isNoneOnly = controls.length === 1 && controls[ 0 ] === 'none';\n\n\tconst [ wideControlsEnabled, themeSupportsLayout, isBlockBasedTheme ] =\n\t\tuseSelect(\n\t\t\t( select ) => {\n\t\t\t\t// If `isNoneOnly` is true, we'll be returning early because there is\n\t\t\t\t// nothing to filter on an empty array. We won't need the info from\n\t\t\t\t// the `useSelect` but we must call it anyway because Rules of Hooks.\n\t\t\t\t// So the callback returns early to avoid block editor subscription.\n\t\t\t\tif ( isNoneOnly ) {\n\t\t\t\t\treturn [ false, false, false ];\n\t\t\t\t}\n\n\t\t\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\t\t\treturn [\n\t\t\t\t\tsettings.alignWide ?? false,\n\t\t\t\t\tsettings.supportsLayout,\n\t\t\t\t\tsettings.__unstableIsBlockBasedTheme,\n\t\t\t\t];\n\t\t\t},\n\t\t\t[ isNoneOnly ]\n\t\t);\n\tconst layout = useLayout();\n\n\tif ( isNoneOnly ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst layoutType = getLayoutType( layout?.type );\n\n\tif ( themeSupportsLayout ) {\n\t\tconst layoutAlignments = layoutType.getAlignments(\n\t\t\tlayout,\n\t\t\tisBlockBasedTheme\n\t\t);\n\t\tconst alignments = layoutAlignments.filter( ( alignment ) =>\n\t\t\tcontrols.includes( alignment.name )\n\t\t);\n\t\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t\t// other alignments exist.\n\t\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn alignments;\n\t}\n\n\t// Starting here, it's the fallback for themes not supporting the layout config.\n\tif ( layoutType.name !== 'default' && layoutType.name !== 'constrained' ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst alignments = controls\n\t\t.filter( ( control ) => {\n\t\t\tif ( layout.alignments ) {\n\t\t\t\treturn layout.alignments.includes( control );\n\t\t\t}\n\n\t\t\tif ( ! wideControlsEnabled && WIDE_CONTROLS.includes( control ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn DEFAULT_CONTROLS.includes( control );\n\t\t} )\n\t\t.map( ( name ) => ( { name } ) );\n\n\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t// other alignments exist.\n\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn alignments;\n}\n"],"mappings":"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"}