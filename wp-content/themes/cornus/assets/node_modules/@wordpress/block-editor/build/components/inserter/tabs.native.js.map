{"version":3,"names":["_reactNative","require","_element","_i18n","_components","_blockTypesTab","_interopRequireDefault","_reusableBlocksTab","_style","TAB_ANIMATION_DURATION","InserterTabs","listProps","onSelect","rootClientId","showReusableBlocks","tabIndex","tabAnimation","useRef","Animated","Value","current","lastScrollEvents","wrapperWidth","setWrapperWidth","useState","onScroll","event","nativeEvent","onWrapperLayout","useCallback","layout","width","useEffect","timing","duration","toValue","useNativeDriver","start","lastScrollEvent","tabs","tabKeys","useMemo","filteredTabs","getTabs","filter","name","keys","translateX","length","interpolate","inputRange","outputRange","map","key","containerStyle","styles","transform","_react","createElement","View","style","onLayout","component","TabComponent","index","TabsControl","onChangeTab","segments","title","segmentHandler","selectedTab","tabTitles","indexOf","SegmentedControl","Control","__","BlockTypesTab","ReusableBlocksTab","_default","exports","default"],"sources":["@wordpress/block-editor/src/components/inserter/tabs.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Animated, View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { SegmentedControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesTab from './block-types-tab';\nimport ReusableBlocksTab from './reusable-blocks-tab';\nimport styles from './style.scss';\n\nconst TAB_ANIMATION_DURATION = 250;\n\nfunction InserterTabs( {\n\tlistProps,\n\tonSelect,\n\trootClientId,\n\tshowReusableBlocks,\n\ttabIndex,\n} ) {\n\tconst tabAnimation = useRef( new Animated.Value( 0 ) ).current;\n\tconst lastScrollEvents = useRef( [] ).current;\n\tconst [ wrapperWidth, setWrapperWidth ] = useState( 0 );\n\n\tfunction onScroll( event ) {\n\t\tlastScrollEvents[ tabIndex ] = event.nativeEvent;\n\t\tlistProps.onScroll( event );\n\t}\n\n\tconst onWrapperLayout = useCallback(\n\t\t( { nativeEvent } ) => {\n\t\t\tsetWrapperWidth( nativeEvent.layout.width );\n\t\t},\n\t\t[ setWrapperWidth ]\n\t);\n\n\tuseEffect( () => {\n\t\tAnimated.timing( tabAnimation, {\n\t\t\tduration: TAB_ANIMATION_DURATION,\n\t\t\ttoValue: tabIndex,\n\t\t\tuseNativeDriver: true,\n\t\t} ).start();\n\n\t\t// Notify upstream with the last scroll event of the current tab.\n\t\tconst lastScrollEvent = lastScrollEvents[ tabIndex ];\n\t\tif ( lastScrollEvent ) {\n\t\t\tlistProps.onScroll( { nativeEvent: lastScrollEvent } );\n\t\t}\n\t}, [ tabIndex ] );\n\n\tconst { tabs, tabKeys } = useMemo( () => {\n\t\tconst filteredTabs = InserterTabs.getTabs().filter(\n\t\t\t( { name } ) => showReusableBlocks || name !== 'reusable'\n\t\t);\n\t\treturn {\n\t\t\ttabs: filteredTabs,\n\t\t\ttabKeys: [ ...filteredTabs.keys() ],\n\t\t};\n\t}, [ showReusableBlocks ] );\n\n\tconst translateX = useMemo(\n\t\t() =>\n\t\t\ttabKeys.length > 1\n\t\t\t\t? tabAnimation.interpolate( {\n\t\t\t\t\t\tinputRange: tabKeys,\n\t\t\t\t\t\toutputRange: tabKeys.map(\n\t\t\t\t\t\t\t( key ) => key * -wrapperWidth\n\t\t\t\t\t\t),\n\t\t\t\t  } )\n\t\t\t\t: tabAnimation,\n\t\t[ tabAnimation, tabKeys, wrapperWidth ]\n\t);\n\n\tconst containerStyle = [\n\t\tstyles[ 'inserter-tabs__container' ],\n\t\t{\n\t\t\twidth: wrapperWidth * tabKeys.length,\n\t\t\ttransform: [ { translateX } ],\n\t\t},\n\t];\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ styles[ 'inserter-tabs__wrapper' ] }\n\t\t\tonLayout={ onWrapperLayout }\n\t\t>\n\t\t\t<Animated.View style={ containerStyle }>\n\t\t\t\t{ tabs.map( ( { component: TabComponent }, index ) => (\n\t\t\t\t\t<View key={ `tab-${ index }` }>\n\t\t\t\t\t\t<TabComponent\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tlistProps={ { ...listProps, onScroll } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) ) }\n\t\t\t</Animated.View>\n\t\t</View>\n\t);\n}\n\nfunction TabsControl( { onChangeTab, showReusableBlocks } ) {\n\tconst tabs = InserterTabs.getTabs();\n\tconst segments = useMemo( () => {\n\t\tconst filteredTabs = tabs.filter(\n\t\t\t( { name } ) => showReusableBlocks || name !== 'reusable'\n\t\t);\n\t\treturn filteredTabs.map( ( { title } ) => title );\n\t}, [ showReusableBlocks ] );\n\n\tconst segmentHandler = useCallback(\n\t\t( selectedTab ) => {\n\t\t\tconst tabTitles = tabs.map( ( { title } ) => title );\n\t\t\tonChangeTab( tabTitles.indexOf( selectedTab ) );\n\t\t},\n\t\t[ onChangeTab ]\n\t);\n\n\treturn segments.length > 1 ? (\n\t\t<SegmentedControl\n\t\t\tsegments={ segments }\n\t\t\tsegmentHandler={ segmentHandler }\n\t\t/>\n\t) : null;\n}\n\nInserterTabs.Control = TabsControl;\n\nInserterTabs.getTabs = () => [\n\t{ name: 'blocks', title: __( 'Blocks' ), component: BlockTypesTab },\n\t{\n\t\tname: 'reusable',\n\t\ttitle: __( 'Synced patterns' ),\n\t\tcomponent: ReusableBlocksTab,\n\t},\n];\n\nexport default InserterTabs;\n"],"mappings":"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"}