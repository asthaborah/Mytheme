{"version":3,"names":["_element","require","_deprecated","_interopRequireDefault","node","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","getSerializeCapableElement","children","getChildrenArray","deprecated","since","version","link","concat","blockNodes","alternative","result","length","blockNode","Array","isArray","j","child","canConcatToPreviousString","push","fromDOM","domNodes","error","toHTML","element","renderToString","matcher","selector","domNode","match","querySelector","childNodes","_default","exports"],"sources":["@wordpress/blocks/src/api/children.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { renderToString } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport * as node from './node';\n\n/**\n * A representation of a block's rich text value.\n *\n * @typedef {WPBlockNode[]} WPBlockChildren\n */\n\n/**\n * Given block children, returns a serialize-capable WordPress element.\n *\n * @param {WPBlockChildren} children Block children object to convert.\n *\n * @return {Element} A serialize-capable element.\n */\nexport function getSerializeCapableElement( children ) {\n\t// The fact that block children are compatible with the element serializer is\n\t// merely an implementation detail that currently serves to be true, but\n\t// should not be mistaken as being a guarantee on the external API. The\n\t// public API only offers guarantees to work with strings (toHTML) and DOM\n\t// elements (fromDOM), and should provide utilities to manipulate the value\n\t// rather than expect consumers to inspect or construct its shape (concat).\n\treturn children;\n}\n\n/**\n * Given block children, returns an array of block nodes.\n *\n * @param {WPBlockChildren} children Block children object to convert.\n *\n * @return {Array<WPBlockNode>} An array of individual block nodes.\n */\nfunction getChildrenArray( children ) {\n\tdeprecated( 'wp.blocks.children.getChildrenArray', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\t// The fact that block children are compatible with the element serializer\n\t// is merely an implementation detail that currently serves to be true, but\n\t// should not be mistaken as being a guarantee on the external API.\n\treturn children;\n}\n\n/**\n * Given two or more block nodes, returns a new block node representing a\n * concatenation of its values.\n *\n * @param {...WPBlockChildren} blockNodes Block nodes to concatenate.\n *\n * @return {WPBlockChildren} Concatenated block node.\n */\nexport function concat( ...blockNodes ) {\n\tdeprecated( 'wp.blocks.children.concat', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'wp.richText.concat',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\tconst result = [];\n\tfor ( let i = 0; i < blockNodes.length; i++ ) {\n\t\tconst blockNode = Array.isArray( blockNodes[ i ] )\n\t\t\t? blockNodes[ i ]\n\t\t\t: [ blockNodes[ i ] ];\n\t\tfor ( let j = 0; j < blockNode.length; j++ ) {\n\t\t\tconst child = blockNode[ j ];\n\t\t\tconst canConcatToPreviousString =\n\t\t\t\ttypeof child === 'string' &&\n\t\t\t\ttypeof result[ result.length - 1 ] === 'string';\n\n\t\t\tif ( canConcatToPreviousString ) {\n\t\t\t\tresult[ result.length - 1 ] += child;\n\t\t\t} else {\n\t\t\t\tresult.push( child );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Given an iterable set of DOM nodes, returns equivalent block children.\n * Ignores any non-element/text nodes included in set.\n *\n * @param {Iterable.<Node>} domNodes Iterable set of DOM nodes to convert.\n *\n * @return {WPBlockChildren} Block children equivalent to DOM nodes.\n */\nexport function fromDOM( domNodes ) {\n\tdeprecated( 'wp.blocks.children.fromDOM', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'wp.richText.create',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\tconst result = [];\n\tfor ( let i = 0; i < domNodes.length; i++ ) {\n\t\ttry {\n\t\t\tresult.push( node.fromDOM( domNodes[ i ] ) );\n\t\t} catch ( error ) {\n\t\t\t// Simply ignore if DOM node could not be converted.\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Given a block node, returns its HTML string representation.\n *\n * @param {WPBlockChildren} children Block node(s) to convert to string.\n *\n * @return {string} String HTML representation of block node.\n */\nexport function toHTML( children ) {\n\tdeprecated( 'wp.blocks.children.toHTML', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'wp.richText.toHTMLString',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\tconst element = getSerializeCapableElement( children );\n\n\treturn renderToString( element );\n}\n\n/**\n * Given a selector, returns an hpq matcher generating a WPBlockChildren value\n * matching the selector result.\n *\n * @param {string} selector DOM selector.\n *\n * @return {Function} hpq matcher.\n */\nexport function matcher( selector ) {\n\tdeprecated( 'wp.blocks.children.matcher', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'html source',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t} );\n\n\treturn ( domNode ) => {\n\t\tlet match = domNode;\n\n\t\tif ( selector ) {\n\t\t\tmatch = domNode.querySelector( selector );\n\t\t}\n\n\t\tif ( match ) {\n\t\t\treturn fromDOM( match.childNodes );\n\t\t}\n\n\t\treturn [];\n\t};\n}\n\n/**\n * Object of utility functions used in managing block attribute values of\n * source `children`.\n *\n * @see https://github.com/WordPress/gutenberg/pull/10439\n *\n * @deprecated since 4.0. The `children` source should not be used, and can be\n *             replaced by the `html` source.\n *\n * @private\n */\nexport default {\n\tconcat,\n\tgetChildrenArray,\n\tfromDOM,\n\ttoHTML,\n\tmatcher,\n};\n"],"mappings":"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"}