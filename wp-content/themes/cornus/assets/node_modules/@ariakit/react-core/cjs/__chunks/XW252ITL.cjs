"use strict";Object.defineProperty(exports, "__esModule", {value: true});"use client";


var _6ZZYUFPWcjs = require('./6ZZYUFPW.cjs');




var _RNZNGEL4cjs = require('./RNZNGEL4.cjs');


var _EO6LS72Hcjs = require('./EO6LS72H.cjs');




var _AV6KTKLEcjs = require('./AV6KTKLE.cjs');

// src/composite/composite-input.ts




var _dom = require('@ariakit/core/utils/dom');
function getValueLength(element) {
  if (_dom.isTextField.call(void 0, element)) {
    return element.value.length;
  } else if (element.isContentEditable) {
    const range = _dom.getDocument.call(void 0, element).createRange();
    range.selectNodeContents(element);
    return range.toString().length;
  }
  return 0;
}
var useCompositeInput = _RNZNGEL4cjs.createHook.call(void 0, 
  (_a) => {
    var _b = _a, { store } = _b, props = _AV6KTKLEcjs.__objRest.call(void 0, _b, ["store"]);
    const onKeyDownCaptureProp = props.onKeyDownCapture;
    const onKeyDownCapture = _EO6LS72Hcjs.useEvent.call(void 0, 
      (event) => {
        onKeyDownCaptureProp == null ? void 0 : onKeyDownCaptureProp(event);
        if (event.defaultPrevented)
          return;
        const element = event.currentTarget;
        if (!element.isContentEditable && !_dom.isTextField.call(void 0, element))
          return;
        const selection = _dom.getTextboxSelection.call(void 0, element);
        if (event.key === "ArrowRight" || event.key === "ArrowDown") {
          if (selection.end !== getValueLength(element)) {
            event.stopPropagation();
          }
        } else if (event.key === "ArrowLeft" || event.key === "ArrowUp") {
          if (selection.start !== 0) {
            event.stopPropagation();
          }
        }
      }
    );
    const onFocusProp = props.onFocus;
    const onFocus = _EO6LS72Hcjs.useEvent.call(void 0, (event) => {
      onFocusProp == null ? void 0 : onFocusProp(event);
      if (event.defaultPrevented)
        return;
      _6ZZYUFPWcjs.selectTextField.call(void 0, event.currentTarget);
    });
    props = _AV6KTKLEcjs.__spreadProps.call(void 0, _AV6KTKLEcjs.__spreadValues.call(void 0, {}, props), {
      onKeyDownCapture,
      onFocus
    });
    return props;
  }
);
var CompositeInput = _RNZNGEL4cjs.createComponent.call(void 0, 
  (props) => {
    const htmlProps = useCompositeInput(props);
    return _RNZNGEL4cjs.createElement.call(void 0, "input", htmlProps);
  }
);
if (process.env.NODE_ENV !== "production") {
  CompositeInput.displayName = "CompositeInput";
}




exports.useCompositeInput = useCompositeInput; exports.CompositeInput = CompositeInput;
