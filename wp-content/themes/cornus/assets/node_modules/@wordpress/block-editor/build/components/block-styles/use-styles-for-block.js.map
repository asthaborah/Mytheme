{"version":3,"names":["_data","require","_blocks","_element","_utils","_store","useGenericPreviewBlock","block","type","useMemo","example","blockName","name","getBlockFromExample","attributes","innerBlocks","cloneBlock","useStylesForBlocks","clientId","onSwitch","selector","select","getBlock","blockEditorStore","blockType","getBlockType","getBlockStyles","blocksStore","styles","className","useSelect","updateBlockAttributes","useDispatch","stylesToRender","getRenderedStyles","activeStyle","getActiveStyle","genericPreviewBlock","onSelect","style","styleClassName","replaceActiveStyle"],"sources":["@wordpress/block-editor/src/components/block-styles/use-styles-for-block.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tcloneBlock,\n\tgetBlockType,\n\tgetBlockFromExample,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getActiveStyle, getRenderedStyles, replaceActiveStyle } from './utils';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n *\n * @param {WPBlock}     block Block object.\n * @param {WPBlockType} type  Block type settings.\n * @return {WPBlock}          A generic block ready for styles preview.\n */\nfunction useGenericPreviewBlock( block, type ) {\n\treturn useMemo( () => {\n\t\tconst example = type?.example;\n\t\tconst blockName = type?.name;\n\n\t\tif ( example && blockName ) {\n\t\t\treturn getBlockFromExample( blockName, {\n\t\t\t\tattributes: example.attributes,\n\t\t\t\tinnerBlocks: example.innerBlocks,\n\t\t\t} );\n\t\t}\n\n\t\tif ( block ) {\n\t\t\treturn cloneBlock( block );\n\t\t}\n\t}, [ type?.example ? block?.name : block, type ] );\n}\n\n/**\n * @typedef useStylesForBlocksArguments\n * @property {string}     clientId Block client ID.\n * @property {() => void} onSwitch Block style switch callback function.\n */\n\n/**\n *\n * @param {useStylesForBlocksArguments} useStylesForBlocks arguments.\n * @return {Object}                                         Results of the select methods.\n */\nexport default function useStylesForBlocks( { clientId, onSwitch } ) {\n\tconst selector = ( select ) => {\n\t\tconst { getBlock } = select( blockEditorStore );\n\t\tconst block = getBlock( clientId );\n\n\t\tif ( ! block ) {\n\t\t\treturn {};\n\t\t}\n\t\tconst blockType = getBlockType( block.name );\n\t\tconst { getBlockStyles } = select( blocksStore );\n\n\t\treturn {\n\t\t\tblock,\n\t\t\tblockType,\n\t\t\tstyles: getBlockStyles( block.name ),\n\t\t\tclassName: block.attributes.className || '',\n\t\t};\n\t};\n\tconst { styles, block, blockType, className } = useSelect( selector, [\n\t\tclientId,\n\t] );\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst stylesToRender = getRenderedStyles( styles );\n\tconst activeStyle = getActiveStyle( stylesToRender, className );\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, blockType );\n\n\tconst onSelect = ( style ) => {\n\t\tconst styleClassName = replaceActiveStyle(\n\t\t\tclassName,\n\t\t\tactiveStyle,\n\t\t\tstyle\n\t\t);\n\t\tupdateBlockAttributes( clientId, {\n\t\t\tclassName: styleClassName,\n\t\t} );\n\t\tonSwitch();\n\t};\n\n\treturn {\n\t\tonSelect,\n\t\tstylesToRender,\n\t\tactiveStyle,\n\t\tgenericPreviewBlock,\n\t\tclassName,\n\t};\n}\n"],"mappings":";;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAMA,IAAAE,QAAA,GAAAF,OAAA;AAKA,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,MAAA,GAAAJ,OAAA;AAhBA;AACA;AACA;;AAUA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,SAASK,sBAAsBA,CAAEC,KAAK,EAAEC,IAAI,EAAG;EAC9C,OAAO,IAAAC,gBAAO,EAAE,MAAM;IACrB,MAAMC,OAAO,GAAGF,IAAI,EAAEE,OAAO;IAC7B,MAAMC,SAAS,GAAGH,IAAI,EAAEI,IAAI;IAE5B,IAAKF,OAAO,IAAIC,SAAS,EAAG;MAC3B,OAAO,IAAAE,2BAAmB,EAAEF,SAAS,EAAE;QACtCG,UAAU,EAAEJ,OAAO,CAACI,UAAU;QAC9BC,WAAW,EAAEL,OAAO,CAACK;MACtB,CAAE,CAAC;IACJ;IAEA,IAAKR,KAAK,EAAG;MACZ,OAAO,IAAAS,kBAAU,EAAET,KAAM,CAAC;IAC3B;EACD,CAAC,EAAE,CAAEC,IAAI,EAAEE,OAAO,GAAGH,KAAK,EAAEK,IAAI,GAAGL,KAAK,EAAEC,IAAI,CAAG,CAAC;AACnD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACe,SAASS,kBAAkBA,CAAE;EAAEC,QAAQ;EAAEC;AAAS,CAAC,EAAG;EACpE,MAAMC,QAAQ,GAAKC,MAAM,IAAM;IAC9B,MAAM;MAAEC;IAAS,CAAC,GAAGD,MAAM,CAAEE,YAAiB,CAAC;IAC/C,MAAMhB,KAAK,GAAGe,QAAQ,CAAEJ,QAAS,CAAC;IAElC,IAAK,CAAEX,KAAK,EAAG;MACd,OAAO,CAAC,CAAC;IACV;IACA,MAAMiB,SAAS,GAAG,IAAAC,oBAAY,EAAElB,KAAK,CAACK,IAAK,CAAC;IAC5C,MAAM;MAAEc;IAAe,CAAC,GAAGL,MAAM,CAAEM,aAAY,CAAC;IAEhD,OAAO;MACNpB,KAAK;MACLiB,SAAS;MACTI,MAAM,EAAEF,cAAc,CAAEnB,KAAK,CAACK,IAAK,CAAC;MACpCiB,SAAS,EAAEtB,KAAK,CAACO,UAAU,CAACe,SAAS,IAAI;IAC1C,CAAC;EACF,CAAC;EACD,MAAM;IAAED,MAAM;IAAErB,KAAK;IAAEiB,SAAS;IAAEK;EAAU,CAAC,GAAG,IAAAC,eAAS,EAAEV,QAAQ,EAAE,CACpEF,QAAQ,CACP,CAAC;EACH,MAAM;IAAEa;EAAsB,CAAC,GAAG,IAAAC,iBAAW,EAAET,YAAiB,CAAC;EACjE,MAAMU,cAAc,GAAG,IAAAC,wBAAiB,EAAEN,MAAO,CAAC;EAClD,MAAMO,WAAW,GAAG,IAAAC,qBAAc,EAAEH,cAAc,EAAEJ,SAAU,CAAC;EAC/D,MAAMQ,mBAAmB,GAAG/B,sBAAsB,CAAEC,KAAK,EAAEiB,SAAU,CAAC;EAEtE,MAAMc,QAAQ,GAAKC,KAAK,IAAM;IAC7B,MAAMC,cAAc,GAAG,IAAAC,yBAAkB,EACxCZ,SAAS,EACTM,WAAW,EACXI,KACD,CAAC;IACDR,qBAAqB,CAAEb,QAAQ,EAAE;MAChCW,SAAS,EAAEW;IACZ,CAAE,CAAC;IACHrB,QAAQ,CAAC,CAAC;EACX,CAAC;EAED,OAAO;IACNmB,QAAQ;IACRL,cAAc;IACdE,WAAW;IACXE,mBAAmB;IACnBR;EACD,CAAC;AACF"}