{"version":3,"names":["View","Platform","Pressable","useRef","useState","useCallback","useSelect","useDispatch","createBlock","KeyboardAwareFlatList","WIDE_ALIGNMENTS","alignmentHelpers","__","styles","BlockListAppender","BlockListItem","BlockListItemCell","BlockListProvider","DEFAULT_BLOCK_LIST_CONTEXT","BlockDraggableWrapper","useEditorWrapperStyles","store","blockEditorStore","identity","x","stylesMemo","getStyles","isStackedHorizontally","horizontalAlignment","styleName","computedStyles","horizontal","overflowVisible","BlockList","blockWidth","initialBlockWidth","contentResizeMode","contentStyle","filterInnerBlocks","gridProperties","header","marginHorizontal","defaultBlock","marginLeft","marginVertical","marginTop","onAddBlock","onDeleteBlock","orientation","parentWidth","renderAppender","renderFooterAppender","rootClientId","withFooter","blockClientIds","blockCount","blockInsertionPointIsVisible","isReadOnly","isRootList","isFloatingToolbarVisible","maxWidth","isRTL","select","getBlockCount","getBlockHierarchyRootClientId","getBlockOrder","getSelectedBlockClientId","isBlockInsertionPointVisible","getSettings","selectedBlockClientId","rootBlockId","blockOrder","isRTLSetting","maxWidthSetting","readOnly","OS","undefined","insertBlock","clearSelectedBlock","extraData","setBlockWidth","addBlockToEndOfPost","newBlock","scrollRef","shouldFlatListPreventAutomaticScroll","shouldShowInnerBlockAppender","length","getExtraData","current","onLayout","nativeEvent","layout","layoutWidth","Math","floor","width","min","renderItem","item","clientId","index","isGridItem","gridItemProps","numOfColumns","numColumns","tileCount","tileIndex","indexOf","createElement","blockToolbar","headerToolbar","floatingToolbar","containerStyle","flex","isContentStretch","isMultiBlocks","isWider","extraScrollHeight","height","style","onAccessibilityEscape","testID","value","onScroll","removeClippedSubviews","accessibilityLabel","ref","keyboardShouldPersistTaps","scrollViewStyle","scrollEnabled","contentContainerStyle","horizontalContentContainer","horizontalContentContainerStretch","horizontalContentContainerCenter","data","keyExtractor","CellRendererComponent","shouldPreventAutomaticScroll","ListHeaderComponent","ListEmptyComponent","EmptyList","ListFooterComponent","Footer","Fragment","map","currentClientId","key","innerAppender","showSeparator","onAddParagraphBlock","paragraphBlock","onPress","blockListFooter","shouldShowInsertionPoint","getBlockInsertionPoint","insertionPoint","align","alignments","full","wrapperStyles","containerStyles","defaultAppender"],"sources":["@wordpress/block-editor/src/components/block-list/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, Platform, Pressable } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useState, useCallback } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tKeyboardAwareFlatList,\n\tWIDE_ALIGNMENTS,\n\talignmentHelpers,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport BlockListAppender from '../block-list-appender';\nimport BlockListItem from './block-list-item';\nimport BlockListItemCell from './block-list-item-cell';\nimport {\n\tBlockListProvider,\n\tDEFAULT_BLOCK_LIST_CONTEXT,\n} from './block-list-context';\nimport { BlockDraggableWrapper } from '../block-draggable';\nimport { useEditorWrapperStyles } from '../../hooks/use-editor-wrapper-styles';\nimport { store as blockEditorStore } from '../../store';\n\nconst identity = ( x ) => x;\n\nconst stylesMemo = {};\nconst getStyles = ( isStackedHorizontally, horizontalAlignment ) => {\n\tconst styleName = `${ isStackedHorizontally }-${ horizontalAlignment }`;\n\tif ( stylesMemo[ styleName ] ) {\n\t\treturn stylesMemo[ styleName ];\n\t}\n\tconst computedStyles = [\n\t\tisStackedHorizontally && styles.horizontal,\n\t\thorizontalAlignment && styles[ `is-aligned-${ horizontalAlignment }` ],\n\t\tstyles.overflowVisible,\n\t];\n\tstylesMemo[ styleName ] = computedStyles;\n\treturn computedStyles;\n};\n\nexport default function BlockList( {\n\tblockWidth: initialBlockWidth,\n\tcontentResizeMode,\n\tcontentStyle,\n\tfilterInnerBlocks,\n\tgridProperties,\n\theader,\n\thorizontal,\n\thorizontalAlignment,\n\tmarginHorizontal = styles.defaultBlock.marginLeft,\n\tmarginVertical = styles.defaultBlock.marginTop,\n\tonAddBlock,\n\tonDeleteBlock,\n\torientation,\n\tparentWidth,\n\trenderAppender,\n\trenderFooterAppender,\n\trootClientId,\n\twithFooter = true,\n} ) {\n\tconst {\n\t\tblockClientIds,\n\t\tblockCount,\n\t\tblockInsertionPointIsVisible,\n\t\tisReadOnly,\n\t\tisRootList,\n\t\tisFloatingToolbarVisible,\n\t\tisStackedHorizontally,\n\t\tmaxWidth,\n\t\tisRTL,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockHierarchyRootClientId,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetSettings,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst rootBlockId = getBlockHierarchyRootClientId(\n\t\t\t\tselectedBlockClientId\n\t\t\t);\n\n\t\t\tlet blockOrder = getBlockOrder( rootClientId );\n\t\t\t// Display only block which fulfill the condition in passed `filterInnerBlocks` function.\n\t\t\tif ( filterInnerBlocks ) {\n\t\t\t\tblockOrder = filterInnerBlocks( blockOrder );\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tisRTL: isRTLSetting,\n\t\t\t\tmaxWidth: maxWidthSetting,\n\t\t\t\treadOnly,\n\t\t\t} = getSettings();\n\n\t\t\treturn {\n\t\t\t\tblockClientIds: blockOrder,\n\t\t\t\tblockCount: getBlockCount(),\n\t\t\t\tblockInsertionPointIsVisible:\n\t\t\t\t\tPlatform.OS === 'ios' && isBlockInsertionPointVisible(),\n\t\t\t\tisReadOnly: readOnly,\n\t\t\t\tisRootList: rootClientId === undefined,\n\t\t\t\tisFloatingToolbarVisible:\n\t\t\t\t\t!! selectedBlockClientId && !! getBlockCount( rootBlockId ),\n\t\t\t\tisStackedHorizontally: orientation === 'horizontal',\n\t\t\t\tmaxWidth: maxWidthSetting,\n\t\t\t\tisRTL: isRTLSetting,\n\t\t\t};\n\t\t},\n\t\t[ filterInnerBlocks, orientation, rootClientId ]\n\t);\n\n\tconst { insertBlock, clearSelectedBlock } = useDispatch( blockEditorStore );\n\n\tconst extraData = useRef( {\n\t\tparentWidth,\n\t\trenderFooterAppender,\n\t\trenderAppender,\n\t\tonDeleteBlock,\n\t\tcontentStyle,\n\t} );\n\n\tconst [ blockWidth, setBlockWidth ] = useState( initialBlockWidth || 0 );\n\n\tconst addBlockToEndOfPost = ( newBlock ) => {\n\t\tinsertBlock( newBlock, blockCount );\n\t};\n\n\tconst scrollRef = useRef( null );\n\n\tconst shouldFlatListPreventAutomaticScroll = () =>\n\t\tblockInsertionPointIsVisible;\n\n\tconst shouldShowInnerBlockAppender = () =>\n\t\trenderAppender && blockClientIds.length > 0;\n\n\tconst getExtraData = () => {\n\t\tif (\n\t\t\textraData.current.parentWidth !== parentWidth ||\n\t\t\textraData.current.renderFooterAppender !== renderFooterAppender ||\n\t\t\textraData.current.onDeleteBlock !== onDeleteBlock ||\n\t\t\textraData.current.contentStyle !== contentStyle ||\n\t\t\textraData.current.renderAppender !== renderAppender ||\n\t\t\textraData.current.blockWidth !== blockWidth ||\n\t\t\textraData.current.gridProperties !== gridProperties\n\t\t) {\n\t\t\textraData.current = {\n\t\t\t\tparentWidth,\n\t\t\t\trenderFooterAppender,\n\t\t\t\tonDeleteBlock,\n\t\t\t\tcontentStyle,\n\t\t\t\trenderAppender,\n\t\t\t\tblockWidth,\n\t\t\t\tgridProperties,\n\t\t\t};\n\t\t}\n\t\treturn extraData.current;\n\t};\n\n\tconst onLayout = ( { nativeEvent } ) => {\n\t\tconst { layout } = nativeEvent;\n\n\t\tconst layoutWidth = Math.floor( layout.width );\n\t\tif ( isRootList && blockWidth !== layoutWidth ) {\n\t\t\tsetBlockWidth( Math.min( layoutWidth, maxWidth ) );\n\t\t} else if ( ! isRootList && ! blockWidth ) {\n\t\t\tsetBlockWidth( Math.min( layoutWidth, maxWidth ) );\n\t\t}\n\t};\n\n\tconst renderItem = ( { item: clientId, index } ) => {\n\t\t// Extracting the grid item properties here to avoid\n\t\t// re-renders in the blockListItem component.\n\t\tconst isGridItem = !! gridProperties;\n\t\tconst gridItemProps = gridProperties && {\n\t\t\tnumOfColumns: gridProperties.numColumns,\n\t\t\ttileCount: blockClientIds.length,\n\t\t\ttileIndex: blockClientIds.indexOf( clientId ),\n\t\t};\n\t\treturn (\n\t\t\t<BlockListItem\n\t\t\t\tindex={ index }\n\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tparentWidth={ parentWidth }\n\t\t\t\tcontentResizeMode={ contentResizeMode }\n\t\t\t\tcontentStyle={ contentStyle }\n\t\t\t\tonAddBlock={ onAddBlock }\n\t\t\t\tmarginVertical={ marginVertical }\n\t\t\t\tmarginHorizontal={ marginHorizontal }\n\t\t\t\tonDeleteBlock={ onDeleteBlock }\n\t\t\t\tshouldShowInnerBlockAppender={ shouldShowInnerBlockAppender }\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\tisGridItem={ isGridItem }\n\t\t\t\t{ ...gridItemProps }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst { blockToolbar, headerToolbar, floatingToolbar } = styles;\n\n\tconst containerStyle = {\n\t\tflex: isRootList ? 1 : 0,\n\t\t// We set negative margin in the parent to remove the edge spacing between parent block and child block in ineer blocks.\n\t\tmarginVertical: isRootList ? 0 : -marginVertical,\n\t\tmarginHorizontal: isRootList ? 0 : -marginHorizontal,\n\t};\n\n\tconst isContentStretch = contentResizeMode === 'stretch';\n\tconst isMultiBlocks = blockClientIds.length > 1;\n\tconst { isWider } = alignmentHelpers;\n\tconst extraScrollHeight =\n\t\theaderToolbar.height +\n\t\tblockToolbar.height +\n\t\t( isFloatingToolbarVisible ? floatingToolbar.height : 0 );\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ containerStyle }\n\t\t\tonAccessibilityEscape={ clearSelectedBlock }\n\t\t\tonLayout={ onLayout }\n\t\t\ttestID=\"block-list-wrapper\"\n\t\t>\n\t\t\t{ isRootList ? (\n\t\t\t\t<BlockListProvider\n\t\t\t\t\tvalue={ {\n\t\t\t\t\t\t...DEFAULT_BLOCK_LIST_CONTEXT,\n\t\t\t\t\t\tscrollRef: scrollRef.current,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<BlockDraggableWrapper isRTL={ isRTL }>\n\t\t\t\t\t\t{ ( { onScroll } ) => (\n\t\t\t\t\t\t\t<KeyboardAwareFlatList\n\t\t\t\t\t\t\t\t{ ...( Platform.OS === 'android'\n\t\t\t\t\t\t\t\t\t? { removeClippedSubviews: false }\n\t\t\t\t\t\t\t\t\t: {} ) } // Disable clipping on Android to fix focus losing. See https://github.com/wordpress-mobile/gutenberg-mobile/pull/741#issuecomment-472746541\n\t\t\t\t\t\t\t\taccessibilityLabel=\"block-list\"\n\t\t\t\t\t\t\t\tref={ scrollRef }\n\t\t\t\t\t\t\t\textraScrollHeight={ extraScrollHeight }\n\t\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\t\t\t\t\tscrollViewStyle={ { flex: 1 } }\n\t\t\t\t\t\t\t\textraData={ getExtraData() }\n\t\t\t\t\t\t\t\tscrollEnabled={ isRootList }\n\t\t\t\t\t\t\t\tcontentContainerStyle={ [\n\t\t\t\t\t\t\t\t\thorizontal &&\n\t\t\t\t\t\t\t\t\t\tstyles.horizontalContentContainer,\n\t\t\t\t\t\t\t\t\tisWider( blockWidth, 'medium' ) &&\n\t\t\t\t\t\t\t\t\t\t( isContentStretch && isMultiBlocks\n\t\t\t\t\t\t\t\t\t\t\t? styles.horizontalContentContainerStretch\n\t\t\t\t\t\t\t\t\t\t\t: styles.horizontalContentContainerCenter ),\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\tdata={ blockClientIds }\n\t\t\t\t\t\t\t\tkeyExtractor={ identity }\n\t\t\t\t\t\t\t\trenderItem={ renderItem }\n\t\t\t\t\t\t\t\tCellRendererComponent={ BlockListItemCell }\n\t\t\t\t\t\t\t\tshouldPreventAutomaticScroll={\n\t\t\t\t\t\t\t\t\tshouldFlatListPreventAutomaticScroll\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tListHeaderComponent={ header }\n\t\t\t\t\t\t\t\tListEmptyComponent={\n\t\t\t\t\t\t\t\t\t! isReadOnly && (\n\t\t\t\t\t\t\t\t\t\t<EmptyList\n\t\t\t\t\t\t\t\t\t\t\torientation={ orientation }\n\t\t\t\t\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tListFooterComponent={\n\t\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\t\taddBlockToEndOfPost={\n\t\t\t\t\t\t\t\t\t\t\taddBlockToEndOfPost\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisReadOnly={ isReadOnly }\n\t\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twithFooter={ withFooter }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonScroll={ onScroll }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BlockDraggableWrapper>\n\t\t\t\t</BlockListProvider>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{ blockClientIds.length > 0 ? (\n\t\t\t\t\t\t<View style={ [ { flex: 0 }, styles.overflowVisible ] }>\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t...getStyles(\n\t\t\t\t\t\t\t\t\t\tisStackedHorizontally,\n\t\t\t\t\t\t\t\t\t\thorizontalAlignment\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\thorizontal &&\n\t\t\t\t\t\t\t\t\t\tstyles.horizontalContentContainer,\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ blockClientIds.map(\n\t\t\t\t\t\t\t\t\t( currentClientId, index ) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<View key={ currentClientId }>\n\t\t\t\t\t\t\t\t\t\t\t\t{ renderItem( {\n\t\t\t\t\t\t\t\t\t\t\t\t\titem: currentClientId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\taddBlockToEndOfPost={ addBlockToEndOfPost }\n\t\t\t\t\t\t\t\t\tisReadOnly={ isReadOnly }\n\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\twithFooter={ withFooter }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EmptyList\n\t\t\t\t\t\t\torientation={ orientation }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\t\trenderFooterAppender={ renderFooterAppender }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ shouldShowInnerBlockAppender() && (\n\t\t\t\t<View\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tmarginHorizontal:\n\t\t\t\t\t\t\tmarginHorizontal - styles.innerAppender.marginLeft,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<BlockListAppender\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\tshowSeparator\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\nfunction Footer( {\n\taddBlockToEndOfPost,\n\tisReadOnly,\n\trenderFooterAppender,\n\twithFooter,\n} ) {\n\tconst onAddParagraphBlock = useCallback( () => {\n\t\tconst paragraphBlock = createBlock( 'core/paragraph' );\n\t\taddBlockToEndOfPost( paragraphBlock );\n\t}, [ addBlockToEndOfPost ] );\n\n\tif ( ! isReadOnly && withFooter ) {\n\t\treturn (\n\t\t\t<Pressable\n\t\t\t\taccessibilityLabel={ __( 'Add paragraph block' ) }\n\t\t\t\ttestID={ __( 'Add paragraph block' ) }\n\t\t\t\tonPress={ onAddParagraphBlock }\n\t\t\t>\n\t\t\t\t<View style={ styles.blockListFooter } />\n\t\t\t</Pressable>\n\t\t);\n\t} else if ( renderFooterAppender ) {\n\t\treturn <View>{ renderFooterAppender() }</View>;\n\t}\n\n\treturn null;\n}\n\nfunction EmptyList( {\n\torientation,\n\trenderAppender,\n\trenderFooterAppender,\n\trootClientId,\n} ) {\n\tconst { shouldShowInsertionPoint } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t} = select( blockEditorStore );\n\n\t\tconst isStackedHorizontally = orientation === 'horizontal';\n\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst blockInsertionPointIsVisible = isBlockInsertionPointVisible();\n\n\t\treturn {\n\t\t\tshouldShowInsertionPoint:\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tblockInsertionPointIsVisible &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t\t// If list is empty, show the insertion point (via the default appender)\n\t\t\t\t( blockClientIds.length === 0 ||\n\t\t\t\t\t// Or if the insertion point is right before the denoted block.\n\t\t\t\t\t! blockClientIds[ insertionPoint.index ] ),\n\t\t};\n\t} );\n\tconst align = renderAppender ? WIDE_ALIGNMENTS.alignments.full : undefined;\n\tconst [ wrapperStyles ] = useEditorWrapperStyles( { align } );\n\n\tif ( renderFooterAppender || renderAppender === false ) {\n\t\treturn null;\n\t}\n\n\tconst containerStyles = [ styles.defaultAppender, wrapperStyles ];\n\n\treturn (\n\t\t<View style={ containerStyles }>\n\t\t\t<BlockListAppender\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\tshowSeparator={ shouldShowInsertionPoint }\n\t\t\t/>\n\t\t</View>\n\t);\n}\n"],"mappings":"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"}