{"version":3,"names":["_utils","require","backgroundImage","name","generate","style","options","_backgroundImage","background","_backgroundSize","backgroundSize","styleRules","push","selector","key","value","source","url","encodeURI","safeDecodeURI","undefined","backgroundPosition","generateRule","backgroundRepeat","_backgroundPosition","_default","exports","default"],"sources":["@wordpress/style-engine/src/styles/background/index.ts"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport type { GeneratedCSSRule, Style, StyleOptions } from '../../types';\nimport { generateRule, safeDecodeURI } from '../utils';\n\nconst backgroundImage = {\n\tname: 'backgroundImage',\n\tgenerate: ( style: Style, options: StyleOptions ) => {\n\t\tconst _backgroundImage = style?.background?.backgroundImage;\n\t\tconst _backgroundSize = style?.background?.backgroundSize;\n\n\t\tconst styleRules: GeneratedCSSRule[] = [];\n\n\t\tif ( ! _backgroundImage ) {\n\t\t\treturn styleRules;\n\t\t}\n\n\t\t/*\n\t\t * If the background image is a string, it could already contain a url() function,\n\t\t * or have a linear-gradient value.\n\t\t */\n\t\tif ( typeof _backgroundImage === 'string' ) {\n\t\t\tstyleRules.push( {\n\t\t\t\tselector: options.selector,\n\t\t\t\tkey: 'backgroundImage',\n\t\t\t\tvalue: _backgroundImage,\n\t\t\t} );\n\t\t}\n\n\t\tif (\n\t\t\ttypeof _backgroundImage === 'object' &&\n\t\t\t_backgroundImage?.source === 'file' &&\n\t\t\t_backgroundImage?.url\n\t\t) {\n\t\t\tstyleRules.push( {\n\t\t\t\tselector: options.selector,\n\t\t\t\tkey: 'backgroundImage',\n\t\t\t\t// Passed `url` may already be encoded. To prevent double encoding, decodeURI is executed to revert to the original string.\n\t\t\t\tvalue: `url( '${ encodeURI(\n\t\t\t\t\tsafeDecodeURI( _backgroundImage.url )\n\t\t\t\t) }' )`,\n\t\t\t} );\n\t\t}\n\n\t\t// If no background size is set, but an image is, default to cover.\n\t\tif ( _backgroundSize === undefined ) {\n\t\t\tstyleRules.push( {\n\t\t\t\tselector: options.selector,\n\t\t\t\tkey: 'backgroundSize',\n\t\t\t\tvalue: 'cover',\n\t\t\t} );\n\t\t}\n\n\t\treturn styleRules;\n\t},\n};\n\nconst backgroundPosition = {\n\tname: 'backgroundRepeat',\n\tgenerate: ( style: Style, options: StyleOptions ) => {\n\t\treturn generateRule(\n\t\t\tstyle,\n\t\t\toptions,\n\t\t\t[ 'background', 'backgroundPosition' ],\n\t\t\t'backgroundPosition'\n\t\t);\n\t},\n};\n\nconst backgroundRepeat = {\n\tname: 'backgroundRepeat',\n\tgenerate: ( style: Style, options: StyleOptions ) => {\n\t\treturn generateRule(\n\t\t\tstyle,\n\t\t\toptions,\n\t\t\t[ 'background', 'backgroundRepeat' ],\n\t\t\t'backgroundRepeat'\n\t\t);\n\t},\n};\n\nconst backgroundSize = {\n\tname: 'backgroundSize',\n\tgenerate: ( style: Style, options: StyleOptions ) => {\n\t\tconst _backgroundSize = style?.background?.backgroundSize;\n\t\tconst _backgroundPosition = style?.background?.backgroundPosition;\n\n\t\tconst styleRules: GeneratedCSSRule[] = [];\n\n\t\tif ( _backgroundSize === undefined ) {\n\t\t\treturn styleRules;\n\t\t}\n\n\t\tstyleRules.push(\n\t\t\t...generateRule(\n\t\t\t\tstyle,\n\t\t\t\toptions,\n\t\t\t\t[ 'background', 'backgroundSize' ],\n\t\t\t\t'backgroundSize'\n\t\t\t)\n\t\t);\n\n\t\t// If background size is set to contain, but no position is set, default to center.\n\t\tif (\n\t\t\t_backgroundSize === 'contain' &&\n\t\t\t_backgroundPosition === undefined\n\t\t) {\n\t\t\tstyleRules.push( {\n\t\t\t\tselector: options.selector,\n\t\t\t\tkey: 'backgroundPosition',\n\t\t\t\tvalue: 'center',\n\t\t\t} );\n\t\t}\n\n\t\treturn styleRules;\n\t},\n};\n\nexport default [\n\tbackgroundImage,\n\tbackgroundPosition,\n\tbackgroundRepeat,\n\tbackgroundSize,\n];\n"],"mappings":"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"}