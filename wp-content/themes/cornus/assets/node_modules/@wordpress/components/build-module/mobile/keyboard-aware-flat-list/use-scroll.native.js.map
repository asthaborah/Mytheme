{"version":3,"names":["useWindowDimensions","useAnimatedScrollHandler","useSharedValue","useCallback","useEffect","useRef","useKeyboardOffset","useScrollToSection","useScrollToElement","useScroll","scrollEnabled","shouldPreventAutomaticScroll","onScroll","onSizeChange","extraScrollHeight","scrollViewRef","scrollViewMeasurements","scrollViewYOffset","lastScrollTo","clientId","height","windowHeight","width","windowWidth","isLandscape","keyboardOffset","scrollHandler","event","contentOffset","value","y","current","scrollToSection","scrollToElement","measureScrollView","measureInWindow","_x","onContentSizeChange"],"sources":["@wordpress/components/src/mobile/keyboard-aware-flat-list/use-scroll.native.js"],"sourcesContent":["/**\n * External dependencies\n */\n\nimport { useWindowDimensions } from 'react-native';\nimport {\n\tuseAnimatedScrollHandler,\n\tuseSharedValue,\n} from 'react-native-reanimated';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useKeyboardOffset from './use-keyboard-offset';\nimport useScrollToSection from './use-scroll-to-section';\nimport useScrollToElement from './use-scroll-to-element';\n\nexport default function useScroll( {\n\tscrollEnabled,\n\tshouldPreventAutomaticScroll,\n\tonScroll,\n\tonSizeChange,\n\textraScrollHeight,\n} ) {\n\tconst scrollViewRef = useRef();\n\tconst scrollViewMeasurements = useRef();\n\tconst scrollViewYOffset = useSharedValue( -1 );\n\tconst lastScrollTo = useRef( {\n\t\tclientId: null,\n\t} );\n\n\tconst { height: windowHeight, width: windowWidth } = useWindowDimensions();\n\tconst isLandscape = windowWidth >= windowHeight;\n\n\tconst [ keyboardOffset ] = useKeyboardOffset(\n\t\tscrollEnabled,\n\t\tshouldPreventAutomaticScroll\n\t);\n\n\tconst scrollHandler = useAnimatedScrollHandler( {\n\t\tonScroll: ( event ) => {\n\t\t\tconst { contentOffset } = event;\n\t\t\tscrollViewYOffset.value = contentOffset.y;\n\t\t\tonScroll( event );\n\t\t},\n\t} );\n\n\t// When the orientation changes, the ScrollView measurements\n\t// need to be re-calculated.\n\tuseEffect( () => {\n\t\tscrollViewMeasurements.current = null;\n\t}, [ isLandscape ] );\n\n\tconst [ scrollToSection ] = useScrollToSection(\n\t\textraScrollHeight,\n\t\tkeyboardOffset,\n\t\tscrollEnabled,\n\t\tscrollViewMeasurements,\n\t\tscrollViewRef,\n\t\tscrollViewYOffset\n\t);\n\tconst [ scrollToElement ] = useScrollToElement(\n\t\tscrollViewRef,\n\t\tscrollToSection\n\t);\n\n\tconst measureScrollView = useCallback( () => {\n\t\tif ( scrollViewRef.current ) {\n\t\t\tscrollViewRef.current.measureInWindow( ( _x, y, width, height ) => {\n\t\t\t\tscrollViewMeasurements.current = { y, width, height };\n\t\t\t} );\n\t\t}\n\t}, [ scrollViewRef ] );\n\n\tconst onContentSizeChange = useCallback( () => {\n\t\tif ( onSizeChange ) {\n\t\t\tonSizeChange();\n\t\t}\n\n\t\t// Sets the first values when the content size changes.\n\t\tif ( ! scrollViewMeasurements.current ) {\n\t\t\tmeasureScrollView();\n\t\t}\n\t}, [ measureScrollView, onSizeChange ] );\n\n\treturn {\n\t\tscrollViewRef,\n\t\tscrollHandler,\n\t\tkeyboardOffset,\n\t\tscrollToSection,\n\t\tscrollToElement,\n\t\tonContentSizeChange,\n\t\tlastScrollTo,\n\t};\n}\n"],"mappings":"AAAA;AACA;AACA;;AAEA,SAASA,mBAAmB,QAAQ,cAAc;AAClD,SACCC,wBAAwB,EACxBC,cAAc,QACR,yBAAyB;;AAEhC;AACA;AACA;AACA,SAASC,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,oBAAoB;;AAEnE;AACA;AACA;AACA,OAAOC,iBAAiB,MAAM,uBAAuB;AACrD,OAAOC,kBAAkB,MAAM,yBAAyB;AACxD,OAAOC,kBAAkB,MAAM,yBAAyB;AAExD,eAAe,SAASC,SAASA,CAAE;EAClCC,aAAa;EACbC,4BAA4B;EAC5BC,QAAQ;EACRC,YAAY;EACZC;AACD,CAAC,EAAG;EACH,MAAMC,aAAa,GAAGV,MAAM,CAAC,CAAC;EAC9B,MAAMW,sBAAsB,GAAGX,MAAM,CAAC,CAAC;EACvC,MAAMY,iBAAiB,GAAGf,cAAc,CAAE,CAAC,CAAE,CAAC;EAC9C,MAAMgB,YAAY,GAAGb,MAAM,CAAE;IAC5Bc,QAAQ,EAAE;EACX,CAAE,CAAC;EAEH,MAAM;IAAEC,MAAM,EAAEC,YAAY;IAAEC,KAAK,EAAEC;EAAY,CAAC,GAAGvB,mBAAmB,CAAC,CAAC;EAC1E,MAAMwB,WAAW,GAAGD,WAAW,IAAIF,YAAY;EAE/C,MAAM,CAAEI,cAAc,CAAE,GAAGnB,iBAAiB,CAC3CI,aAAa,EACbC,4BACD,CAAC;EAED,MAAMe,aAAa,GAAGzB,wBAAwB,CAAE;IAC/CW,QAAQ,EAAIe,KAAK,IAAM;MACtB,MAAM;QAAEC;MAAc,CAAC,GAAGD,KAAK;MAC/BV,iBAAiB,CAACY,KAAK,GAAGD,aAAa,CAACE,CAAC;MACzClB,QAAQ,CAAEe,KAAM,CAAC;IAClB;EACD,CAAE,CAAC;;EAEH;EACA;EACAvB,SAAS,CAAE,MAAM;IAChBY,sBAAsB,CAACe,OAAO,GAAG,IAAI;EACtC,CAAC,EAAE,CAAEP,WAAW,CAAG,CAAC;EAEpB,MAAM,CAAEQ,eAAe,CAAE,GAAGzB,kBAAkB,CAC7CO,iBAAiB,EACjBW,cAAc,EACdf,aAAa,EACbM,sBAAsB,EACtBD,aAAa,EACbE,iBACD,CAAC;EACD,MAAM,CAAEgB,eAAe,CAAE,GAAGzB,kBAAkB,CAC7CO,aAAa,EACbiB,eACD,CAAC;EAED,MAAME,iBAAiB,GAAG/B,WAAW,CAAE,MAAM;IAC5C,IAAKY,aAAa,CAACgB,OAAO,EAAG;MAC5BhB,aAAa,CAACgB,OAAO,CAACI,eAAe,CAAE,CAAEC,EAAE,EAAEN,CAAC,EAAER,KAAK,EAAEF,MAAM,KAAM;QAClEJ,sBAAsB,CAACe,OAAO,GAAG;UAAED,CAAC;UAAER,KAAK;UAAEF;QAAO,CAAC;MACtD,CAAE,CAAC;IACJ;EACD,CAAC,EAAE,CAAEL,aAAa,CAAG,CAAC;EAEtB,MAAMsB,mBAAmB,GAAGlC,WAAW,CAAE,MAAM;IAC9C,IAAKU,YAAY,EAAG;MACnBA,YAAY,CAAC,CAAC;IACf;;IAEA;IACA,IAAK,CAAEG,sBAAsB,CAACe,OAAO,EAAG;MACvCG,iBAAiB,CAAC,CAAC;IACpB;EACD,CAAC,EAAE,CAAEA,iBAAiB,EAAErB,YAAY,CAAG,CAAC;EAExC,OAAO;IACNE,aAAa;IACbW,aAAa;IACbD,cAAc;IACdO,eAAe;IACfC,eAAe;IACfI,mBAAmB;IACnBnB;EACD,CAAC;AACF"}