{"version":3,"names":["_data","require","_blocks","_components","_element","_compose","_i18n","_store","_blockPreview","_interopRequireDefault","_setupToolbar","_usePatternsSetup","_constants","_lockUnlock","CompositeV2","Composite","CompositeItemV2","CompositeItem","useCompositeStoreV2","useCompositeStore","unlock","componentsPrivateApis","SetupContent","viewMode","activeSlide","patterns","onBlockPatternSelect","showTitles","compositeStore","containerClass","VIEWMODES","carousel","slideClass","Map","_react","createElement","className","map","pattern","index","BlockPatternSlide","active","get","key","name","store","role","__","BlockPattern","onSelect","baseClassName","blocks","description","viewportWidth","descriptionId","useInstanceId","render","undefined","title","id","onClick","default","VisuallyHidden","minHeight","BlockPatternSetup","clientId","blockName","filterPatternsFn","initialViewMode","setViewMode","useState","setActiveSlide","replaceBlock","useDispatch","blockEditorStore","usePatternsSetup","length","onBlockPatternSelectDefault","clonedBlocks","block","cloneBlock","onPatternSelectCallback","Fragment","totalSlides","handleNext","Math","min","handlePrevious","max","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-pattern-setup/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@wordpress/data';\nimport { cloneBlock } from '@wordpress/blocks';\nimport {\n\tVisuallyHidden,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\n\nimport { useState } from '@wordpress/element';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockPreview from '../block-preview';\nimport SetupToolbar from './setup-toolbar';\nimport usePatternsSetup from './use-patterns-setup';\nimport { VIEWMODES } from './constants';\nimport { unlock } from '../../lock-unlock';\n\nconst {\n\tCompositeV2: Composite,\n\tCompositeItemV2: CompositeItem,\n\tuseCompositeStoreV2: useCompositeStore,\n} = unlock( componentsPrivateApis );\n\nconst SetupContent = ( {\n\tviewMode,\n\tactiveSlide,\n\tpatterns,\n\tonBlockPatternSelect,\n\tshowTitles,\n} ) => {\n\tconst compositeStore = useCompositeStore();\n\tconst containerClass = 'block-editor-block-pattern-setup__container';\n\n\tif ( viewMode === VIEWMODES.carousel ) {\n\t\tconst slideClass = new Map( [\n\t\t\t[ activeSlide, 'active-slide' ],\n\t\t\t[ activeSlide - 1, 'previous-slide' ],\n\t\t\t[ activeSlide + 1, 'next-slide' ],\n\t\t] );\n\t\treturn (\n\t\t\t<div className=\"block-editor-block-pattern-setup__carousel\">\n\t\t\t\t<div className={ containerClass }>\n\t\t\t\t\t<div className=\"carousel-container\">\n\t\t\t\t\t\t{ patterns.map( ( pattern, index ) => (\n\t\t\t\t\t\t\t<BlockPatternSlide\n\t\t\t\t\t\t\t\tactive={ index === activeSlide }\n\t\t\t\t\t\t\t\tclassName={ slideClass.get( index ) || '' }\n\t\t\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"block-editor-block-pattern-setup__grid\">\n\t\t\t<Composite\n\t\t\t\tstore={ compositeStore }\n\t\t\t\trole=\"listbox\"\n\t\t\t\tclassName={ containerClass }\n\t\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t\t>\n\t\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\tonSelect={ onBlockPatternSelect }\n\t\t\t\t\t\tshowTitles={ showTitles }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</Composite>\n\t\t</div>\n\t);\n};\n\nfunction BlockPattern( { pattern, onSelect, showTitles } ) {\n\tconst baseClassName = 'block-editor-block-pattern-setup-list';\n\tconst { blocks, description, viewportWidth = 700 } = pattern;\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }__item-description`\n\t);\n\treturn (\n\t\t<div className={ `${ baseClassName }__list-item` }>\n\t\t\t<CompositeItem\n\t\t\t\trender={\n\t\t\t\t\t<div\n\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\tdescription ? descriptionId : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\tclassName={ `${ baseClassName }__item` }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tid={ `${ baseClassName }__pattern__${ pattern.name }` }\n\t\t\t\trole=\"option\"\n\t\t\t\tonClick={ () => onSelect( blocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t/>\n\t\t\t\t{ showTitles && (\n\t\t\t\t\t<div className={ `${ baseClassName }__item-title` }>\n\t\t\t\t\t\t{ pattern.title }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ !! description && (\n\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t\t{ description }\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t) }\n\t\t\t</CompositeItem>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternSlide( { active, className, pattern, minHeight } ) {\n\tconst { blocks, title, description } = pattern;\n\tconst descriptionId = useInstanceId(\n\t\tBlockPatternSlide,\n\t\t'block-editor-block-pattern-setup-list__item-description'\n\t);\n\treturn (\n\t\t<div\n\t\t\taria-hidden={ ! active }\n\t\t\trole=\"img\"\n\t\t\tclassName={ `pattern-slide ${ className }` }\n\t\t\taria-label={ title }\n\t\t\taria-describedby={ description ? descriptionId : undefined }\n\t\t>\n\t\t\t<BlockPreview blocks={ blocks } minHeight={ minHeight } />\n\t\t\t{ !! description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nconst BlockPatternSetup = ( {\n\tclientId,\n\tblockName,\n\tfilterPatternsFn,\n\tonBlockPatternSelect,\n\tinitialViewMode = VIEWMODES.carousel,\n\tshowTitles = false,\n} ) => {\n\tconst [ viewMode, setViewMode ] = useState( initialViewMode );\n\tconst [ activeSlide, setActiveSlide ] = useState( 0 );\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\n\tconst patterns = usePatternsSetup( clientId, blockName, filterPatternsFn );\n\n\tif ( ! patterns?.length ) {\n\t\treturn null;\n\t}\n\n\tconst onBlockPatternSelectDefault = ( blocks ) => {\n\t\tconst clonedBlocks = blocks.map( ( block ) => cloneBlock( block ) );\n\t\treplaceBlock( clientId, clonedBlocks );\n\t};\n\tconst onPatternSelectCallback =\n\t\tonBlockPatternSelect || onBlockPatternSelectDefault;\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={ `block-editor-block-pattern-setup view-mode-${ viewMode }` }\n\t\t\t>\n\t\t\t\t<SetupContent\n\t\t\t\t\tviewMode={ viewMode }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonBlockPatternSelect={ onPatternSelectCallback }\n\t\t\t\t\tshowTitles={ showTitles }\n\t\t\t\t/>\n\t\t\t\t<SetupToolbar\n\t\t\t\t\tviewMode={ viewMode }\n\t\t\t\t\tsetViewMode={ setViewMode }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\ttotalSlides={ patterns.length }\n\t\t\t\t\thandleNext={ () => {\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\n\t\t\t\t\t\t\tMath.min( active + 1, patterns.length - 1 )\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\thandlePrevious={ () => {\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\n\t\t\t\t\t\t\tMath.max( active - 1, 0 )\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\tonBlockPatternSelect={ () => {\n\t\t\t\t\t\tonPatternSelectCallback(\n\t\t\t\t\t\t\tpatterns[ activeSlide ].blocks\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default BlockPatternSetup;\n"],"mappings":"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"}