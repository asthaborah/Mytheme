{"version":3,"names":["_react","require","_element","_context","_truncate","_colors","styles","_interopRequireWildcard","_utils","_fontSize","_utils2","_getLineHeight","_useCx","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_EMOTION_STRINGIFIED_CSS_ERROR__","_ref","process","env","NODE_ENV","name","map","toString","useText","props","adjustLineHeightForInnerControls","align","children","className","color","ellipsizeMode","isDestructive","display","highlightEscape","highlightCaseSensitive","highlightWords","highlightSanitize","isBlock","letterSpacing","lineHeight","lineHeightProp","optimizeReadabilityFor","size","truncate","upperCase","variant","weight","CONFIG","fontWeight","otherProps","useContextSystem","content","isHighlighter","Array","isArray","isCaption","TypeError","createHighlighterText","autoEscape","caseSensitive","searchWords","sanitize","cx","useCx","classes","useMemo","sx","getLineHeight","Base","css","fontSize","getFontSize","textAlign","optimalTextColor","isOptimalTextColorDark","getOptimalTextShade","COLORS","gray","white","Text","destructive","highlighterText","block","muted","finalEllipsizeMode","finalComponentProps","truncateProps","useTruncate","Children","child","isLink","hasConnectNamespace","cloneElement"],"sources":["@wordpress/components/src/text/hook.ts"],"sourcesContent":["/**\n * External dependencies\n */\nimport type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, Children, cloneElement } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { WordPressComponentProps } from '../context';\nimport { hasConnectNamespace, useContextSystem } from '../context';\nimport { useTruncate } from '../truncate';\nimport { getOptimalTextShade } from '../utils/colors';\nimport * as styles from './styles';\nimport { createHighlighterText } from './utils';\nimport { getFontSize } from '../utils/font-size';\nimport { CONFIG, COLORS } from '../utils';\nimport { getLineHeight } from './get-line-height';\nimport { useCx } from '../utils/hooks/use-cx';\nimport type { Props } from './types';\nimport type React from 'react';\n\n/**\n * @param {import('../context').WordPressComponentProps<import('./types').Props, 'span'>} props\n */\nexport default function useText(\n\tprops: WordPressComponentProps< Props, 'span' >\n) {\n\tconst {\n\t\tadjustLineHeightForInnerControls,\n\t\talign,\n\t\tchildren,\n\t\tclassName,\n\t\tcolor,\n\t\tellipsizeMode,\n\t\tisDestructive = false,\n\t\tdisplay,\n\t\thighlightEscape = false,\n\t\thighlightCaseSensitive = false,\n\t\thighlightWords,\n\t\thighlightSanitize,\n\t\tisBlock = false,\n\t\tletterSpacing,\n\t\tlineHeight: lineHeightProp,\n\t\toptimizeReadabilityFor,\n\t\tsize,\n\t\ttruncate = false,\n\t\tupperCase = false,\n\t\tvariant,\n\t\tweight = CONFIG.fontWeight,\n\t\t...otherProps\n\t} = useContextSystem( props, 'Text' );\n\n\tlet content: React.ReactNode = children;\n\tconst isHighlighter = Array.isArray( highlightWords );\n\tconst isCaption = size === 'caption';\n\n\tif ( isHighlighter ) {\n\t\tif ( typeof children !== 'string' ) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'`children` of `Text` must only be `string` types when `highlightWords` is defined'\n\t\t\t);\n\t\t}\n\n\t\tcontent = createHighlighterText( {\n\t\t\tautoEscape: highlightEscape,\n\t\t\tchildren,\n\t\t\tcaseSensitive: highlightCaseSensitive,\n\t\t\tsearchWords: highlightWords,\n\t\t\tsanitize: highlightSanitize,\n\t\t} );\n\t}\n\n\tconst cx = useCx();\n\n\tconst classes = useMemo( () => {\n\t\tconst sx: Record< string, SerializedStyles | null > = {};\n\n\t\tconst lineHeight = getLineHeight(\n\t\t\tadjustLineHeightForInnerControls,\n\t\t\tlineHeightProp\n\t\t);\n\n\t\tsx.Base = css( {\n\t\t\tcolor,\n\t\t\tdisplay,\n\t\t\tfontSize: getFontSize( size ),\n\t\t\tfontWeight: weight,\n\t\t\tlineHeight,\n\t\t\tletterSpacing,\n\t\t\ttextAlign: align,\n\t\t} );\n\n\t\tsx.upperCase = css( { textTransform: 'uppercase' } );\n\n\t\tsx.optimalTextColor = null;\n\n\t\tif ( optimizeReadabilityFor ) {\n\t\t\tconst isOptimalTextColorDark =\n\t\t\t\tgetOptimalTextShade( optimizeReadabilityFor ) === 'dark';\n\n\t\t\tsx.optimalTextColor = isOptimalTextColorDark\n\t\t\t\t? css( { color: COLORS.gray[ 900 ] } )\n\t\t\t\t: css( { color: COLORS.white } );\n\t\t}\n\n\t\treturn cx(\n\t\t\tstyles.Text,\n\t\t\tsx.Base,\n\t\t\tsx.optimalTextColor,\n\t\t\tisDestructive && styles.destructive,\n\t\t\t!! isHighlighter && styles.highlighterText,\n\t\t\tisBlock && styles.block,\n\t\t\tisCaption && styles.muted,\n\t\t\tvariant && styles[ variant ],\n\t\t\tupperCase && sx.upperCase,\n\t\t\tclassName\n\t\t);\n\t}, [\n\t\tadjustLineHeightForInnerControls,\n\t\talign,\n\t\tclassName,\n\t\tcolor,\n\t\tcx,\n\t\tdisplay,\n\t\tisBlock,\n\t\tisCaption,\n\t\tisDestructive,\n\t\tisHighlighter,\n\t\tletterSpacing,\n\t\tlineHeightProp,\n\t\toptimizeReadabilityFor,\n\t\tsize,\n\t\tupperCase,\n\t\tvariant,\n\t\tweight,\n\t] );\n\n\tlet finalEllipsizeMode: undefined | 'auto' | 'none';\n\tif ( truncate === true ) {\n\t\tfinalEllipsizeMode = 'auto';\n\t}\n\tif ( truncate === false ) {\n\t\tfinalEllipsizeMode = 'none';\n\t}\n\n\tconst finalComponentProps = {\n\t\t...otherProps,\n\t\tclassName: classes,\n\t\tchildren,\n\t\tellipsizeMode: ellipsizeMode || finalEllipsizeMode,\n\t};\n\n\tconst truncateProps = useTruncate( finalComponentProps );\n\n\t/**\n\t * Enhance child `<Link />` components to inherit font size.\n\t */\n\tif ( ! truncate && Array.isArray( children ) ) {\n\t\tcontent = Children.map( children, ( child ) => {\n\t\t\tif (\n\t\t\t\ttypeof child !== 'object' ||\n\t\t\t\tchild === null ||\n\t\t\t\t! ( 'props' in child )\n\t\t\t) {\n\t\t\t\treturn child;\n\t\t\t}\n\n\t\t\tconst isLink = hasConnectNamespace( child, [ 'Link' ] );\n\t\t\tif ( isLink ) {\n\t\t\t\treturn cloneElement( child, {\n\t\t\t\t\tsize: child.props.size || 'inherit',\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn child;\n\t\t} );\n\t}\n\n\treturn {\n\t\t...truncateProps,\n\t\tchildren: truncate ? truncateProps.children : content,\n\t};\n}\n"],"mappings":"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"}