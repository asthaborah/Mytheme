{"version":3,"names":["Children","Component","cloneElement","isEmptyElement","SlotFillContext","isFunction","maybeFunc","SlotComponent","constructor","props","isUnmounted","componentDidMount","registerSlot","name","componentWillUnmount","unregisterSlot","componentDidUpdate","prevProps","forceUpdate","render","_getFills","children","fillProps","getFills","fills","map","fill","fillChildren","child","childIndex","childKey","key","filter","element","createElement","Fragment","Slot","Consumer"],"sources":["@wordpress/components/src/slot-fill/slot.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport type { ReactElement, ReactNode, Key } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tChildren,\n\tComponent,\n\tcloneElement,\n\tisEmptyElement,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport SlotFillContext from './context';\nimport type { BaseSlotComponentProps, SlotComponentProps } from './types';\n\n/**\n * Whether the argument is a function.\n *\n * @param maybeFunc The argument to check.\n * @return True if the argument is a function, false otherwise.\n */\nfunction isFunction( maybeFunc: any ): maybeFunc is Function {\n\treturn typeof maybeFunc === 'function';\n}\n\nclass SlotComponent extends Component< BaseSlotComponentProps > {\n\tprivate isUnmounted: boolean;\n\n\tconstructor( props: BaseSlotComponentProps ) {\n\t\tsuper( props );\n\n\t\tthis.isUnmounted = false;\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { registerSlot } = this.props;\n\t\tthis.isUnmounted = false;\n\t\tregisterSlot( this.props.name, this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tconst { unregisterSlot } = this.props;\n\t\tthis.isUnmounted = true;\n\t\tunregisterSlot( this.props.name, this );\n\t}\n\n\tcomponentDidUpdate( prevProps: BaseSlotComponentProps ) {\n\t\tconst { name, unregisterSlot, registerSlot } = this.props;\n\n\t\tif ( prevProps.name !== name ) {\n\t\t\tunregisterSlot( prevProps.name, this );\n\t\t\tregisterSlot( name, this );\n\t\t}\n\t}\n\n\tforceUpdate() {\n\t\tif ( this.isUnmounted ) {\n\t\t\treturn;\n\t\t}\n\t\tsuper.forceUpdate();\n\t}\n\n\trender() {\n\t\tconst { children, name, fillProps = {}, getFills } = this.props;\n\t\tconst fills: ReactNode[] = ( getFills( name, this ) ?? [] )\n\t\t\t.map( ( fill ) => {\n\t\t\t\tconst fillChildren = isFunction( fill.children )\n\t\t\t\t\t? fill.children( fillProps )\n\t\t\t\t\t: fill.children;\n\t\t\t\treturn Children.map( fillChildren, ( child, childIndex ) => {\n\t\t\t\t\tif ( ! child || typeof child === 'string' ) {\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t}\n\t\t\t\t\tlet childKey: Key = childIndex;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof child === 'object' &&\n\t\t\t\t\t\t'key' in child &&\n\t\t\t\t\t\tchild?.key\n\t\t\t\t\t) {\n\t\t\t\t\t\tchildKey = child.key;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cloneElement( child as ReactElement, {\n\t\t\t\t\t\tkey: childKey,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} )\n\t\t\t.filter(\n\t\t\t\t// In some cases fills are rendered only when some conditions apply.\n\t\t\t\t// This ensures that we only use non-empty fills when rendering, i.e.,\n\t\t\t\t// it allows us to render wrappers only when the fills are actually present.\n\t\t\t\t( element ) => ! isEmptyElement( element )\n\t\t\t);\n\n\t\treturn <>{ isFunction( children ) ? children( fills ) : fills }</>;\n\t}\n}\n\nconst Slot = ( props: Omit< SlotComponentProps, 'bubblesVirtually' > ) => (\n\t<SlotFillContext.Consumer>\n\t\t{ ( { registerSlot, unregisterSlot, getFills } ) => (\n\t\t\t<SlotComponent\n\t\t\t\t{ ...props }\n\t\t\t\tregisterSlot={ registerSlot }\n\t\t\t\tunregisterSlot={ unregisterSlot }\n\t\t\t\tgetFills={ getFills }\n\t\t\t/>\n\t\t) }\n\t</SlotFillContext.Consumer>\n);\n\nexport default Slot;\n"],"mappings":";AAAA;AACA;AACA;;AAGA;AACA;AACA;AACA,SACCA,QAAQ,EACRC,SAAS,EACTC,YAAY,EACZC,cAAc,QACR,oBAAoB;;AAE3B;AACA;AACA;AACA,OAAOC,eAAe,MAAM,WAAW;AAGvC;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,UAAUA,CAAEC,SAAc,EAA0B;EAC5D,OAAO,OAAOA,SAAS,KAAK,UAAU;AACvC;AAEA,MAAMC,aAAa,SAASN,SAAS,CAA2B;EAG/DO,WAAWA,CAAEC,KAA6B,EAAG;IAC5C,KAAK,CAAEA,KAAM,CAAC;IAEd,IAAI,CAACC,WAAW,GAAG,KAAK;EACzB;EAEAC,iBAAiBA,CAAA,EAAG;IACnB,MAAM;MAAEC;IAAa,CAAC,GAAG,IAAI,CAACH,KAAK;IACnC,IAAI,CAACC,WAAW,GAAG,KAAK;IACxBE,YAAY,CAAE,IAAI,CAACH,KAAK,CAACI,IAAI,EAAE,IAAK,CAAC;EACtC;EAEAC,oBAAoBA,CAAA,EAAG;IACtB,MAAM;MAAEC;IAAe,CAAC,GAAG,IAAI,CAACN,KAAK;IACrC,IAAI,CAACC,WAAW,GAAG,IAAI;IACvBK,cAAc,CAAE,IAAI,CAACN,KAAK,CAACI,IAAI,EAAE,IAAK,CAAC;EACxC;EAEAG,kBAAkBA,CAAEC,SAAiC,EAAG;IACvD,MAAM;MAAEJ,IAAI;MAAEE,cAAc;MAAEH;IAAa,CAAC,GAAG,IAAI,CAACH,KAAK;IAEzD,IAAKQ,SAAS,CAACJ,IAAI,KAAKA,IAAI,EAAG;MAC9BE,cAAc,CAAEE,SAAS,CAACJ,IAAI,EAAE,IAAK,CAAC;MACtCD,YAAY,CAAEC,IAAI,EAAE,IAAK,CAAC;IAC3B;EACD;EAEAK,WAAWA,CAAA,EAAG;IACb,IAAK,IAAI,CAACR,WAAW,EAAG;MACvB;IACD;IACA,KAAK,CAACQ,WAAW,CAAC,CAAC;EACpB;EAEAC,MAAMA,CAAA,EAAG;IAAA,IAAAC,SAAA;IACR,MAAM;MAAEC,QAAQ;MAAER,IAAI;MAAES,SAAS,GAAG,CAAC,CAAC;MAAEC;IAAS,CAAC,GAAG,IAAI,CAACd,KAAK;IAC/D,MAAMe,KAAkB,GAAG,EAAAJ,SAAA,GAAEG,QAAQ,CAAEV,IAAI,EAAE,IAAK,CAAC,cAAAO,SAAA,cAAAA,SAAA,GAAI,EAAE,EACvDK,GAAG,CAAIC,IAAI,IAAM;MACjB,MAAMC,YAAY,GAAGtB,UAAU,CAAEqB,IAAI,CAACL,QAAS,CAAC,GAC7CK,IAAI,CAACL,QAAQ,CAAEC,SAAU,CAAC,GAC1BI,IAAI,CAACL,QAAQ;MAChB,OAAOrB,QAAQ,CAACyB,GAAG,CAAEE,YAAY,EAAE,CAAEC,KAAK,EAAEC,UAAU,KAAM;QAC3D,IAAK,CAAED,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAG;UAC3C,OAAOA,KAAK;QACb;QACA,IAAIE,QAAa,GAAGD,UAAU;QAC9B,IACC,OAAOD,KAAK,KAAK,QAAQ,IACzB,KAAK,IAAIA,KAAK,IACdA,KAAK,EAAEG,GAAG,EACT;UACDD,QAAQ,GAAGF,KAAK,CAACG,GAAG;QACrB;QAEA,OAAO7B,YAAY,CAAE0B,KAAK,EAAkB;UAC3CG,GAAG,EAAED;QACN,CAAE,CAAC;MACJ,CAAE,CAAC;IACJ,CAAE,CAAC,CACFE,MAAM;IACN;IACA;IACA;IACEC,OAAO,IAAM,CAAE9B,cAAc,CAAE8B,OAAQ,CAC1C,CAAC;IAEF,OAAOC,aAAA,CAAAC,QAAA,QAAI9B,UAAU,CAAEgB,QAAS,CAAC,GAAGA,QAAQ,CAAEG,KAAM,CAAC,GAAGA,KAAS,CAAC;EACnE;AACD;AAEA,MAAMY,IAAI,GAAK3B,KAAqD,IACnEyB,aAAA,CAAC9B,eAAe,CAACiC,QAAQ,QACtB,CAAE;EAAEzB,YAAY;EAAEG,cAAc;EAAEQ;AAAS,CAAC,KAC7CW,aAAA,CAAC3B,aAAa;EAAA,GACRE,KAAK;EACVG,YAAY,EAAGA,YAAc;EAC7BG,cAAc,EAAGA,cAAgB;EACjCQ,QAAQ,EAAGA;AAAU,CACrB,CAEuB,CAC1B;AAED,eAAea,IAAI"}