{"version":3,"names":["_data","require","_compose","_store","useBlockSelectionClearer","getSettings","hasSelectedBlock","hasMultiSelection","useSelect","blockEditorStore","clearSelectedBlock","useDispatch","clearBlockSelection","isEnabled","useRefEffect","node","onMouseDown","event","target","addEventListener","removeEventListener","BlockSelectionClearer","props","_react","createElement","ref"],"sources":["@wordpress/block-editor/src/components/block-selection-clearer/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Pass the returned ref callback to an element that should clear block\n * selection. Selection will only be cleared if the element is clicked directly,\n * not if a child element is clicked.\n *\n * @return {import('react').RefCallback} Ref callback.\n */\nexport function useBlockSelectionClearer() {\n\tconst { getSettings, hasSelectedBlock, hasMultiSelection } =\n\t\tuseSelect( blockEditorStore );\n\tconst { clearSelectedBlock } = useDispatch( blockEditorStore );\n\tconst { clearBlockSelection: isEnabled } = getSettings();\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onMouseDown( event ) {\n\t\t\t\tif ( ! hasSelectedBlock() && ! hasMultiSelection() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Only handle clicks on the element, not the children.\n\t\t\t\tif ( event.target !== node ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearSelectedBlock();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[ hasSelectedBlock, hasMultiSelection, clearSelectedBlock, isEnabled ]\n\t);\n}\n\nexport default function BlockSelectionClearer( props ) {\n\treturn <div ref={ useBlockSelectionClearer() } { ...props } />;\n}\n"],"mappings":";;;;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAKA,IAAAE,MAAA,GAAAF,OAAA;AATA;AACA;AACA;;AAIA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASG,wBAAwBA,CAAA,EAAG;EAC1C,MAAM;IAAEC,WAAW;IAAEC,gBAAgB;IAAEC;EAAkB,CAAC,GACzD,IAAAC,eAAS,EAAEC,YAAiB,CAAC;EAC9B,MAAM;IAAEC;EAAmB,CAAC,GAAG,IAAAC,iBAAW,EAAEF,YAAiB,CAAC;EAC9D,MAAM;IAAEG,mBAAmB,EAAEC;EAAU,CAAC,GAAGR,WAAW,CAAC,CAAC;EAExD,OAAO,IAAAS,qBAAY,EAChBC,IAAI,IAAM;IACX,IAAK,CAAEF,SAAS,EAAG;MAClB;IACD;IAEA,SAASG,WAAWA,CAAEC,KAAK,EAAG;MAC7B,IAAK,CAAEX,gBAAgB,CAAC,CAAC,IAAI,CAAEC,iBAAiB,CAAC,CAAC,EAAG;QACpD;MACD;;MAEA;MACA,IAAKU,KAAK,CAACC,MAAM,KAAKH,IAAI,EAAG;QAC5B;MACD;MAEAL,kBAAkB,CAAC,CAAC;IACrB;IAEAK,IAAI,CAACI,gBAAgB,CAAE,WAAW,EAAEH,WAAY,CAAC;IAEjD,OAAO,MAAM;MACZD,IAAI,CAACK,mBAAmB,CAAE,WAAW,EAAEJ,WAAY,CAAC;IACrD,CAAC;EACF,CAAC,EACD,CAAEV,gBAAgB,EAAEC,iBAAiB,EAAEG,kBAAkB,EAAEG,SAAS,CACrE,CAAC;AACF;AAEe,SAASQ,qBAAqBA,CAAEC,KAAK,EAAG;EACtD,OAAO,IAAAC,MAAA,CAAAC,aAAA;IAAKC,GAAG,EAAGrB,wBAAwB,CAAC,CAAG;IAAA,GAAMkB;EAAK,CAAI,CAAC;AAC/D"}