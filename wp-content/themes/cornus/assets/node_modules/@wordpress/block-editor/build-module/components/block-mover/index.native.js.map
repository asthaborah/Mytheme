{"version":3,"names":["Platform","__","Picker","ToolbarButton","ToolbarGroup","withInstanceId","compose","withSelect","withDispatch","useCallback","useEffect","useRef","useState","getMoversSetup","store","blockEditorStore","BLOCK_MOVER_DIRECTION_TOP","BLOCK_MOVER_DIRECTION_BOTTOM","BlockMover","isFirst","isLast","canMove","onMoveDown","onMoveUp","onLongMove","firstIndex","numberOfBlocks","rootClientId","isStackedHorizontally","pickerRef","shouldPresentPicker","setShouldPresentPicker","blockPageMoverState","setBlockPageMoverState","undefined","showBlockPageMover","direction","current","presentPicker","description","backwardButtonHint","forwardButtonHint","firstBlockTitle","lastBlockTitle","icon","backward","backwardButtonIcon","forward","forwardButtonIcon","title","backwardButtonTitle","forwardButtonTitle","blockPageMoverOptions","label","value","onSelect","filter","el","onPickerSelect","option","find","onLongPressMoveUp","onLongPressMoveDown","createElement","isDisabled","onClick","onLongPress","extraProps","hint","ref","options","onChange","leftAlign","hideCancelButton","OS","select","clientIds","getBlockIndex","canMoveBlocks","getBlockRootClientId","getBlockOrder","normalizedClientIds","Array","isArray","firstClientId","blockOrder","lastIndex","length","dispatch","moveBlocksDown","moveBlocksUp","moveBlocksToPosition","args","targetIndex"],"sources":["@wordpress/block-editor/src/components/block-mover/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Picker, ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { useCallback, useEffect, useRef, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getMoversSetup } from './mover-description';\nimport { store as blockEditorStore } from '../../store';\n\nexport const BLOCK_MOVER_DIRECTION_TOP = 'blockPageMoverOptions-moveToTop';\nexport const BLOCK_MOVER_DIRECTION_BOTTOM =\n\t'blockPageMoverOptions-moveToBottom';\n\nexport const BlockMover = ( {\n\tisFirst,\n\tisLast,\n\tcanMove,\n\tonMoveDown,\n\tonMoveUp,\n\tonLongMove,\n\tfirstIndex,\n\tnumberOfBlocks,\n\trootClientId,\n\tisStackedHorizontally,\n} ) => {\n\tconst pickerRef = useRef();\n\tconst [ shouldPresentPicker, setShouldPresentPicker ] = useState( false );\n\tconst [ blockPageMoverState, setBlockPageMoverState ] =\n\t\tuseState( undefined );\n\tconst showBlockPageMover = ( direction ) => () => {\n\t\tif ( ! pickerRef.current ) {\n\t\t\tsetBlockPageMoverState( undefined );\n\t\t\treturn;\n\t\t}\n\n\t\tsetBlockPageMoverState( direction );\n\t\tsetShouldPresentPicker( true );\n\t};\n\n\t// Ensure that the picker is only presented after state updates.\n\tuseEffect( () => {\n\t\tif ( shouldPresentPicker ) {\n\t\t\tpickerRef.current?.presentPicker();\n\t\t\tsetShouldPresentPicker( false );\n\t\t}\n\t}, [ shouldPresentPicker ] );\n\n\tconst {\n\t\tdescription: {\n\t\t\tbackwardButtonHint,\n\t\t\tforwardButtonHint,\n\t\t\tfirstBlockTitle,\n\t\t\tlastBlockTitle,\n\t\t},\n\t\ticon: { backward: backwardButtonIcon, forward: forwardButtonIcon },\n\t\ttitle: { backward: backwardButtonTitle, forward: forwardButtonTitle },\n\t} = getMoversSetup( isStackedHorizontally, { firstIndex } );\n\n\tconst blockPageMoverOptions = [\n\t\t{\n\t\t\ticon: backwardButtonIcon,\n\t\t\tlabel: __( 'Move to top' ),\n\t\t\tvalue: BLOCK_MOVER_DIRECTION_TOP,\n\t\t\tonSelect: () => {\n\t\t\t\tonLongMove()( 0 );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ticon: forwardButtonIcon,\n\t\t\tlabel: __( 'Move to bottom' ),\n\t\t\tvalue: BLOCK_MOVER_DIRECTION_BOTTOM,\n\t\t\tonSelect: () => {\n\t\t\t\tonLongMove()( numberOfBlocks );\n\t\t\t},\n\t\t},\n\t].filter( ( el ) => el.value === blockPageMoverState );\n\n\tconst onPickerSelect = ( value ) => {\n\t\tconst option = blockPageMoverOptions.find(\n\t\t\t( el ) => el.value === value\n\t\t);\n\t\tif ( option && option.onSelect ) option.onSelect();\n\t};\n\n\tconst onLongPressMoveUp = useCallback(\n\t\tshowBlockPageMover( BLOCK_MOVER_DIRECTION_TOP ),\n\t\t[]\n\t);\n\tconst onLongPressMoveDown = useCallback(\n\t\tshowBlockPageMover( BLOCK_MOVER_DIRECTION_BOTTOM ),\n\t\t[]\n\t);\n\n\tif ( ! canMove || ( isFirst && isLast && ! rootClientId ) ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ ! isFirst ? backwardButtonTitle : firstBlockTitle }\n\t\t\t\tisDisabled={ isFirst }\n\t\t\t\tonClick={ onMoveUp }\n\t\t\t\tonLongPress={ onLongPressMoveUp }\n\t\t\t\ticon={ backwardButtonIcon }\n\t\t\t\textraProps={ { hint: backwardButtonHint } }\n\t\t\t/>\n\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ ! isLast ? forwardButtonTitle : lastBlockTitle }\n\t\t\t\tisDisabled={ isLast }\n\t\t\t\tonClick={ onMoveDown }\n\t\t\t\tonLongPress={ onLongPressMoveDown }\n\t\t\t\ticon={ forwardButtonIcon }\n\t\t\t\textraProps={ {\n\t\t\t\t\thint: forwardButtonHint,\n\t\t\t\t} }\n\t\t\t/>\n\n\t\t\t<Picker\n\t\t\t\tref={ pickerRef }\n\t\t\t\toptions={ blockPageMoverOptions }\n\t\t\t\tonChange={ onPickerSelect }\n\t\t\t\ttitle={ __( 'Change block position' ) }\n\t\t\t\tleftAlign\n\t\t\t\thideCancelButton={ Platform.OS !== 'ios' }\n\t\t\t/>\n\t\t</ToolbarGroup>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select, { clientIds } ) => {\n\t\tconst {\n\t\t\tgetBlockIndex,\n\t\t\tcanMoveBlocks,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockOrder,\n\t\t} = select( blockEditorStore );\n\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t? clientIds\n\t\t\t: [ clientIds ];\n\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\tconst rootClientId = getBlockRootClientId( firstClientId );\n\t\tconst blockOrder = getBlockOrder( rootClientId );\n\t\tconst firstIndex = getBlockIndex( firstClientId );\n\t\tconst lastIndex = getBlockIndex(\n\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t);\n\n\t\treturn {\n\t\t\tfirstIndex,\n\t\t\tnumberOfBlocks: blockOrder.length - 1,\n\t\t\tisFirst: firstIndex === 0,\n\t\t\tisLast: lastIndex === blockOrder.length - 1,\n\t\t\tcanMove: canMoveBlocks( clientIds, rootClientId ),\n\t\t\trootClientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientIds, rootClientId } ) => {\n\t\tconst { moveBlocksDown, moveBlocksUp, moveBlocksToPosition } =\n\t\t\tdispatch( blockEditorStore );\n\t\treturn {\n\t\t\tonMoveDown: ( ...args ) =>\n\t\t\t\tmoveBlocksDown( clientIds, rootClientId, ...args ),\n\t\t\tonMoveUp: ( ...args ) =>\n\t\t\t\tmoveBlocksUp( clientIds, rootClientId, ...args ),\n\t\t\tonLongMove:\n\t\t\t\t( targetIndex ) =>\n\t\t\t\t( ...args ) =>\n\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\tclientIds,\n\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\ttargetIndex,\n\t\t\t\t\t\t...args\n\t\t\t\t\t),\n\t\t};\n\t} ),\n\twithInstanceId\n)( BlockMover );\n"],"mappings":"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"}