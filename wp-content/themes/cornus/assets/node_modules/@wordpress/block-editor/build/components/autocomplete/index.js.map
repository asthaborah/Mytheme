{"version":3,"names":["_hooks","require","_components","_element","_blocks","_context","_block","_interopRequireDefault","_link","EMPTY_ARRAY","useCompleters","completers","name","useBlockEditContext","useMemo","filteredCompleters","linkAutocompleter","getDefaultBlockName","getBlockSupport","blockAutocompleter","hasFilter","map","completer","applyFilters","useBlockEditorAutocompleteProps","props","useAutocompleteProps","BlockEditorAutocomplete","_react","createElement","Autocomplete","_default","exports","default"],"sources":["@wordpress/block-editor/src/components/autocomplete/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\nimport {\n\tAutocomplete,\n\t__unstableUseAutocompleteProps as useAutocompleteProps,\n} from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { getDefaultBlockName, getBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\nimport blockAutocompleter from '../../autocompleters/block';\nimport linkAutocompleter from '../../autocompleters/link';\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nfunction useCompleters( { completers = EMPTY_ARRAY } ) {\n\tconst { name } = useBlockEditContext();\n\treturn useMemo( () => {\n\t\tlet filteredCompleters = [ ...completers, linkAutocompleter ];\n\n\t\tif (\n\t\t\tname === getDefaultBlockName() ||\n\t\t\tgetBlockSupport( name, '__experimentalSlashInserter', false )\n\t\t) {\n\t\t\tfilteredCompleters = [ ...filteredCompleters, blockAutocompleter ];\n\t\t}\n\n\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\n\t\t\t// Provide copies so filters may directly modify them.\n\t\t\tif ( filteredCompleters === completers ) {\n\t\t\t\tfilteredCompleters = filteredCompleters.map(\n\t\t\t\t\t( completer ) => ( { ...completer } )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfilteredCompleters = applyFilters(\n\t\t\t\t'editor.Autocomplete.completers',\n\t\t\t\tfilteredCompleters,\n\t\t\t\tname\n\t\t\t);\n\t\t}\n\n\t\treturn filteredCompleters;\n\t}, [ completers, name ] );\n}\n\nexport function useBlockEditorAutocompleteProps( props ) {\n\treturn useAutocompleteProps( {\n\t\t...props,\n\t\tcompleters: useCompleters( props ),\n\t} );\n}\n\n/**\n * Wrap the default Autocomplete component with one that supports a filter hook\n * for customizing its list of autocompleters.\n *\n * @type {import('react').FC}\n */\nfunction BlockEditorAutocomplete( props ) {\n\treturn <Autocomplete { ...props } completers={ useCompleters( props ) } />;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/autocomplete/README.md\n */\nexport default BlockEditorAutocomplete;\n"],"mappings":";;;;;;;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AAIA,IAAAE,QAAA,GAAAF,OAAA;AACA,IAAAG,OAAA,GAAAH,OAAA;AAKA,IAAAI,QAAA,GAAAJ,OAAA;AACA,IAAAK,MAAA,GAAAC,sBAAA,CAAAN,OAAA;AACA,IAAAO,KAAA,GAAAD,sBAAA,CAAAN,OAAA;AAhBA;AACA;AACA;;AASA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMQ,WAAW,GAAG,EAAE;AAEtB,SAASC,aAAaA,CAAE;EAAEC,UAAU,GAAGF;AAAY,CAAC,EAAG;EACtD,MAAM;IAAEG;EAAK,CAAC,GAAG,IAAAC,4BAAmB,EAAC,CAAC;EACtC,OAAO,IAAAC,gBAAO,EAAE,MAAM;IACrB,IAAIC,kBAAkB,GAAG,CAAE,GAAGJ,UAAU,EAAEK,aAAiB,CAAE;IAE7D,IACCJ,IAAI,KAAK,IAAAK,2BAAmB,EAAC,CAAC,IAC9B,IAAAC,uBAAe,EAAEN,IAAI,EAAE,6BAA6B,EAAE,KAAM,CAAC,EAC5D;MACDG,kBAAkB,GAAG,CAAE,GAAGA,kBAAkB,EAAEI,cAAkB,CAAE;IACnE;IAEA,IAAK,IAAAC,gBAAS,EAAE,gCAAiC,CAAC,EAAG;MACpD;MACA,IAAKL,kBAAkB,KAAKJ,UAAU,EAAG;QACxCI,kBAAkB,GAAGA,kBAAkB,CAACM,GAAG,CACxCC,SAAS,KAAQ;UAAE,GAAGA;QAAU,CAAC,CACpC,CAAC;MACF;MAEAP,kBAAkB,GAAG,IAAAQ,mBAAY,EAChC,gCAAgC,EAChCR,kBAAkB,EAClBH,IACD,CAAC;IACF;IAEA,OAAOG,kBAAkB;EAC1B,CAAC,EAAE,CAAEJ,UAAU,EAAEC,IAAI,CAAG,CAAC;AAC1B;AAEO,SAASY,+BAA+BA,CAAEC,KAAK,EAAG;EACxD,OAAO,IAAAC,0CAAoB,EAAE;IAC5B,GAAGD,KAAK;IACRd,UAAU,EAAED,aAAa,CAAEe,KAAM;EAClC,CAAE,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAASE,uBAAuBA,CAAEF,KAAK,EAAG;EACzC,OAAO,IAAAG,MAAA,CAAAC,aAAA,EAAC3B,WAAA,CAAA4B,YAAY;IAAA,GAAML,KAAK;IAAGd,UAAU,EAAGD,aAAa,CAAEe,KAAM;EAAG,CAAE,CAAC;AAC3E;;AAEA;AACA;AACA;AAFA,IAAAM,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAGeN,uBAAuB"}