{"version":3,"names":["RawHTML","StrictMode","Fragment","getSaveElement","__unstableGetBlockProps","getBlockProps","RichTextData","InnerBlocks","Content","addValuesForElement","element","values","innerBlocks","undefined","Array","isArray","addValuesForElements","type","props","children","addValuesForBlocks","push","value","el","prototype","render","args","i","length","blocks","name","attributes","saveElement","createElement","getRichTextValues","skipFilters","map","fromHTMLString"],"sources":["@wordpress/block-editor/src/components/rich-text/get-rich-text-values.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { RawHTML, StrictMode, Fragment } from '@wordpress/element';\nimport {\n\tgetSaveElement,\n\t__unstableGetBlockProps as getBlockProps,\n} from '@wordpress/blocks';\nimport { RichTextData } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport InnerBlocks from '../inner-blocks';\nimport { Content } from './content';\n\n/*\n * This function is similar to `@wordpress/element`'s `renderToString` function,\n * except that it does not render the elements to a string, but instead collects\n * the values of all rich text `Content` elements.\n */\nfunction addValuesForElement( element, values, innerBlocks ) {\n\tif ( null === element || undefined === element || false === element ) {\n\t\treturn;\n\t}\n\n\tif ( Array.isArray( element ) ) {\n\t\treturn addValuesForElements( element, values, innerBlocks );\n\t}\n\n\tswitch ( typeof element ) {\n\t\tcase 'string':\n\t\tcase 'number':\n\t\t\treturn;\n\t}\n\n\tconst { type, props } = element;\n\n\tswitch ( type ) {\n\t\tcase StrictMode:\n\t\tcase Fragment:\n\t\t\treturn addValuesForElements( props.children, values, innerBlocks );\n\t\tcase RawHTML:\n\t\t\treturn;\n\t\tcase InnerBlocks.Content:\n\t\t\treturn addValuesForBlocks( values, innerBlocks );\n\t\tcase Content:\n\t\t\tvalues.push( props.value );\n\t\t\treturn;\n\t}\n\n\tswitch ( typeof type ) {\n\t\tcase 'string':\n\t\t\tif ( typeof props.children !== 'undefined' ) {\n\t\t\t\treturn addValuesForElements(\n\t\t\t\t\tprops.children,\n\t\t\t\t\tvalues,\n\t\t\t\t\tinnerBlocks\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn;\n\t\tcase 'function':\n\t\t\tconst el =\n\t\t\t\ttype.prototype && typeof type.prototype.render === 'function'\n\t\t\t\t\t? new type( props ).render()\n\t\t\t\t\t: type( props );\n\t\t\treturn addValuesForElement( el, values, innerBlocks );\n\t}\n}\n\nfunction addValuesForElements( children, ...args ) {\n\tchildren = Array.isArray( children ) ? children : [ children ];\n\n\tfor ( let i = 0; i < children.length; i++ ) {\n\t\taddValuesForElement( children[ i ], ...args );\n\t}\n}\n\nfunction addValuesForBlocks( values, blocks ) {\n\tfor ( let i = 0; i < blocks.length; i++ ) {\n\t\tconst { name, attributes, innerBlocks } = blocks[ i ];\n\t\tconst saveElement = getSaveElement(\n\t\t\tname,\n\t\t\tattributes,\n\t\t\t// Instead of letting save elements use `useInnerBlocksProps.save`,\n\t\t\t// force them to use InnerBlocks.Content instead so we can intercept\n\t\t\t// a single component.\n\t\t\t<InnerBlocks.Content />\n\t\t);\n\t\taddValuesForElement( saveElement, values, innerBlocks );\n\t}\n}\n\nexport function getRichTextValues( blocks = [] ) {\n\tgetBlockProps.skipFilters = true;\n\tconst values = [];\n\taddValuesForBlocks( values, blocks );\n\tgetBlockProps.skipFilters = false;\n\treturn values.map( ( value ) =>\n\t\tvalue instanceof RichTextData\n\t\t\t? value\n\t\t\t: RichTextData.fromHTMLString( value )\n\t);\n}\n"],"mappings":"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"}