{"version":3,"names":["_element","require","_blocks","_richText","_innerBlocks","_interopRequireDefault","_content","addValuesForElement","element","values","innerBlocks","undefined","Array","isArray","addValuesForElements","type","props","StrictMode","Fragment","children","RawHTML","InnerBlocks","Content","addValuesForBlocks","push","value","el","prototype","render","args","i","length","blocks","name","attributes","saveElement","getSaveElement","_react","createElement","default","getRichTextValues","getBlockProps","skipFilters","map","RichTextData","fromHTMLString"],"sources":["@wordpress/block-editor/src/components/rich-text/get-rich-text-values.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { RawHTML, StrictMode, Fragment } from '@wordpress/element';\nimport {\n\tgetSaveElement,\n\t__unstableGetBlockProps as getBlockProps,\n} from '@wordpress/blocks';\nimport { RichTextData } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport InnerBlocks from '../inner-blocks';\nimport { Content } from './content';\n\n/*\n * This function is similar to `@wordpress/element`'s `renderToString` function,\n * except that it does not render the elements to a string, but instead collects\n * the values of all rich text `Content` elements.\n */\nfunction addValuesForElement( element, values, innerBlocks ) {\n\tif ( null === element || undefined === element || false === element ) {\n\t\treturn;\n\t}\n\n\tif ( Array.isArray( element ) ) {\n\t\treturn addValuesForElements( element, values, innerBlocks );\n\t}\n\n\tswitch ( typeof element ) {\n\t\tcase 'string':\n\t\tcase 'number':\n\t\t\treturn;\n\t}\n\n\tconst { type, props } = element;\n\n\tswitch ( type ) {\n\t\tcase StrictMode:\n\t\tcase Fragment:\n\t\t\treturn addValuesForElements( props.children, values, innerBlocks );\n\t\tcase RawHTML:\n\t\t\treturn;\n\t\tcase InnerBlocks.Content:\n\t\t\treturn addValuesForBlocks( values, innerBlocks );\n\t\tcase Content:\n\t\t\tvalues.push( props.value );\n\t\t\treturn;\n\t}\n\n\tswitch ( typeof type ) {\n\t\tcase 'string':\n\t\t\tif ( typeof props.children !== 'undefined' ) {\n\t\t\t\treturn addValuesForElements(\n\t\t\t\t\tprops.children,\n\t\t\t\t\tvalues,\n\t\t\t\t\tinnerBlocks\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn;\n\t\tcase 'function':\n\t\t\tconst el =\n\t\t\t\ttype.prototype && typeof type.prototype.render === 'function'\n\t\t\t\t\t? new type( props ).render()\n\t\t\t\t\t: type( props );\n\t\t\treturn addValuesForElement( el, values, innerBlocks );\n\t}\n}\n\nfunction addValuesForElements( children, ...args ) {\n\tchildren = Array.isArray( children ) ? children : [ children ];\n\n\tfor ( let i = 0; i < children.length; i++ ) {\n\t\taddValuesForElement( children[ i ], ...args );\n\t}\n}\n\nfunction addValuesForBlocks( values, blocks ) {\n\tfor ( let i = 0; i < blocks.length; i++ ) {\n\t\tconst { name, attributes, innerBlocks } = blocks[ i ];\n\t\tconst saveElement = getSaveElement(\n\t\t\tname,\n\t\t\tattributes,\n\t\t\t// Instead of letting save elements use `useInnerBlocksProps.save`,\n\t\t\t// force them to use InnerBlocks.Content instead so we can intercept\n\t\t\t// a single component.\n\t\t\t<InnerBlocks.Content />\n\t\t);\n\t\taddValuesForElement( saveElement, values, innerBlocks );\n\t}\n}\n\nexport function getRichTextValues( blocks = [] ) {\n\tgetBlockProps.skipFilters = true;\n\tconst values = [];\n\taddValuesForBlocks( values, blocks );\n\tgetBlockProps.skipFilters = false;\n\treturn values.map( ( value ) =>\n\t\tvalue instanceof RichTextData\n\t\t\t? value\n\t\t\t: RichTextData.fromHTMLString( value )\n\t);\n}\n"],"mappings":";;;;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAIA,IAAAE,SAAA,GAAAF,OAAA;AAKA,IAAAG,YAAA,GAAAC,sBAAA,CAAAJ,OAAA;AACA,IAAAK,QAAA,GAAAL,OAAA;AAdA;AACA;AACA;;AAQA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA,SAASM,mBAAmBA,CAAEC,OAAO,EAAEC,MAAM,EAAEC,WAAW,EAAG;EAC5D,IAAK,IAAI,KAAKF,OAAO,IAAIG,SAAS,KAAKH,OAAO,IAAI,KAAK,KAAKA,OAAO,EAAG;IACrE;EACD;EAEA,IAAKI,KAAK,CAACC,OAAO,CAAEL,OAAQ,CAAC,EAAG;IAC/B,OAAOM,oBAAoB,CAAEN,OAAO,EAAEC,MAAM,EAAEC,WAAY,CAAC;EAC5D;EAEA,QAAS,OAAOF,OAAO;IACtB,KAAK,QAAQ;IACb,KAAK,QAAQ;MACZ;EACF;EAEA,MAAM;IAAEO,IAAI;IAAEC;EAAM,CAAC,GAAGR,OAAO;EAE/B,QAASO,IAAI;IACZ,KAAKE,mBAAU;IACf,KAAKC,iBAAQ;MACZ,OAAOJ,oBAAoB,CAAEE,KAAK,CAACG,QAAQ,EAAEV,MAAM,EAAEC,WAAY,CAAC;IACnE,KAAKU,gBAAO;MACX;IACD,KAAKC,oBAAW,CAACC,OAAO;MACvB,OAAOC,kBAAkB,CAAEd,MAAM,EAAEC,WAAY,CAAC;IACjD,KAAKY,gBAAO;MACXb,MAAM,CAACe,IAAI,CAAER,KAAK,CAACS,KAAM,CAAC;MAC1B;EACF;EAEA,QAAS,OAAOV,IAAI;IACnB,KAAK,QAAQ;MACZ,IAAK,OAAOC,KAAK,CAACG,QAAQ,KAAK,WAAW,EAAG;QAC5C,OAAOL,oBAAoB,CAC1BE,KAAK,CAACG,QAAQ,EACdV,MAAM,EACNC,WACD,CAAC;MACF;MACA;IACD,KAAK,UAAU;MACd,MAAMgB,EAAE,GACPX,IAAI,CAACY,SAAS,IAAI,OAAOZ,IAAI,CAACY,SAAS,CAACC,MAAM,KAAK,UAAU,GAC1D,IAAIb,IAAI,CAAEC,KAAM,CAAC,CAACY,MAAM,CAAC,CAAC,GAC1Bb,IAAI,CAAEC,KAAM,CAAC;MACjB,OAAOT,mBAAmB,CAAEmB,EAAE,EAAEjB,MAAM,EAAEC,WAAY,CAAC;EACvD;AACD;AAEA,SAASI,oBAAoBA,CAAEK,QAAQ,EAAE,GAAGU,IAAI,EAAG;EAClDV,QAAQ,GAAGP,KAAK,CAACC,OAAO,CAAEM,QAAS,CAAC,GAAGA,QAAQ,GAAG,CAAEA,QAAQ,CAAE;EAE9D,KAAM,IAAIW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,QAAQ,CAACY,MAAM,EAAED,CAAC,EAAE,EAAG;IAC3CvB,mBAAmB,CAAEY,QAAQ,CAAEW,CAAC,CAAE,EAAE,GAAGD,IAAK,CAAC;EAC9C;AACD;AAEA,SAASN,kBAAkBA,CAAEd,MAAM,EAAEuB,MAAM,EAAG;EAC7C,KAAM,IAAIF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,MAAM,CAACD,MAAM,EAAED,CAAC,EAAE,EAAG;IACzC,MAAM;MAAEG,IAAI;MAAEC,UAAU;MAAExB;IAAY,CAAC,GAAGsB,MAAM,CAAEF,CAAC,CAAE;IACrD,MAAMK,WAAW,GAAG,IAAAC,sBAAc,EACjCH,IAAI,EACJC,UAAU;IACV;IACA;IACA;IACA,IAAAG,MAAA,CAAAC,aAAA,EAAClC,YAAA,CAAAmC,OAAW,CAACjB,OAAO,MAAE,CACvB,CAAC;IACDf,mBAAmB,CAAE4B,WAAW,EAAE1B,MAAM,EAAEC,WAAY,CAAC;EACxD;AACD;AAEO,SAAS8B,iBAAiBA,CAAER,MAAM,GAAG,EAAE,EAAG;EAChDS,+BAAa,CAACC,WAAW,GAAG,IAAI;EAChC,MAAMjC,MAAM,GAAG,EAAE;EACjBc,kBAAkB,CAAEd,MAAM,EAAEuB,MAAO,CAAC;EACpCS,+BAAa,CAACC,WAAW,GAAG,KAAK;EACjC,OAAOjC,MAAM,CAACkC,GAAG,CAAIlB,KAAK,IACzBA,KAAK,YAAYmB,sBAAY,GAC1BnB,KAAK,GACLmB,sBAAY,CAACC,cAAc,CAAEpB,KAAM,CACvC,CAAC;AACF"}