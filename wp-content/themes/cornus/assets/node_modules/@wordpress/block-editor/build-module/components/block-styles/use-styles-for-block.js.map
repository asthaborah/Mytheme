{"version":3,"names":["useDispatch","useSelect","cloneBlock","getBlockType","getBlockFromExample","store","blocksStore","useMemo","getActiveStyle","getRenderedStyles","replaceActiveStyle","blockEditorStore","useGenericPreviewBlock","block","type","example","blockName","name","attributes","innerBlocks","useStylesForBlocks","clientId","onSwitch","selector","select","getBlock","blockType","getBlockStyles","styles","className","updateBlockAttributes","stylesToRender","activeStyle","genericPreviewBlock","onSelect","style","styleClassName"],"sources":["@wordpress/block-editor/src/components/block-styles/use-styles-for-block.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tcloneBlock,\n\tgetBlockType,\n\tgetBlockFromExample,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getActiveStyle, getRenderedStyles, replaceActiveStyle } from './utils';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n *\n * @param {WPBlock}     block Block object.\n * @param {WPBlockType} type  Block type settings.\n * @return {WPBlock}          A generic block ready for styles preview.\n */\nfunction useGenericPreviewBlock( block, type ) {\n\treturn useMemo( () => {\n\t\tconst example = type?.example;\n\t\tconst blockName = type?.name;\n\n\t\tif ( example && blockName ) {\n\t\t\treturn getBlockFromExample( blockName, {\n\t\t\t\tattributes: example.attributes,\n\t\t\t\tinnerBlocks: example.innerBlocks,\n\t\t\t} );\n\t\t}\n\n\t\tif ( block ) {\n\t\t\treturn cloneBlock( block );\n\t\t}\n\t}, [ type?.example ? block?.name : block, type ] );\n}\n\n/**\n * @typedef useStylesForBlocksArguments\n * @property {string}     clientId Block client ID.\n * @property {() => void} onSwitch Block style switch callback function.\n */\n\n/**\n *\n * @param {useStylesForBlocksArguments} useStylesForBlocks arguments.\n * @return {Object}                                         Results of the select methods.\n */\nexport default function useStylesForBlocks( { clientId, onSwitch } ) {\n\tconst selector = ( select ) => {\n\t\tconst { getBlock } = select( blockEditorStore );\n\t\tconst block = getBlock( clientId );\n\n\t\tif ( ! block ) {\n\t\t\treturn {};\n\t\t}\n\t\tconst blockType = getBlockType( block.name );\n\t\tconst { getBlockStyles } = select( blocksStore );\n\n\t\treturn {\n\t\t\tblock,\n\t\t\tblockType,\n\t\t\tstyles: getBlockStyles( block.name ),\n\t\t\tclassName: block.attributes.className || '',\n\t\t};\n\t};\n\tconst { styles, block, blockType, className } = useSelect( selector, [\n\t\tclientId,\n\t] );\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst stylesToRender = getRenderedStyles( styles );\n\tconst activeStyle = getActiveStyle( stylesToRender, className );\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, blockType );\n\n\tconst onSelect = ( style ) => {\n\t\tconst styleClassName = replaceActiveStyle(\n\t\t\tclassName,\n\t\t\tactiveStyle,\n\t\t\tstyle\n\t\t);\n\t\tupdateBlockAttributes( clientId, {\n\t\t\tclassName: styleClassName,\n\t\t} );\n\t\tonSwitch();\n\t};\n\n\treturn {\n\t\tonSelect,\n\t\tstylesToRender,\n\t\tactiveStyle,\n\t\tgenericPreviewBlock,\n\t\tclassName,\n\t};\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;AACxD,SACCC,UAAU,EACVC,YAAY,EACZC,mBAAmB,EACnBC,KAAK,IAAIC,WAAW,QACd,mBAAmB;AAC1B,SAASC,OAAO,QAAQ,oBAAoB;;AAE5C;AACA;AACA;AACA,SAASC,cAAc,EAAEC,iBAAiB,EAAEC,kBAAkB,QAAQ,SAAS;AAC/E,SAASL,KAAK,IAAIM,gBAAgB,QAAQ,aAAa;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,sBAAsBA,CAAEC,KAAK,EAAEC,IAAI,EAAG;EAC9C,OAAOP,OAAO,CAAE,MAAM;IACrB,MAAMQ,OAAO,GAAGD,IAAI,EAAEC,OAAO;IAC7B,MAAMC,SAAS,GAAGF,IAAI,EAAEG,IAAI;IAE5B,IAAKF,OAAO,IAAIC,SAAS,EAAG;MAC3B,OAAOZ,mBAAmB,CAAEY,SAAS,EAAE;QACtCE,UAAU,EAAEH,OAAO,CAACG,UAAU;QAC9BC,WAAW,EAAEJ,OAAO,CAACI;MACtB,CAAE,CAAC;IACJ;IAEA,IAAKN,KAAK,EAAG;MACZ,OAAOX,UAAU,CAAEW,KAAM,CAAC;IAC3B;EACD,CAAC,EAAE,CAAEC,IAAI,EAAEC,OAAO,GAAGF,KAAK,EAAEI,IAAI,GAAGJ,KAAK,EAAEC,IAAI,CAAG,CAAC;AACnD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASM,kBAAkBA,CAAE;EAAEC,QAAQ;EAAEC;AAAS,CAAC,EAAG;EACpE,MAAMC,QAAQ,GAAKC,MAAM,IAAM;IAC9B,MAAM;MAAEC;IAAS,CAAC,GAAGD,MAAM,CAAEb,gBAAiB,CAAC;IAC/C,MAAME,KAAK,GAAGY,QAAQ,CAAEJ,QAAS,CAAC;IAElC,IAAK,CAAER,KAAK,EAAG;MACd,OAAO,CAAC,CAAC;IACV;IACA,MAAMa,SAAS,GAAGvB,YAAY,CAAEU,KAAK,CAACI,IAAK,CAAC;IAC5C,MAAM;MAAEU;IAAe,CAAC,GAAGH,MAAM,CAAElB,WAAY,CAAC;IAEhD,OAAO;MACNO,KAAK;MACLa,SAAS;MACTE,MAAM,EAAED,cAAc,CAAEd,KAAK,CAACI,IAAK,CAAC;MACpCY,SAAS,EAAEhB,KAAK,CAACK,UAAU,CAACW,SAAS,IAAI;IAC1C,CAAC;EACF,CAAC;EACD,MAAM;IAAED,MAAM;IAAEf,KAAK;IAAEa,SAAS;IAAEG;EAAU,CAAC,GAAG5B,SAAS,CAAEsB,QAAQ,EAAE,CACpEF,QAAQ,CACP,CAAC;EACH,MAAM;IAAES;EAAsB,CAAC,GAAG9B,WAAW,CAAEW,gBAAiB,CAAC;EACjE,MAAMoB,cAAc,GAAGtB,iBAAiB,CAAEmB,MAAO,CAAC;EAClD,MAAMI,WAAW,GAAGxB,cAAc,CAAEuB,cAAc,EAAEF,SAAU,CAAC;EAC/D,MAAMI,mBAAmB,GAAGrB,sBAAsB,CAAEC,KAAK,EAAEa,SAAU,CAAC;EAEtE,MAAMQ,QAAQ,GAAKC,KAAK,IAAM;IAC7B,MAAMC,cAAc,GAAG1B,kBAAkB,CACxCmB,SAAS,EACTG,WAAW,EACXG,KACD,CAAC;IACDL,qBAAqB,CAAET,QAAQ,EAAE;MAChCQ,SAAS,EAAEO;IACZ,CAAE,CAAC;IACHd,QAAQ,CAAC,CAAC;EACX,CAAC;EAED,OAAO;IACNY,QAAQ;IACRH,cAAc;IACdC,WAAW;IACXC,mBAAmB;IACnBJ;EACD,CAAC;AACF"}