{"version":3,"names":["_reactNative","require","_i18n","_components","_compose","_data","_element","_moverDescription","_store","BLOCK_MOVER_DIRECTION_TOP","exports","BLOCK_MOVER_DIRECTION_BOTTOM","BlockMover","isFirst","isLast","canMove","onMoveDown","onMoveUp","onLongMove","firstIndex","numberOfBlocks","rootClientId","isStackedHorizontally","pickerRef","useRef","shouldPresentPicker","setShouldPresentPicker","useState","blockPageMoverState","setBlockPageMoverState","undefined","showBlockPageMover","direction","current","useEffect","presentPicker","description","backwardButtonHint","forwardButtonHint","firstBlockTitle","lastBlockTitle","icon","backward","backwardButtonIcon","forward","forwardButtonIcon","title","backwardButtonTitle","forwardButtonTitle","getMoversSetup","blockPageMoverOptions","label","__","value","onSelect","filter","el","onPickerSelect","option","find","onLongPressMoveUp","useCallback","onLongPressMoveDown","_react","createElement","ToolbarGroup","ToolbarButton","isDisabled","onClick","onLongPress","extraProps","hint","Picker","ref","options","onChange","leftAlign","hideCancelButton","Platform","OS","_default","default","compose","withSelect","select","clientIds","getBlockIndex","canMoveBlocks","getBlockRootClientId","getBlockOrder","blockEditorStore","normalizedClientIds","Array","isArray","firstClientId","blockOrder","lastIndex","length","withDispatch","dispatch","moveBlocksDown","moveBlocksUp","moveBlocksToPosition","args","targetIndex","withInstanceId"],"sources":["@wordpress/block-editor/src/components/block-mover/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Picker, ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { useCallback, useEffect, useRef, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getMoversSetup } from './mover-description';\nimport { store as blockEditorStore } from '../../store';\n\nexport const BLOCK_MOVER_DIRECTION_TOP = 'blockPageMoverOptions-moveToTop';\nexport const BLOCK_MOVER_DIRECTION_BOTTOM =\n\t'blockPageMoverOptions-moveToBottom';\n\nexport const BlockMover = ( {\n\tisFirst,\n\tisLast,\n\tcanMove,\n\tonMoveDown,\n\tonMoveUp,\n\tonLongMove,\n\tfirstIndex,\n\tnumberOfBlocks,\n\trootClientId,\n\tisStackedHorizontally,\n} ) => {\n\tconst pickerRef = useRef();\n\tconst [ shouldPresentPicker, setShouldPresentPicker ] = useState( false );\n\tconst [ blockPageMoverState, setBlockPageMoverState ] =\n\t\tuseState( undefined );\n\tconst showBlockPageMover = ( direction ) => () => {\n\t\tif ( ! pickerRef.current ) {\n\t\t\tsetBlockPageMoverState( undefined );\n\t\t\treturn;\n\t\t}\n\n\t\tsetBlockPageMoverState( direction );\n\t\tsetShouldPresentPicker( true );\n\t};\n\n\t// Ensure that the picker is only presented after state updates.\n\tuseEffect( () => {\n\t\tif ( shouldPresentPicker ) {\n\t\t\tpickerRef.current?.presentPicker();\n\t\t\tsetShouldPresentPicker( false );\n\t\t}\n\t}, [ shouldPresentPicker ] );\n\n\tconst {\n\t\tdescription: {\n\t\t\tbackwardButtonHint,\n\t\t\tforwardButtonHint,\n\t\t\tfirstBlockTitle,\n\t\t\tlastBlockTitle,\n\t\t},\n\t\ticon: { backward: backwardButtonIcon, forward: forwardButtonIcon },\n\t\ttitle: { backward: backwardButtonTitle, forward: forwardButtonTitle },\n\t} = getMoversSetup( isStackedHorizontally, { firstIndex } );\n\n\tconst blockPageMoverOptions = [\n\t\t{\n\t\t\ticon: backwardButtonIcon,\n\t\t\tlabel: __( 'Move to top' ),\n\t\t\tvalue: BLOCK_MOVER_DIRECTION_TOP,\n\t\t\tonSelect: () => {\n\t\t\t\tonLongMove()( 0 );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ticon: forwardButtonIcon,\n\t\t\tlabel: __( 'Move to bottom' ),\n\t\t\tvalue: BLOCK_MOVER_DIRECTION_BOTTOM,\n\t\t\tonSelect: () => {\n\t\t\t\tonLongMove()( numberOfBlocks );\n\t\t\t},\n\t\t},\n\t].filter( ( el ) => el.value === blockPageMoverState );\n\n\tconst onPickerSelect = ( value ) => {\n\t\tconst option = blockPageMoverOptions.find(\n\t\t\t( el ) => el.value === value\n\t\t);\n\t\tif ( option && option.onSelect ) option.onSelect();\n\t};\n\n\tconst onLongPressMoveUp = useCallback(\n\t\tshowBlockPageMover( BLOCK_MOVER_DIRECTION_TOP ),\n\t\t[]\n\t);\n\tconst onLongPressMoveDown = useCallback(\n\t\tshowBlockPageMover( BLOCK_MOVER_DIRECTION_BOTTOM ),\n\t\t[]\n\t);\n\n\tif ( ! canMove || ( isFirst && isLast && ! rootClientId ) ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ ! isFirst ? backwardButtonTitle : firstBlockTitle }\n\t\t\t\tisDisabled={ isFirst }\n\t\t\t\tonClick={ onMoveUp }\n\t\t\t\tonLongPress={ onLongPressMoveUp }\n\t\t\t\ticon={ backwardButtonIcon }\n\t\t\t\textraProps={ { hint: backwardButtonHint } }\n\t\t\t/>\n\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ ! isLast ? forwardButtonTitle : lastBlockTitle }\n\t\t\t\tisDisabled={ isLast }\n\t\t\t\tonClick={ onMoveDown }\n\t\t\t\tonLongPress={ onLongPressMoveDown }\n\t\t\t\ticon={ forwardButtonIcon }\n\t\t\t\textraProps={ {\n\t\t\t\t\thint: forwardButtonHint,\n\t\t\t\t} }\n\t\t\t/>\n\n\t\t\t<Picker\n\t\t\t\tref={ pickerRef }\n\t\t\t\toptions={ blockPageMoverOptions }\n\t\t\t\tonChange={ onPickerSelect }\n\t\t\t\ttitle={ __( 'Change block position' ) }\n\t\t\t\tleftAlign\n\t\t\t\thideCancelButton={ Platform.OS !== 'ios' }\n\t\t\t/>\n\t\t</ToolbarGroup>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select, { clientIds } ) => {\n\t\tconst {\n\t\t\tgetBlockIndex,\n\t\t\tcanMoveBlocks,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockOrder,\n\t\t} = select( blockEditorStore );\n\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t? clientIds\n\t\t\t: [ clientIds ];\n\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\tconst rootClientId = getBlockRootClientId( firstClientId );\n\t\tconst blockOrder = getBlockOrder( rootClientId );\n\t\tconst firstIndex = getBlockIndex( firstClientId );\n\t\tconst lastIndex = getBlockIndex(\n\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t);\n\n\t\treturn {\n\t\t\tfirstIndex,\n\t\t\tnumberOfBlocks: blockOrder.length - 1,\n\t\t\tisFirst: firstIndex === 0,\n\t\t\tisLast: lastIndex === blockOrder.length - 1,\n\t\t\tcanMove: canMoveBlocks( clientIds, rootClientId ),\n\t\t\trootClientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientIds, rootClientId } ) => {\n\t\tconst { moveBlocksDown, moveBlocksUp, moveBlocksToPosition } =\n\t\t\tdispatch( blockEditorStore );\n\t\treturn {\n\t\t\tonMoveDown: ( ...args ) =>\n\t\t\t\tmoveBlocksDown( clientIds, rootClientId, ...args ),\n\t\t\tonMoveUp: ( ...args ) =>\n\t\t\t\tmoveBlocksUp( clientIds, rootClientId, ...args ),\n\t\t\tonLongMove:\n\t\t\t\t( targetIndex ) =>\n\t\t\t\t( ...args ) =>\n\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\tclientIds,\n\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\ttargetIndex,\n\t\t\t\t\t\t...args\n\t\t\t\t\t),\n\t\t};\n\t} ),\n\twithInstanceId\n)( BlockMover );\n"],"mappings":"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"}