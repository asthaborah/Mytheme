"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BlockRemovalWarningModal = BlockRemovalWarningModal;
var _react = require("react");
var _element = require("@wordpress/element");
var _data = require("@wordpress/data");
var _components = require("@wordpress/components");
var _i18n = require("@wordpress/i18n");
var _store = require("../../store");
var _lockUnlock = require("../../lock-unlock");
/**
 * WordPress dependencies
 */

/**
 * Internal dependencies
 */

function BlockRemovalWarningModal({
  rules
}) {
  const {
    clientIds,
    selectPrevious,
    message
  } = (0, _data.useSelect)(select => (0, _lockUnlock.unlock)(select(_store.store)).getRemovalPromptData());
  const {
    clearBlockRemovalPrompt,
    setBlockRemovalRules,
    privateRemoveBlocks
  } = (0, _lockUnlock.unlock)((0, _data.useDispatch)(_store.store));

  // Load block removal rules, simultaneously signalling that the block
  // removal prompt is in place.
  (0, _element.useEffect)(() => {
    setBlockRemovalRules(rules);
    return () => {
      setBlockRemovalRules();
    };
  }, [rules, setBlockRemovalRules]);
  if (!message) {
    return;
  }
  const onConfirmRemoval = () => {
    privateRemoveBlocks(clientIds, selectPrevious, /* force */true);
    clearBlockRemovalPrompt();
  };
  return (0, _react.createElement)(_components.Modal, {
    title: (0, _i18n.__)('Be careful!'),
    onRequestClose: clearBlockRemovalPrompt,
    size: "medium"
  }, (0, _react.createElement)("p", null, message), (0, _react.createElement)(_components.__experimentalHStack, {
    justify: "right"
  }, (0, _react.createElement)(_components.Button, {
    variant: "tertiary",
    onClick: clearBlockRemovalPrompt
  }, (0, _i18n.__)('Cancel')), (0, _react.createElement)(_components.Button, {
    variant: "primary",
    onClick: onConfirmRemoval
  }, (0, _i18n.__)('Delete'))));
}
//# sourceMappingURL=index.js.map