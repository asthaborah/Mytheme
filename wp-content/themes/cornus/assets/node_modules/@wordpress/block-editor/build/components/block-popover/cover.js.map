{"version":3,"names":["_element","require","_useBlockRefs","_","_interopRequireDefault","BlockPopoverCover","clientId","bottomClientId","children","shift","props","ref","_bottomClientId","selectedElement","useBlockElement","_react","createElement","default","CoverContainer","width","setWidth","useState","offsetWidth","height","setHeight","offsetHeight","useEffect","observer","window","ResizeObserver","observe","box","disconnect","style","useMemo","position","_default","exports","forwardRef"],"sources":["@wordpress/block-editor/src/components/block-popover/cover.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useState, useMemo, forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockPopover from '.';\n\nfunction BlockPopoverCover(\n\t{ clientId, bottomClientId, children, shift = false, ...props },\n\tref\n) {\n\tbottomClientId ??= clientId;\n\n\tconst selectedElement = useBlockElement( clientId );\n\n\treturn (\n\t\t<BlockPopover\n\t\t\tref={ ref }\n\t\t\tclientId={ clientId }\n\t\t\tbottomClientId={ bottomClientId }\n\t\t\tshift={ shift }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ selectedElement && clientId === bottomClientId ? (\n\t\t\t\t<CoverContainer selectedElement={ selectedElement }>\n\t\t\t\t\t{ children }\n\t\t\t\t</CoverContainer>\n\t\t\t) : (\n\t\t\t\tchildren\n\t\t\t) }\n\t\t</BlockPopover>\n\t);\n}\n\nfunction CoverContainer( { selectedElement, children } ) {\n\tconst [ width, setWidth ] = useState( selectedElement.offsetWidth );\n\tconst [ height, setHeight ] = useState( selectedElement.offsetHeight );\n\n\tuseEffect( () => {\n\t\tconst observer = new window.ResizeObserver( () => {\n\t\t\tsetWidth( selectedElement.offsetWidth );\n\t\t\tsetHeight( selectedElement.offsetHeight );\n\t\t} );\n\t\tobserver.observe( selectedElement, { box: 'border-box' } );\n\t\treturn () => observer.disconnect();\n\t}, [ selectedElement ] );\n\n\tconst style = useMemo( () => {\n\t\treturn {\n\t\t\tposition: 'absolute',\n\t\t\twidth,\n\t\t\theight,\n\t\t};\n\t}, [ width, height ] );\n\n\treturn <div style={ style }>{ children }</div>;\n}\n\nexport default forwardRef( BlockPopoverCover );\n"],"mappings":";;;;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AAKA,IAAAC,aAAA,GAAAD,OAAA;AACA,IAAAE,CAAA,GAAAC,sBAAA,CAAAH,OAAA;AATA;AACA;AACA;;AAGA;AACA;AACA;;AAIA,SAASI,iBAAiBA,CACzB;EAAEC,QAAQ;EAAEC,cAAc;EAAEC,QAAQ;EAAEC,KAAK,GAAG,KAAK;EAAE,GAAGC;AAAM,CAAC,EAC/DC,GAAG,EACF;EAAA,IAAAC,eAAA;EACD,CAAAA,eAAA,GAAAL,cAAc,cAAAK,eAAA,cAAAA,eAAA,GAAdL,cAAc,GAAKD,QAAQ;EAE3B,MAAMO,eAAe,GAAG,IAAAC,uCAAe,EAAER,QAAS,CAAC;EAEnD,OACC,IAAAS,MAAA,CAAAC,aAAA,EAACb,CAAA,CAAAc,OAAY;IACZN,GAAG,EAAGA,GAAK;IACXL,QAAQ,EAAGA,QAAU;IACrBC,cAAc,EAAGA,cAAgB;IACjCE,KAAK,EAAGA,KAAO;IAAA,GACVC;EAAK,GAERG,eAAe,IAAIP,QAAQ,KAAKC,cAAc,GAC/C,IAAAQ,MAAA,CAAAC,aAAA,EAACE,cAAc;IAACL,eAAe,EAAGA;EAAiB,GAChDL,QACa,CAAC,GAEjBA,QAEY,CAAC;AAEjB;AAEA,SAASU,cAAcA,CAAE;EAAEL,eAAe;EAAEL;AAAS,CAAC,EAAG;EACxD,MAAM,CAAEW,KAAK,EAAEC,QAAQ,CAAE,GAAG,IAAAC,iBAAQ,EAAER,eAAe,CAACS,WAAY,CAAC;EACnE,MAAM,CAAEC,MAAM,EAAEC,SAAS,CAAE,GAAG,IAAAH,iBAAQ,EAAER,eAAe,CAACY,YAAa,CAAC;EAEtE,IAAAC,kBAAS,EAAE,MAAM;IAChB,MAAMC,QAAQ,GAAG,IAAIC,MAAM,CAACC,cAAc,CAAE,MAAM;MACjDT,QAAQ,CAAEP,eAAe,CAACS,WAAY,CAAC;MACvCE,SAAS,CAAEX,eAAe,CAACY,YAAa,CAAC;IAC1C,CAAE,CAAC;IACHE,QAAQ,CAACG,OAAO,CAAEjB,eAAe,EAAE;MAAEkB,GAAG,EAAE;IAAa,CAAE,CAAC;IAC1D,OAAO,MAAMJ,QAAQ,CAACK,UAAU,CAAC,CAAC;EACnC,CAAC,EAAE,CAAEnB,eAAe,CAAG,CAAC;EAExB,MAAMoB,KAAK,GAAG,IAAAC,gBAAO,EAAE,MAAM;IAC5B,OAAO;MACNC,QAAQ,EAAE,UAAU;MACpBhB,KAAK;MACLI;IACD,CAAC;EACF,CAAC,EAAE,CAAEJ,KAAK,EAAEI,MAAM,CAAG,CAAC;EAEtB,OAAO,IAAAR,MAAA,CAAAC,aAAA;IAAKiB,KAAK,EAAGA;EAAO,GAAGzB,QAAe,CAAC;AAC/C;AAAC,IAAA4B,QAAA,GAAAC,OAAA,CAAApB,OAAA,GAEc,IAAAqB,mBAAU,EAAEjC,iBAAkB,CAAC"}