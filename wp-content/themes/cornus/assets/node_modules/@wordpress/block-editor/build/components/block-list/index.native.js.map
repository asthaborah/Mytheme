{"version":3,"names":["_reactNative","require","_element","_data","_blocks","_components","_i18n","_style","_interopRequireDefault","_blockListAppender","_blockListItem","_blockListItemCell","_blockListContext","_blockDraggable","_useEditorWrapperStyles","_store","identity","x","stylesMemo","getStyles","isStackedHorizontally","horizontalAlignment","styleName","computedStyles","styles","horizontal","overflowVisible","BlockList","blockWidth","initialBlockWidth","contentResizeMode","contentStyle","filterInnerBlocks","gridProperties","header","marginHorizontal","defaultBlock","marginLeft","marginVertical","marginTop","onAddBlock","onDeleteBlock","orientation","parentWidth","renderAppender","renderFooterAppender","rootClientId","withFooter","blockClientIds","blockCount","blockInsertionPointIsVisible","isReadOnly","isRootList","isFloatingToolbarVisible","maxWidth","isRTL","useSelect","select","getBlockCount","getBlockHierarchyRootClientId","getBlockOrder","getSelectedBlockClientId","isBlockInsertionPointVisible","getSettings","blockEditorStore","selectedBlockClientId","rootBlockId","blockOrder","isRTLSetting","maxWidthSetting","readOnly","Platform","OS","undefined","insertBlock","clearSelectedBlock","useDispatch","extraData","useRef","setBlockWidth","useState","addBlockToEndOfPost","newBlock","scrollRef","shouldFlatListPreventAutomaticScroll","shouldShowInnerBlockAppender","length","getExtraData","current","onLayout","nativeEvent","layout","layoutWidth","Math","floor","width","min","renderItem","item","clientId","index","isGridItem","gridItemProps","numOfColumns","numColumns","tileCount","tileIndex","indexOf","_react","createElement","default","blockToolbar","headerToolbar","floatingToolbar","containerStyle","flex","isContentStretch","isMultiBlocks","isWider","alignmentHelpers","extraScrollHeight","height","View","style","onAccessibilityEscape","testID","BlockListProvider","value","DEFAULT_BLOCK_LIST_CONTEXT","BlockDraggableWrapper","onScroll","KeyboardAwareFlatList","removeClippedSubviews","accessibilityLabel","ref","keyboardShouldPersistTaps","scrollViewStyle","scrollEnabled","contentContainerStyle","horizontalContentContainer","horizontalContentContainerStretch","horizontalContentContainerCenter","data","keyExtractor","CellRendererComponent","BlockListItemCell","shouldPreventAutomaticScroll","ListHeaderComponent","ListEmptyComponent","EmptyList","ListFooterComponent","Footer","Fragment","map","currentClientId","key","innerAppender","showSeparator","onAddParagraphBlock","useCallback","paragraphBlock","createBlock","Pressable","__","onPress","blockListFooter","shouldShowInsertionPoint","getBlockInsertionPoint","insertionPoint","align","WIDE_ALIGNMENTS","alignments","full","wrapperStyles","useEditorWrapperStyles","containerStyles","defaultAppender"],"sources":["@wordpress/block-editor/src/components/block-list/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, Platform, Pressable } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useState, useCallback } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tKeyboardAwareFlatList,\n\tWIDE_ALIGNMENTS,\n\talignmentHelpers,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport BlockListAppender from '../block-list-appender';\nimport BlockListItem from './block-list-item';\nimport BlockListItemCell from './block-list-item-cell';\nimport {\n\tBlockListProvider,\n\tDEFAULT_BLOCK_LIST_CONTEXT,\n} from './block-list-context';\nimport { BlockDraggableWrapper } from '../block-draggable';\nimport { useEditorWrapperStyles } from '../../hooks/use-editor-wrapper-styles';\nimport { store as blockEditorStore } from '../../store';\n\nconst identity = ( x ) => x;\n\nconst stylesMemo = {};\nconst getStyles = ( isStackedHorizontally, horizontalAlignment ) => {\n\tconst styleName = `${ isStackedHorizontally }-${ horizontalAlignment }`;\n\tif ( stylesMemo[ styleName ] ) {\n\t\treturn stylesMemo[ styleName ];\n\t}\n\tconst computedStyles = [\n\t\tisStackedHorizontally && styles.horizontal,\n\t\thorizontalAlignment && styles[ `is-aligned-${ horizontalAlignment }` ],\n\t\tstyles.overflowVisible,\n\t];\n\tstylesMemo[ styleName ] = computedStyles;\n\treturn computedStyles;\n};\n\nexport default function BlockList( {\n\tblockWidth: initialBlockWidth,\n\tcontentResizeMode,\n\tcontentStyle,\n\tfilterInnerBlocks,\n\tgridProperties,\n\theader,\n\thorizontal,\n\thorizontalAlignment,\n\tmarginHorizontal = styles.defaultBlock.marginLeft,\n\tmarginVertical = styles.defaultBlock.marginTop,\n\tonAddBlock,\n\tonDeleteBlock,\n\torientation,\n\tparentWidth,\n\trenderAppender,\n\trenderFooterAppender,\n\trootClientId,\n\twithFooter = true,\n} ) {\n\tconst {\n\t\tblockClientIds,\n\t\tblockCount,\n\t\tblockInsertionPointIsVisible,\n\t\tisReadOnly,\n\t\tisRootList,\n\t\tisFloatingToolbarVisible,\n\t\tisStackedHorizontally,\n\t\tmaxWidth,\n\t\tisRTL,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockHierarchyRootClientId,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetSettings,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst rootBlockId = getBlockHierarchyRootClientId(\n\t\t\t\tselectedBlockClientId\n\t\t\t);\n\n\t\t\tlet blockOrder = getBlockOrder( rootClientId );\n\t\t\t// Display only block which fulfill the condition in passed `filterInnerBlocks` function.\n\t\t\tif ( filterInnerBlocks ) {\n\t\t\t\tblockOrder = filterInnerBlocks( blockOrder );\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tisRTL: isRTLSetting,\n\t\t\t\tmaxWidth: maxWidthSetting,\n\t\t\t\treadOnly,\n\t\t\t} = getSettings();\n\n\t\t\treturn {\n\t\t\t\tblockClientIds: blockOrder,\n\t\t\t\tblockCount: getBlockCount(),\n\t\t\t\tblockInsertionPointIsVisible:\n\t\t\t\t\tPlatform.OS === 'ios' && isBlockInsertionPointVisible(),\n\t\t\t\tisReadOnly: readOnly,\n\t\t\t\tisRootList: rootClientId === undefined,\n\t\t\t\tisFloatingToolbarVisible:\n\t\t\t\t\t!! selectedBlockClientId && !! getBlockCount( rootBlockId ),\n\t\t\t\tisStackedHorizontally: orientation === 'horizontal',\n\t\t\t\tmaxWidth: maxWidthSetting,\n\t\t\t\tisRTL: isRTLSetting,\n\t\t\t};\n\t\t},\n\t\t[ filterInnerBlocks, orientation, rootClientId ]\n\t);\n\n\tconst { insertBlock, clearSelectedBlock } = useDispatch( blockEditorStore );\n\n\tconst extraData = useRef( {\n\t\tparentWidth,\n\t\trenderFooterAppender,\n\t\trenderAppender,\n\t\tonDeleteBlock,\n\t\tcontentStyle,\n\t} );\n\n\tconst [ blockWidth, setBlockWidth ] = useState( initialBlockWidth || 0 );\n\n\tconst addBlockToEndOfPost = ( newBlock ) => {\n\t\tinsertBlock( newBlock, blockCount );\n\t};\n\n\tconst scrollRef = useRef( null );\n\n\tconst shouldFlatListPreventAutomaticScroll = () =>\n\t\tblockInsertionPointIsVisible;\n\n\tconst shouldShowInnerBlockAppender = () =>\n\t\trenderAppender && blockClientIds.length > 0;\n\n\tconst getExtraData = () => {\n\t\tif (\n\t\t\textraData.current.parentWidth !== parentWidth ||\n\t\t\textraData.current.renderFooterAppender !== renderFooterAppender ||\n\t\t\textraData.current.onDeleteBlock !== onDeleteBlock ||\n\t\t\textraData.current.contentStyle !== contentStyle ||\n\t\t\textraData.current.renderAppender !== renderAppender ||\n\t\t\textraData.current.blockWidth !== blockWidth ||\n\t\t\textraData.current.gridProperties !== gridProperties\n\t\t) {\n\t\t\textraData.current = {\n\t\t\t\tparentWidth,\n\t\t\t\trenderFooterAppender,\n\t\t\t\tonDeleteBlock,\n\t\t\t\tcontentStyle,\n\t\t\t\trenderAppender,\n\t\t\t\tblockWidth,\n\t\t\t\tgridProperties,\n\t\t\t};\n\t\t}\n\t\treturn extraData.current;\n\t};\n\n\tconst onLayout = ( { nativeEvent } ) => {\n\t\tconst { layout } = nativeEvent;\n\n\t\tconst layoutWidth = Math.floor( layout.width );\n\t\tif ( isRootList && blockWidth !== layoutWidth ) {\n\t\t\tsetBlockWidth( Math.min( layoutWidth, maxWidth ) );\n\t\t} else if ( ! isRootList && ! blockWidth ) {\n\t\t\tsetBlockWidth( Math.min( layoutWidth, maxWidth ) );\n\t\t}\n\t};\n\n\tconst renderItem = ( { item: clientId, index } ) => {\n\t\t// Extracting the grid item properties here to avoid\n\t\t// re-renders in the blockListItem component.\n\t\tconst isGridItem = !! gridProperties;\n\t\tconst gridItemProps = gridProperties && {\n\t\t\tnumOfColumns: gridProperties.numColumns,\n\t\t\ttileCount: blockClientIds.length,\n\t\t\ttileIndex: blockClientIds.indexOf( clientId ),\n\t\t};\n\t\treturn (\n\t\t\t<BlockListItem\n\t\t\t\tindex={ index }\n\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tparentWidth={ parentWidth }\n\t\t\t\tcontentResizeMode={ contentResizeMode }\n\t\t\t\tcontentStyle={ contentStyle }\n\t\t\t\tonAddBlock={ onAddBlock }\n\t\t\t\tmarginVertical={ marginVertical }\n\t\t\t\tmarginHorizontal={ marginHorizontal }\n\t\t\t\tonDeleteBlock={ onDeleteBlock }\n\t\t\t\tshouldShowInnerBlockAppender={ shouldShowInnerBlockAppender }\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\tisGridItem={ isGridItem }\n\t\t\t\t{ ...gridItemProps }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst { blockToolbar, headerToolbar, floatingToolbar } = styles;\n\n\tconst containerStyle = {\n\t\tflex: isRootList ? 1 : 0,\n\t\t// We set negative margin in the parent to remove the edge spacing between parent block and child block in ineer blocks.\n\t\tmarginVertical: isRootList ? 0 : -marginVertical,\n\t\tmarginHorizontal: isRootList ? 0 : -marginHorizontal,\n\t};\n\n\tconst isContentStretch = contentResizeMode === 'stretch';\n\tconst isMultiBlocks = blockClientIds.length > 1;\n\tconst { isWider } = alignmentHelpers;\n\tconst extraScrollHeight =\n\t\theaderToolbar.height +\n\t\tblockToolbar.height +\n\t\t( isFloatingToolbarVisible ? floatingToolbar.height : 0 );\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ containerStyle }\n\t\t\tonAccessibilityEscape={ clearSelectedBlock }\n\t\t\tonLayout={ onLayout }\n\t\t\ttestID=\"block-list-wrapper\"\n\t\t>\n\t\t\t{ isRootList ? (\n\t\t\t\t<BlockListProvider\n\t\t\t\t\tvalue={ {\n\t\t\t\t\t\t...DEFAULT_BLOCK_LIST_CONTEXT,\n\t\t\t\t\t\tscrollRef: scrollRef.current,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<BlockDraggableWrapper isRTL={ isRTL }>\n\t\t\t\t\t\t{ ( { onScroll } ) => (\n\t\t\t\t\t\t\t<KeyboardAwareFlatList\n\t\t\t\t\t\t\t\t{ ...( Platform.OS === 'android'\n\t\t\t\t\t\t\t\t\t? { removeClippedSubviews: false }\n\t\t\t\t\t\t\t\t\t: {} ) } // Disable clipping on Android to fix focus losing. See https://github.com/wordpress-mobile/gutenberg-mobile/pull/741#issuecomment-472746541\n\t\t\t\t\t\t\t\taccessibilityLabel=\"block-list\"\n\t\t\t\t\t\t\t\tref={ scrollRef }\n\t\t\t\t\t\t\t\textraScrollHeight={ extraScrollHeight }\n\t\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\t\t\t\t\tscrollViewStyle={ { flex: 1 } }\n\t\t\t\t\t\t\t\textraData={ getExtraData() }\n\t\t\t\t\t\t\t\tscrollEnabled={ isRootList }\n\t\t\t\t\t\t\t\tcontentContainerStyle={ [\n\t\t\t\t\t\t\t\t\thorizontal &&\n\t\t\t\t\t\t\t\t\t\tstyles.horizontalContentContainer,\n\t\t\t\t\t\t\t\t\tisWider( blockWidth, 'medium' ) &&\n\t\t\t\t\t\t\t\t\t\t( isContentStretch && isMultiBlocks\n\t\t\t\t\t\t\t\t\t\t\t? styles.horizontalContentContainerStretch\n\t\t\t\t\t\t\t\t\t\t\t: styles.horizontalContentContainerCenter ),\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\tdata={ blockClientIds }\n\t\t\t\t\t\t\t\tkeyExtractor={ identity }\n\t\t\t\t\t\t\t\trenderItem={ renderItem }\n\t\t\t\t\t\t\t\tCellRendererComponent={ BlockListItemCell }\n\t\t\t\t\t\t\t\tshouldPreventAutomaticScroll={\n\t\t\t\t\t\t\t\t\tshouldFlatListPreventAutomaticScroll\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tListHeaderComponent={ header }\n\t\t\t\t\t\t\t\tListEmptyComponent={\n\t\t\t\t\t\t\t\t\t! isReadOnly && (\n\t\t\t\t\t\t\t\t\t\t<EmptyList\n\t\t\t\t\t\t\t\t\t\t\torientation={ orientation }\n\t\t\t\t\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tListFooterComponent={\n\t\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\t\taddBlockToEndOfPost={\n\t\t\t\t\t\t\t\t\t\t\taddBlockToEndOfPost\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisReadOnly={ isReadOnly }\n\t\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twithFooter={ withFooter }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonScroll={ onScroll }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BlockDraggableWrapper>\n\t\t\t\t</BlockListProvider>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{ blockClientIds.length > 0 ? (\n\t\t\t\t\t\t<View style={ [ { flex: 0 }, styles.overflowVisible ] }>\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t...getStyles(\n\t\t\t\t\t\t\t\t\t\tisStackedHorizontally,\n\t\t\t\t\t\t\t\t\t\thorizontalAlignment\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\thorizontal &&\n\t\t\t\t\t\t\t\t\t\tstyles.horizontalContentContainer,\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ blockClientIds.map(\n\t\t\t\t\t\t\t\t\t( currentClientId, index ) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<View key={ currentClientId }>\n\t\t\t\t\t\t\t\t\t\t\t\t{ renderItem( {\n\t\t\t\t\t\t\t\t\t\t\t\t\titem: currentClientId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\t\t\taddBlockToEndOfPost={ addBlockToEndOfPost }\n\t\t\t\t\t\t\t\t\tisReadOnly={ isReadOnly }\n\t\t\t\t\t\t\t\t\trenderFooterAppender={\n\t\t\t\t\t\t\t\t\t\trenderFooterAppender\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\twithFooter={ withFooter }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EmptyList\n\t\t\t\t\t\t\torientation={ orientation }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\t\trenderFooterAppender={ renderFooterAppender }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ shouldShowInnerBlockAppender() && (\n\t\t\t\t<View\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tmarginHorizontal:\n\t\t\t\t\t\t\tmarginHorizontal - styles.innerAppender.marginLeft,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<BlockListAppender\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\tshowSeparator\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\nfunction Footer( {\n\taddBlockToEndOfPost,\n\tisReadOnly,\n\trenderFooterAppender,\n\twithFooter,\n} ) {\n\tconst onAddParagraphBlock = useCallback( () => {\n\t\tconst paragraphBlock = createBlock( 'core/paragraph' );\n\t\taddBlockToEndOfPost( paragraphBlock );\n\t}, [ addBlockToEndOfPost ] );\n\n\tif ( ! isReadOnly && withFooter ) {\n\t\treturn (\n\t\t\t<Pressable\n\t\t\t\taccessibilityLabel={ __( 'Add paragraph block' ) }\n\t\t\t\ttestID={ __( 'Add paragraph block' ) }\n\t\t\t\tonPress={ onAddParagraphBlock }\n\t\t\t>\n\t\t\t\t<View style={ styles.blockListFooter } />\n\t\t\t</Pressable>\n\t\t);\n\t} else if ( renderFooterAppender ) {\n\t\treturn <View>{ renderFooterAppender() }</View>;\n\t}\n\n\treturn null;\n}\n\nfunction EmptyList( {\n\torientation,\n\trenderAppender,\n\trenderFooterAppender,\n\trootClientId,\n} ) {\n\tconst { shouldShowInsertionPoint } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t} = select( blockEditorStore );\n\n\t\tconst isStackedHorizontally = orientation === 'horizontal';\n\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst blockInsertionPointIsVisible = isBlockInsertionPointVisible();\n\n\t\treturn {\n\t\t\tshouldShowInsertionPoint:\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tblockInsertionPointIsVisible &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t\t// If list is empty, show the insertion point (via the default appender)\n\t\t\t\t( blockClientIds.length === 0 ||\n\t\t\t\t\t// Or if the insertion point is right before the denoted block.\n\t\t\t\t\t! blockClientIds[ insertionPoint.index ] ),\n\t\t};\n\t} );\n\tconst align = renderAppender ? WIDE_ALIGNMENTS.alignments.full : undefined;\n\tconst [ wrapperStyles ] = useEditorWrapperStyles( { align } );\n\n\tif ( renderFooterAppender || renderAppender === false ) {\n\t\treturn null;\n\t}\n\n\tconst containerStyles = [ styles.defaultAppender, wrapperStyles ];\n\n\treturn (\n\t\t<View style={ containerStyles }>\n\t\t\t<BlockListAppender\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\tshowSeparator={ shouldShowInsertionPoint }\n\t\t\t/>\n\t\t</View>\n\t);\n}\n"],"mappings":"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"}