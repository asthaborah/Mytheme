{"version":3,"names":["_reactNative","require","_reactNativeReanimated","_element","_useKeyboardOffset","_interopRequireDefault","_useScrollToSection","_useScrollToElement","useScroll","scrollEnabled","shouldPreventAutomaticScroll","onScroll","onSizeChange","extraScrollHeight","scrollViewRef","useRef","scrollViewMeasurements","scrollViewYOffset","useSharedValue","lastScrollTo","clientId","height","windowHeight","width","windowWidth","useWindowDimensions","isLandscape","keyboardOffset","useKeyboardOffset","scrollHandler","useAnimatedScrollHandler","event","contentOffset","value","y","useEffect","current","scrollToSection","useScrollToSection","scrollToElement","useScrollToElement","measureScrollView","useCallback","measureInWindow","_x","onContentSizeChange"],"sources":["@wordpress/components/src/mobile/keyboard-aware-flat-list/use-scroll.native.js"],"sourcesContent":["/**\n * External dependencies\n */\n\nimport { useWindowDimensions } from 'react-native';\nimport {\n\tuseAnimatedScrollHandler,\n\tuseSharedValue,\n} from 'react-native-reanimated';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useKeyboardOffset from './use-keyboard-offset';\nimport useScrollToSection from './use-scroll-to-section';\nimport useScrollToElement from './use-scroll-to-element';\n\nexport default function useScroll( {\n\tscrollEnabled,\n\tshouldPreventAutomaticScroll,\n\tonScroll,\n\tonSizeChange,\n\textraScrollHeight,\n} ) {\n\tconst scrollViewRef = useRef();\n\tconst scrollViewMeasurements = useRef();\n\tconst scrollViewYOffset = useSharedValue( -1 );\n\tconst lastScrollTo = useRef( {\n\t\tclientId: null,\n\t} );\n\n\tconst { height: windowHeight, width: windowWidth } = useWindowDimensions();\n\tconst isLandscape = windowWidth >= windowHeight;\n\n\tconst [ keyboardOffset ] = useKeyboardOffset(\n\t\tscrollEnabled,\n\t\tshouldPreventAutomaticScroll\n\t);\n\n\tconst scrollHandler = useAnimatedScrollHandler( {\n\t\tonScroll: ( event ) => {\n\t\t\tconst { contentOffset } = event;\n\t\t\tscrollViewYOffset.value = contentOffset.y;\n\t\t\tonScroll( event );\n\t\t},\n\t} );\n\n\t// When the orientation changes, the ScrollView measurements\n\t// need to be re-calculated.\n\tuseEffect( () => {\n\t\tscrollViewMeasurements.current = null;\n\t}, [ isLandscape ] );\n\n\tconst [ scrollToSection ] = useScrollToSection(\n\t\textraScrollHeight,\n\t\tkeyboardOffset,\n\t\tscrollEnabled,\n\t\tscrollViewMeasurements,\n\t\tscrollViewRef,\n\t\tscrollViewYOffset\n\t);\n\tconst [ scrollToElement ] = useScrollToElement(\n\t\tscrollViewRef,\n\t\tscrollToSection\n\t);\n\n\tconst measureScrollView = useCallback( () => {\n\t\tif ( scrollViewRef.current ) {\n\t\t\tscrollViewRef.current.measureInWindow( ( _x, y, width, height ) => {\n\t\t\t\tscrollViewMeasurements.current = { y, width, height };\n\t\t\t} );\n\t\t}\n\t}, [ scrollViewRef ] );\n\n\tconst onContentSizeChange = useCallback( () => {\n\t\tif ( onSizeChange ) {\n\t\t\tonSizeChange();\n\t\t}\n\n\t\t// Sets the first values when the content size changes.\n\t\tif ( ! scrollViewMeasurements.current ) {\n\t\t\tmeasureScrollView();\n\t\t}\n\t}, [ measureScrollView, onSizeChange ] );\n\n\treturn {\n\t\tscrollViewRef,\n\t\tscrollHandler,\n\t\tkeyboardOffset,\n\t\tscrollToSection,\n\t\tscrollToElement,\n\t\tonContentSizeChange,\n\t\tlastScrollTo,\n\t};\n}\n"],"mappings":";;;;;;;AAIA,IAAAA,YAAA,GAAAC,OAAA;AACA,IAAAC,sBAAA,GAAAD,OAAA;AAQA,IAAAE,QAAA,GAAAF,OAAA;AAKA,IAAAG,kBAAA,GAAAC,sBAAA,CAAAJ,OAAA;AACA,IAAAK,mBAAA,GAAAD,sBAAA,CAAAJ,OAAA;AACA,IAAAM,mBAAA,GAAAF,sBAAA,CAAAJ,OAAA;AApBA;AACA;AACA;;AAQA;AACA;AACA;;AAGA;AACA;AACA;;AAKe,SAASO,SAASA,CAAE;EAClCC,aAAa;EACbC,4BAA4B;EAC5BC,QAAQ;EACRC,YAAY;EACZC;AACD,CAAC,EAAG;EACH,MAAMC,aAAa,GAAG,IAAAC,eAAM,EAAC,CAAC;EAC9B,MAAMC,sBAAsB,GAAG,IAAAD,eAAM,EAAC,CAAC;EACvC,MAAME,iBAAiB,GAAG,IAAAC,qCAAc,EAAE,CAAC,CAAE,CAAC;EAC9C,MAAMC,YAAY,GAAG,IAAAJ,eAAM,EAAE;IAC5BK,QAAQ,EAAE;EACX,CAAE,CAAC;EAEH,MAAM;IAAEC,MAAM,EAAEC,YAAY;IAAEC,KAAK,EAAEC;EAAY,CAAC,GAAG,IAAAC,gCAAmB,EAAC,CAAC;EAC1E,MAAMC,WAAW,GAAGF,WAAW,IAAIF,YAAY;EAE/C,MAAM,CAAEK,cAAc,CAAE,GAAG,IAAAC,0BAAiB,EAC3CnB,aAAa,EACbC,4BACD,CAAC;EAED,MAAMmB,aAAa,GAAG,IAAAC,+CAAwB,EAAE;IAC/CnB,QAAQ,EAAIoB,KAAK,IAAM;MACtB,MAAM;QAAEC;MAAc,CAAC,GAAGD,KAAK;MAC/Bd,iBAAiB,CAACgB,KAAK,GAAGD,aAAa,CAACE,CAAC;MACzCvB,QAAQ,CAAEoB,KAAM,CAAC;IAClB;EACD,CAAE,CAAC;;EAEH;EACA;EACA,IAAAI,kBAAS,EAAE,MAAM;IAChBnB,sBAAsB,CAACoB,OAAO,GAAG,IAAI;EACtC,CAAC,EAAE,CAAEV,WAAW,CAAG,CAAC;EAEpB,MAAM,CAAEW,eAAe,CAAE,GAAG,IAAAC,2BAAkB,EAC7CzB,iBAAiB,EACjBc,cAAc,EACdlB,aAAa,EACbO,sBAAsB,EACtBF,aAAa,EACbG,iBACD,CAAC;EACD,MAAM,CAAEsB,eAAe,CAAE,GAAG,IAAAC,2BAAkB,EAC7C1B,aAAa,EACbuB,eACD,CAAC;EAED,MAAMI,iBAAiB,GAAG,IAAAC,oBAAW,EAAE,MAAM;IAC5C,IAAK5B,aAAa,CAACsB,OAAO,EAAG;MAC5BtB,aAAa,CAACsB,OAAO,CAACO,eAAe,CAAE,CAAEC,EAAE,EAAEV,CAAC,EAAEX,KAAK,EAAEF,MAAM,KAAM;QAClEL,sBAAsB,CAACoB,OAAO,GAAG;UAAEF,CAAC;UAAEX,KAAK;UAAEF;QAAO,CAAC;MACtD,CAAE,CAAC;IACJ;EACD,CAAC,EAAE,CAAEP,aAAa,CAAG,CAAC;EAEtB,MAAM+B,mBAAmB,GAAG,IAAAH,oBAAW,EAAE,MAAM;IAC9C,IAAK9B,YAAY,EAAG;MACnBA,YAAY,CAAC,CAAC;IACf;;IAEA;IACA,IAAK,CAAEI,sBAAsB,CAACoB,OAAO,EAAG;MACvCK,iBAAiB,CAAC,CAAC;IACpB;EACD,CAAC,EAAE,CAAEA,iBAAiB,EAAE7B,YAAY,CAAG,CAAC;EAExC,OAAO;IACNE,aAAa;IACbe,aAAa;IACbF,cAAc;IACdU,eAAe;IACfE,eAAe;IACfM,mBAAmB;IACnB1B;EACD,CAAC;AACF"}