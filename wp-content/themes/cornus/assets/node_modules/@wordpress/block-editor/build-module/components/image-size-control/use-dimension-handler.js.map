{"version":3,"names":["useEffect","useState","useDimensionHandler","customHeight","customWidth","defaultHeight","defaultWidth","onChange","_ref","_ref2","currentWidth","setCurrentWidth","currentHeight","setCurrentHeight","undefined","Number","parseInt","updateDimension","dimension","value","parsedValue","updateDimensions","nextHeight","nextWidth","height","width"],"sources":["@wordpress/block-editor/src/components/image-size-control/use-dimension-handler.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\nexport default function useDimensionHandler(\n\tcustomHeight,\n\tcustomWidth,\n\tdefaultHeight,\n\tdefaultWidth,\n\tonChange\n) {\n\tconst [ currentWidth, setCurrentWidth ] = useState(\n\t\tcustomWidth ?? defaultWidth ?? ''\n\t);\n\tconst [ currentHeight, setCurrentHeight ] = useState(\n\t\tcustomHeight ?? defaultHeight ?? ''\n\t);\n\n\t// When an image is first inserted, the default dimensions are initially\n\t// undefined. This effect updates the dimensions when the default values\n\t// come through.\n\tuseEffect( () => {\n\t\tif ( customWidth === undefined && defaultWidth !== undefined ) {\n\t\t\tsetCurrentWidth( defaultWidth );\n\t\t}\n\t\tif ( customHeight === undefined && defaultHeight !== undefined ) {\n\t\t\tsetCurrentHeight( defaultHeight );\n\t\t}\n\t}, [ defaultWidth, defaultHeight ] );\n\n\t// If custom values change, it means an outsider has resized the image using some other method (eg resize box)\n\t// this keeps track of these values too. We need to parse before comparing; custom values can be strings.\n\tuseEffect( () => {\n\t\tif (\n\t\t\tcustomWidth !== undefined &&\n\t\t\tNumber.parseInt( customWidth ) !== Number.parseInt( currentWidth )\n\t\t) {\n\t\t\tsetCurrentWidth( customWidth );\n\t\t}\n\t\tif (\n\t\t\tcustomHeight !== undefined &&\n\t\t\tNumber.parseInt( customHeight ) !== Number.parseInt( currentHeight )\n\t\t) {\n\t\t\tsetCurrentHeight( customHeight );\n\t\t}\n\t}, [ customWidth, customHeight ] );\n\n\tconst updateDimension = ( dimension, value ) => {\n\t\tconst parsedValue = value === '' ? undefined : parseInt( value, 10 );\n\t\tif ( dimension === 'width' ) {\n\t\t\tsetCurrentWidth( parsedValue );\n\t\t} else {\n\t\t\tsetCurrentHeight( parsedValue );\n\t\t}\n\t\tonChange( {\n\t\t\t[ dimension ]: parsedValue,\n\t\t} );\n\t};\n\n\tconst updateDimensions = ( nextHeight, nextWidth ) => {\n\t\tsetCurrentHeight( nextHeight ?? defaultHeight );\n\t\tsetCurrentWidth( nextWidth ?? defaultWidth );\n\t\tonChange( { height: nextHeight, width: nextWidth } );\n\t};\n\n\treturn {\n\t\tcurrentHeight,\n\t\tcurrentWidth,\n\t\tupdateDimension,\n\t\tupdateDimensions,\n\t};\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,oBAAoB;AAExD,eAAe,SAASC,mBAAmBA,CAC1CC,YAAY,EACZC,WAAW,EACXC,aAAa,EACbC,YAAY,EACZC,QAAQ,EACP;EAAA,IAAAC,IAAA,EAAAC,KAAA;EACD,MAAM,CAAEC,YAAY,EAAEC,eAAe,CAAE,GAAGV,QAAQ,EAAAO,IAAA,GACjDJ,WAAW,aAAXA,WAAW,cAAXA,WAAW,GAAIE,YAAY,cAAAE,IAAA,cAAAA,IAAA,GAAI,EAChC,CAAC;EACD,MAAM,CAAEI,aAAa,EAAEC,gBAAgB,CAAE,GAAGZ,QAAQ,EAAAQ,KAAA,GACnDN,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAIE,aAAa,cAAAI,KAAA,cAAAA,KAAA,GAAI,EAClC,CAAC;;EAED;EACA;EACA;EACAT,SAAS,CAAE,MAAM;IAChB,IAAKI,WAAW,KAAKU,SAAS,IAAIR,YAAY,KAAKQ,SAAS,EAAG;MAC9DH,eAAe,CAAEL,YAAa,CAAC;IAChC;IACA,IAAKH,YAAY,KAAKW,SAAS,IAAIT,aAAa,KAAKS,SAAS,EAAG;MAChED,gBAAgB,CAAER,aAAc,CAAC;IAClC;EACD,CAAC,EAAE,CAAEC,YAAY,EAAED,aAAa,CAAG,CAAC;;EAEpC;EACA;EACAL,SAAS,CAAE,MAAM;IAChB,IACCI,WAAW,KAAKU,SAAS,IACzBC,MAAM,CAACC,QAAQ,CAAEZ,WAAY,CAAC,KAAKW,MAAM,CAACC,QAAQ,CAAEN,YAAa,CAAC,EACjE;MACDC,eAAe,CAAEP,WAAY,CAAC;IAC/B;IACA,IACCD,YAAY,KAAKW,SAAS,IAC1BC,MAAM,CAACC,QAAQ,CAAEb,YAAa,CAAC,KAAKY,MAAM,CAACC,QAAQ,CAAEJ,aAAc,CAAC,EACnE;MACDC,gBAAgB,CAAEV,YAAa,CAAC;IACjC;EACD,CAAC,EAAE,CAAEC,WAAW,EAAED,YAAY,CAAG,CAAC;EAElC,MAAMc,eAAe,GAAGA,CAAEC,SAAS,EAAEC,KAAK,KAAM;IAC/C,MAAMC,WAAW,GAAGD,KAAK,KAAK,EAAE,GAAGL,SAAS,GAAGE,QAAQ,CAAEG,KAAK,EAAE,EAAG,CAAC;IACpE,IAAKD,SAAS,KAAK,OAAO,EAAG;MAC5BP,eAAe,CAAES,WAAY,CAAC;IAC/B,CAAC,MAAM;MACNP,gBAAgB,CAAEO,WAAY,CAAC;IAChC;IACAb,QAAQ,CAAE;MACT,CAAEW,SAAS,GAAIE;IAChB,CAAE,CAAC;EACJ,CAAC;EAED,MAAMC,gBAAgB,GAAGA,CAAEC,UAAU,EAAEC,SAAS,KAAM;IACrDV,gBAAgB,CAAES,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAIjB,aAAc,CAAC;IAC/CM,eAAe,CAAEY,SAAS,aAATA,SAAS,cAATA,SAAS,GAAIjB,YAAa,CAAC;IAC5CC,QAAQ,CAAE;MAAEiB,MAAM,EAAEF,UAAU;MAAEG,KAAK,EAAEF;IAAU,CAAE,CAAC;EACrD,CAAC;EAED,OAAO;IACNX,aAAa;IACbF,YAAY;IACZO,eAAe;IACfI;EACD,CAAC;AACF"}