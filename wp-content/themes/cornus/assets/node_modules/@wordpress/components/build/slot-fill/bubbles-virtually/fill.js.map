{"version":3,"names":["_element","require","_useSlot","_interopRequireDefault","_styleProvider","useForceUpdate","setState","useState","mounted","useRef","useEffect","current","Fill","props","_slot$fillProps","name","children","registerFill","unregisterFill","slot","useSlot","rerender","ref","wrappedChildren","_react","createElement","default","document","ownerDocument","fillProps","createPortal"],"sources":["@wordpress/components/src/slot-fill/bubbles-virtually/fill.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef, useState, useEffect, createPortal } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useSlot from './use-slot';\nimport StyleProvider from '../../style-provider';\nimport type { FillComponentProps } from '../types';\n\nfunction useForceUpdate() {\n\tconst [ , setState ] = useState( {} );\n\tconst mounted = useRef( true );\n\n\tuseEffect( () => {\n\t\tmounted.current = true;\n\t\treturn () => {\n\t\t\tmounted.current = false;\n\t\t};\n\t}, [] );\n\n\treturn () => {\n\t\tif ( mounted.current ) {\n\t\t\tsetState( {} );\n\t\t}\n\t};\n}\n\nexport default function Fill( props: FillComponentProps ) {\n\tconst { name, children } = props;\n\tconst { registerFill, unregisterFill, ...slot } = useSlot( name );\n\tconst rerender = useForceUpdate();\n\tconst ref = useRef( { rerender } );\n\n\tuseEffect( () => {\n\t\t// We register fills so we can keep track of their existence.\n\t\t// Some Slot implementations need to know if there're already fills\n\t\t// registered so they can choose to render themselves or not.\n\t\tregisterFill( ref );\n\t\treturn () => {\n\t\t\tunregisterFill( ref );\n\t\t};\n\t}, [ registerFill, unregisterFill ] );\n\n\tif ( ! slot.ref || ! slot.ref.current ) {\n\t\treturn null;\n\t}\n\n\t// When using a `Fill`, the `children` will be rendered in the document of the\n\t// `Slot`. This means that we need to wrap the `children` in a `StyleProvider`\n\t// to make sure we're referencing the right document/iframe (instead of the\n\t// context of the `Fill`'s parent).\n\tconst wrappedChildren = (\n\t\t<StyleProvider document={ slot.ref.current.ownerDocument }>\n\t\t\t{ typeof children === 'function'\n\t\t\t\t? children( slot.fillProps ?? {} )\n\t\t\t\t: children }\n\t\t</StyleProvider>\n\t);\n\n\treturn createPortal( wrappedChildren, slot.ref.current );\n}\n"],"mappings":";;;;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AAKA,IAAAC,QAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,cAAA,GAAAD,sBAAA,CAAAF,OAAA;AATA;AACA;AACA;;AAGA;AACA;AACA;;AAKA,SAASI,cAAcA,CAAA,EAAG;EACzB,MAAM,GAAIC,QAAQ,CAAE,GAAG,IAAAC,iBAAQ,EAAE,CAAC,CAAE,CAAC;EACrC,MAAMC,OAAO,GAAG,IAAAC,eAAM,EAAE,IAAK,CAAC;EAE9B,IAAAC,kBAAS,EAAE,MAAM;IAChBF,OAAO,CAACG,OAAO,GAAG,IAAI;IACtB,OAAO,MAAM;MACZH,OAAO,CAACG,OAAO,GAAG,KAAK;IACxB,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,OAAO,MAAM;IACZ,IAAKH,OAAO,CAACG,OAAO,EAAG;MACtBL,QAAQ,CAAE,CAAC,CAAE,CAAC;IACf;EACD,CAAC;AACF;AAEe,SAASM,IAAIA,CAAEC,KAAyB,EAAG;EAAA,IAAAC,eAAA;EACzD,MAAM;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAGH,KAAK;EAChC,MAAM;IAAEI,YAAY;IAAEC,cAAc;IAAE,GAAGC;EAAK,CAAC,GAAG,IAAAC,gBAAO,EAAEL,IAAK,CAAC;EACjE,MAAMM,QAAQ,GAAGhB,cAAc,CAAC,CAAC;EACjC,MAAMiB,GAAG,GAAG,IAAAb,eAAM,EAAE;IAAEY;EAAS,CAAE,CAAC;EAElC,IAAAX,kBAAS,EAAE,MAAM;IAChB;IACA;IACA;IACAO,YAAY,CAAEK,GAAI,CAAC;IACnB,OAAO,MAAM;MACZJ,cAAc,CAAEI,GAAI,CAAC;IACtB,CAAC;EACF,CAAC,EAAE,CAAEL,YAAY,EAAEC,cAAc,CAAG,CAAC;EAErC,IAAK,CAAEC,IAAI,CAACG,GAAG,IAAI,CAAEH,IAAI,CAACG,GAAG,CAACX,OAAO,EAAG;IACvC,OAAO,IAAI;EACZ;;EAEA;EACA;EACA;EACA;EACA,MAAMY,eAAe,GACpB,IAAAC,MAAA,CAAAC,aAAA,EAACrB,cAAA,CAAAsB,OAAa;IAACC,QAAQ,EAAGR,IAAI,CAACG,GAAG,CAACX,OAAO,CAACiB;EAAe,GACvD,OAAOZ,QAAQ,KAAK,UAAU,GAC7BA,QAAQ,EAAAF,eAAA,GAAEK,IAAI,CAACU,SAAS,cAAAf,eAAA,cAAAA,eAAA,GAAI,CAAC,CAAE,CAAC,GAChCE,QACW,CACf;EAED,OAAO,IAAAc,qBAAY,EAAEP,eAAe,EAAEJ,IAAI,CAACG,GAAG,CAACX,OAAQ,CAAC;AACzD"}