{"version":3,"names":["_reactNative","require","_components","_reactNativeBridge","_icons","_i18n","_compose","_blocks","_element","_hooks","_style","_interopRequireDefault","_useUnsupportedBlockEditor","EMPTY_ARRAY","UnsupportedBlockDetails","clientId","showSheet","onCloseSheet","customBlockTitle","icon","title","description","actionButtonLabel","customActions","sendFallbackMessage","setSendFallbackMessage","useState","sendButtonPressMessage","setSendButtonPressMessage","blockName","blockContent","isUnsupportedBlockEditorSupported","canEnableUnsupportedBlockEditor","isEditableInUnsupportedBlockEditor","useUnsupportedBlockEditor","textStyle","usePreferredColorSchemeStyle","styles","titleStyle","descriptionStyle","iconStyle","actionButtonStyle","blockTitle","getBlockType","requestFallback","useCallback","descriptionWithNotes","applyFilters","webEditorDefaultLabel","__","canUseWebEditor","actions","label","onPress","filter","Boolean","_react","createElement","BottomSheet","isVisible","hideHeader","onClose","onModalHide","timeout","setTimeout","requestUnsupportedBlockFallback","sendActionButtonPressedAction","actionButtons","missingBlockAlertActionButton","View","style","Icon","help","color","size","Text","map","index","TextControl","key","separatorType","labelStyle","_default","exports","default"],"sources":["@wordpress/block-editor/src/components/unsupported-block-details/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { BottomSheet, Icon, TextControl } from '@wordpress/components';\nimport {\n\trequestUnsupportedBlockFallback,\n\tsendActionButtonPressedAction,\n\tactionButtons,\n} from '@wordpress/react-native-bridge';\nimport { help } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { getBlockType } from '@wordpress/blocks';\nimport { useCallback, useState } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport useUnsupportedBlockEditor from '../use-unsupported-block-editor';\n\nconst EMPTY_ARRAY = [];\n\nconst UnsupportedBlockDetails = ( {\n\tclientId,\n\tshowSheet,\n\tonCloseSheet,\n\tcustomBlockTitle = '',\n\ticon,\n\ttitle,\n\tdescription,\n\tactionButtonLabel,\n\tcustomActions = EMPTY_ARRAY,\n} ) => {\n\tconst [ sendFallbackMessage, setSendFallbackMessage ] = useState( false );\n\tconst [ sendButtonPressMessage, setSendButtonPressMessage ] =\n\t\tuseState( false );\n\n\tconst {\n\t\tblockName,\n\t\tblockContent,\n\t\tisUnsupportedBlockEditorSupported,\n\t\tcanEnableUnsupportedBlockEditor,\n\t\tisEditableInUnsupportedBlockEditor,\n\t} = useUnsupportedBlockEditor( clientId );\n\n\t// Styles\n\tconst textStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'unsupported-block-details__text' ],\n\t\tstyles[ 'unsupported-block-details__text--dark' ]\n\t);\n\tconst titleStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'unsupported-block-details__title' ],\n\t\tstyles[ 'unsupported-block-details__title--dark' ]\n\t);\n\tconst descriptionStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'unsupported-block-details__description' ],\n\t\tstyles[ 'unsupported-block-details__description--dark' ]\n\t);\n\tconst iconStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'unsupported-block-details__icon' ],\n\t\tstyles[ 'unsupported-block-details__icon--dark' ]\n\t);\n\tconst actionButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles[ 'unsupported-block-details__action-button' ],\n\t\tstyles[ 'unsupported-block-details__action-button--dark' ]\n\t);\n\n\tconst blockTitle =\n\t\tcustomBlockTitle || getBlockType( blockName )?.title || blockName;\n\n\tconst requestFallback = useCallback( () => {\n\t\tif (\n\t\t\tcanEnableUnsupportedBlockEditor &&\n\t\t\tisUnsupportedBlockEditorSupported === false\n\t\t) {\n\t\t\tonCloseSheet();\n\t\t\tsetSendButtonPressMessage( true );\n\t\t} else {\n\t\t\tonCloseSheet();\n\t\t\tsetSendFallbackMessage( true );\n\t\t}\n\t}, [\n\t\tcanEnableUnsupportedBlockEditor,\n\t\tisUnsupportedBlockEditorSupported,\n\t\tonCloseSheet,\n\t] );\n\n\t// The description can include extra notes via WP hooks.\n\tconst descriptionWithNotes = applyFilters(\n\t\t'native.unsupported_block_details_extra_note',\n\t\tdescription,\n\t\tblockName\n\t);\n\n\tconst webEditorDefaultLabel = applyFilters(\n\t\t'native.unsupported_block_details_web_editor_action',\n\t\t__( 'Edit using web editor' )\n\t);\n\n\tconst canUseWebEditor =\n\t\t( isUnsupportedBlockEditorSupported ||\n\t\t\tcanEnableUnsupportedBlockEditor ) &&\n\t\tisEditableInUnsupportedBlockEditor;\n\tconst actions = [\n\t\t...[\n\t\t\tcanUseWebEditor && {\n\t\t\t\tlabel: actionButtonLabel || webEditorDefaultLabel,\n\t\t\t\tonPress: requestFallback,\n\t\t\t},\n\t\t],\n\t\t...customActions,\n\t].filter( Boolean );\n\n\treturn (\n\t\t<BottomSheet\n\t\t\tisVisible={ showSheet }\n\t\t\thideHeader\n\t\t\tonClose={ onCloseSheet }\n\t\t\tonModalHide={ () => {\n\t\t\t\tif ( sendFallbackMessage ) {\n\t\t\t\t\t// On iOS, onModalHide is called when the controller is still part of the hierarchy.\n\t\t\t\t\t// A small delay will ensure that the controller has already been removed.\n\t\t\t\t\tthis.timeout = setTimeout( () => {\n\t\t\t\t\t\t// For the Classic block, the content is kept in the `content` attribute.\n\t\t\t\t\t\trequestUnsupportedBlockFallback(\n\t\t\t\t\t\t\tblockContent,\n\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tblockTitle\n\t\t\t\t\t\t);\n\t\t\t\t\t}, 100 );\n\t\t\t\t\tsetSendFallbackMessage( false );\n\t\t\t\t} else if ( sendButtonPressMessage ) {\n\t\t\t\t\tthis.timeout = setTimeout( () => {\n\t\t\t\t\t\tsendActionButtonPressedAction(\n\t\t\t\t\t\t\tactionButtons.missingBlockAlertActionButton\n\t\t\t\t\t\t);\n\t\t\t\t\t}, 100 );\n\t\t\t\t\tsetSendButtonPressMessage( false );\n\t\t\t\t}\n\t\t\t} }\n\t\t>\n\t\t\t<View style={ styles[ 'unsupported-block-details__container' ] }>\n\t\t\t\t<Icon\n\t\t\t\t\ticon={ icon || help }\n\t\t\t\t\tcolor={ iconStyle.color }\n\t\t\t\t\tsize={ iconStyle.size }\n\t\t\t\t/>\n\t\t\t\t<Text style={ [ textStyle, titleStyle ] }>{ title }</Text>\n\t\t\t\t{ isEditableInUnsupportedBlockEditor &&\n\t\t\t\t\tdescriptionWithNotes && (\n\t\t\t\t\t\t<Text style={ [ textStyle, descriptionStyle ] }>\n\t\t\t\t\t\t\t{ descriptionWithNotes }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t) }\n\t\t\t</View>\n\t\t\t{ actions.map( ( { label, onPress }, index ) => (\n\t\t\t\t<TextControl\n\t\t\t\t\tkey={ `${ label } - ${ index }` }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\t\tonPress={ onPress }\n\t\t\t\t\tlabelStyle={ actionButtonStyle }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Dismiss' ) }\n\t\t\t\tseparatorType=\"topFullWidth\"\n\t\t\t\tonPress={ onCloseSheet }\n\t\t\t\tlabelStyle={ actionButtonStyle }\n\t\t\t/>\n\t\t</BottomSheet>\n\t);\n};\n\nexport default UnsupportedBlockDetails;\n"],"mappings":"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"}