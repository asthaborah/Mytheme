{"version":3,"names":["_element","require","_data","_compose","_store","_constants","withRegistryProvider","createHigherOrderComponent","WrappedComponent","withRegistry","useSubRegistry","registry","props","_react","createElement","subRegistry","setSubRegistry","useState","useEffect","newRegistry","createRegistry","registerStore","blockEditorStoreName","storeConfig","RegistryProvider","value","_default","exports","default"],"sources":["@wordpress/block-editor/src/components/provider/with-registry-provider.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport {\n\twithRegistry,\n\tcreateRegistry,\n\tRegistryProvider,\n} from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport { STORE_NAME as blockEditorStoreName } from '../../store/constants';\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) => {\n\t\treturn withRegistry(\n\t\t\t( { useSubRegistry = true, registry, ...props } ) => {\n\t\t\t\tif ( ! useSubRegistry ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent registry={ registry } { ...props } />\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\n\t\t\t\tuseEffect( () => {\n\t\t\t\t\tconst newRegistry = createRegistry( {}, registry );\n\t\t\t\t\tnewRegistry.registerStore(\n\t\t\t\t\t\tblockEditorStoreName,\n\t\t\t\t\t\tstoreConfig\n\t\t\t\t\t);\n\t\t\t\t\tsetSubRegistry( newRegistry );\n\t\t\t\t}, [ registry ] );\n\n\t\t\t\tif ( ! subRegistry ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\tregistry={ subRegistry }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RegistryProvider>\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t},\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n"],"mappings":";;;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAKA,IAAAE,QAAA,GAAAF,OAAA;AAKA,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,UAAA,GAAAJ,OAAA;AAfA;AACA;AACA;;AASA;AACA;AACA;;AAIA,MAAMK,oBAAoB,GAAG,IAAAC,mCAA0B,EACpDC,gBAAgB,IAAM;EACvB,OAAO,IAAAC,kBAAY,EAClB,CAAE;IAAEC,cAAc,GAAG,IAAI;IAAEC,QAAQ;IAAE,GAAGC;EAAM,CAAC,KAAM;IACpD,IAAK,CAAEF,cAAc,EAAG;MACvB,OACC,IAAAG,MAAA,CAAAC,aAAA,EAACN,gBAAgB;QAACG,QAAQ,EAAGA,QAAU;QAAA,GAAMC;MAAK,CAAI,CAAC;IAEzD;IAEA,MAAM,CAAEG,WAAW,EAAEC,cAAc,CAAE,GAAG,IAAAC,iBAAQ,EAAE,IAAK,CAAC;IACxD,IAAAC,kBAAS,EAAE,MAAM;MAChB,MAAMC,WAAW,GAAG,IAAAC,oBAAc,EAAE,CAAC,CAAC,EAAET,QAAS,CAAC;MAClDQ,WAAW,CAACE,aAAa,CACxBC,qBAAoB,EACpBC,kBACD,CAAC;MACDP,cAAc,CAAEG,WAAY,CAAC;IAC9B,CAAC,EAAE,CAAER,QAAQ,CAAG,CAAC;IAEjB,IAAK,CAAEI,WAAW,EAAG;MACpB,OAAO,IAAI;IACZ;IAEA,OACC,IAAAF,MAAA,CAAAC,aAAA,EAACZ,KAAA,CAAAsB,gBAAgB;MAACC,KAAK,EAAGV;IAAa,GACtC,IAAAF,MAAA,CAAAC,aAAA,EAACN,gBAAgB;MAChBG,QAAQ,EAAGI,WAAa;MAAA,GACnBH;IAAK,CACV,CACgB,CAAC;EAErB,CACD,CAAC;AACF,CAAC,EACD,sBACD,CAAC;AAAC,IAAAc,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEatB,oBAAoB"}