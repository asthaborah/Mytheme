{"version":3,"names":["useEffect","useState","useSelect","store","blockEditorStore","useListViewExpandSelectedItem","firstSelectedBlockClientId","setExpandedState","selectedTreeId","setSelectedTreeId","selectedBlockParentClientIds","select","getBlockParents","length","type","clientIds"],"sources":["@wordpress/block-editor/src/components/list-view/use-list-view-expand-selected-item.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useListViewExpandSelectedItem( {\n\tfirstSelectedBlockClientId,\n\tsetExpandedState,\n} ) {\n\tconst [ selectedTreeId, setSelectedTreeId ] = useState( null );\n\tconst { selectedBlockParentClientIds } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tselectedBlockParentClientIds: getBlockParents(\n\t\t\t\t\tfirstSelectedBlockClientId,\n\t\t\t\t\tfalse\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ firstSelectedBlockClientId ]\n\t);\n\n\t// Expand tree when a block is selected.\n\tuseEffect( () => {\n\t\t// If the selectedTreeId is the same as the selected block,\n\t\t// it means that the block was selected using the block list tree.\n\t\tif ( selectedTreeId === firstSelectedBlockClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the selected block has parents, get the top-level parent.\n\t\tif ( selectedBlockParentClientIds?.length ) {\n\t\t\t// If the selected block has parents,\n\t\t\t// expand the tree branch.\n\t\t\tsetExpandedState( {\n\t\t\t\ttype: 'expand',\n\t\t\t\tclientIds: selectedBlockParentClientIds,\n\t\t\t} );\n\t\t}\n\t}, [\n\t\tfirstSelectedBlockClientId,\n\t\tselectedBlockParentClientIds,\n\t\tselectedTreeId,\n\t\tsetExpandedState,\n\t] );\n\n\treturn {\n\t\tsetSelectedTreeId,\n\t};\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,oBAAoB;AACxD,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AAEvD,eAAe,SAASC,6BAA6BA,CAAE;EACtDC,0BAA0B;EAC1BC;AACD,CAAC,EAAG;EACH,MAAM,CAAEC,cAAc,EAAEC,iBAAiB,CAAE,GAAGR,QAAQ,CAAE,IAAK,CAAC;EAC9D,MAAM;IAAES;EAA6B,CAAC,GAAGR,SAAS,CAC/CS,MAAM,IAAM;IACb,MAAM;MAAEC;IAAgB,CAAC,GAAGD,MAAM,CAAEP,gBAAiB,CAAC;IACtD,OAAO;MACNM,4BAA4B,EAAEE,eAAe,CAC5CN,0BAA0B,EAC1B,KACD;IACD,CAAC;EACF,CAAC,EACD,CAAEA,0BAA0B,CAC7B,CAAC;;EAED;EACAN,SAAS,CAAE,MAAM;IAChB;IACA;IACA,IAAKQ,cAAc,KAAKF,0BAA0B,EAAG;MACpD;IACD;;IAEA;IACA,IAAKI,4BAA4B,EAAEG,MAAM,EAAG;MAC3C;MACA;MACAN,gBAAgB,CAAE;QACjBO,IAAI,EAAE,QAAQ;QACdC,SAAS,EAAEL;MACZ,CAAE,CAAC;IACJ;EACD,CAAC,EAAE,CACFJ,0BAA0B,EAC1BI,4BAA4B,EAC5BF,cAAc,EACdD,gBAAgB,CACf,CAAC;EAEH,OAAO;IACNE;EACD,CAAC;AACF"}