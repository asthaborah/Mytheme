{"version":3,"names":["findNodeHandle","Platform","__","sprintf","switchToBlockType","Picker","useDispatch","store","noticesStore","blockEditorStore","BlockTransformationsMenu","anchorNodeRef","blockTitle","pickerRef","possibleTransformations","selectedBlock","selectedBlockClientId","replaceBlocks","createSuccessNotice","pickerOptions","_selectedBlock$name","selectedBlockName","name","blocksThatSplitWhenTransformed","map","item","label","length","includes","id","title","value","getAnchor","undefined","onPickerSelect","selectedItem","find","successNotice","createElement","testID","ref","options","onChange","hideCancelButton","OS","leftAlign"],"sources":["@wordpress/block-editor/src/components/block-switcher/block-transformations-menu.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { findNodeHandle, Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { switchToBlockType } from '@wordpress/blocks';\nimport { Picker } from '@wordpress/components';\nimport { useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst BlockTransformationsMenu = ( {\n\tanchorNodeRef,\n\tblockTitle,\n\tpickerRef,\n\tpossibleTransformations,\n\tselectedBlock,\n\tselectedBlockClientId,\n} ) => {\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\n\tconst pickerOptions = () => {\n\t\tconst selectedBlockName = selectedBlock?.name ?? '';\n\t\tconst blocksThatSplitWhenTransformed = {\n\t\t\t'core/list': [ 'core/paragraph', 'core/heading' ],\n\t\t\t'core/quote': [ 'core/paragraph' ],\n\t\t\t'core/pullquote': [ 'core/paragraph' ],\n\t\t};\n\n\t\treturn possibleTransformations.map( ( item ) => {\n\t\t\tconst label =\n\t\t\t\tselectedBlockName.length &&\n\t\t\t\tblocksThatSplitWhenTransformed[ selectedBlockName ] &&\n\t\t\t\tblocksThatSplitWhenTransformed[ selectedBlockName ].includes(\n\t\t\t\t\titem.id\n\t\t\t\t)\n\t\t\t\t\t? `${ item.title } blocks`\n\t\t\t\t\t: item.title;\n\t\t\treturn {\n\t\t\t\tlabel,\n\t\t\t\tvalue: item.id,\n\t\t\t};\n\t\t} );\n\t};\n\n\tconst getAnchor = () =>\n\t\tanchorNodeRef ? findNodeHandle( anchorNodeRef ) : undefined;\n\n\tfunction onPickerSelect( value ) {\n\t\treplaceBlocks(\n\t\t\tselectedBlockClientId,\n\t\t\tswitchToBlockType( selectedBlock, value )\n\t\t);\n\n\t\tconst selectedItem = pickerOptions().find(\n\t\t\t( item ) => item.value === value\n\t\t);\n\t\tconst successNotice = sprintf(\n\t\t\t/* translators: 1: From block title, e.g. Paragraph. 2: To block title, e.g. Header. */\n\t\t\t__( '%1$s transformed to %2$s' ),\n\t\t\tblockTitle,\n\t\t\tselectedItem.label\n\t\t);\n\t\tcreateSuccessNotice( successNotice );\n\t}\n\n\treturn (\n\t\t<Picker\n\t\t\ttestID=\"block-transformations-menu\"\n\t\t\tref={ pickerRef }\n\t\t\toptions={ pickerOptions() }\n\t\t\tonChange={ onPickerSelect }\n\t\t\thideCancelButton={ Platform.OS !== 'ios' }\n\t\t\tleftAlign\n\t\t\tgetAnchor={ getAnchor }\n\t\t\t// translators: %s: block title e.g: \"Paragraph\".\n\t\t\ttitle={ sprintf( __( 'Transform %s to' ), blockTitle ) }\n\t\t/>\n\t);\n};\n\nexport default BlockTransformationsMenu;\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,cAAc,EAAEC,QAAQ,QAAQ,cAAc;;AAEvD;AACA;AACA;AACA,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,iBAAiB,QAAQ,mBAAmB;AACrD,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,SAASC,KAAK,IAAIC,YAAY,QAAQ,oBAAoB;;AAE1D;AACA;AACA;AACA,SAASD,KAAK,IAAIE,gBAAgB,QAAQ,aAAa;AAEvD,MAAMC,wBAAwB,GAAGA,CAAE;EAClCC,aAAa;EACbC,UAAU;EACVC,SAAS;EACTC,uBAAuB;EACvBC,aAAa;EACbC;AACD,CAAC,KAAM;EACN,MAAM;IAAEC;EAAc,CAAC,GAAGX,WAAW,CAAEG,gBAAiB,CAAC;EACzD,MAAM;IAAES;EAAoB,CAAC,GAAGZ,WAAW,CAAEE,YAAa,CAAC;EAE3D,MAAMW,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,mBAAA;IAC3B,MAAMC,iBAAiB,IAAAD,mBAAA,GAAGL,aAAa,EAAEO,IAAI,cAAAF,mBAAA,cAAAA,mBAAA,GAAI,EAAE;IACnD,MAAMG,8BAA8B,GAAG;MACtC,WAAW,EAAE,CAAE,gBAAgB,EAAE,cAAc,CAAE;MACjD,YAAY,EAAE,CAAE,gBAAgB,CAAE;MAClC,gBAAgB,EAAE,CAAE,gBAAgB;IACrC,CAAC;IAED,OAAOT,uBAAuB,CAACU,GAAG,CAAIC,IAAI,IAAM;MAC/C,MAAMC,KAAK,GACVL,iBAAiB,CAACM,MAAM,IACxBJ,8BAA8B,CAAEF,iBAAiB,CAAE,IACnDE,8BAA8B,CAAEF,iBAAiB,CAAE,CAACO,QAAQ,CAC3DH,IAAI,CAACI,EACN,CAAC,GACG,GAAGJ,IAAI,CAACK,KAAO,SAAQ,GACxBL,IAAI,CAACK,KAAK;MACd,OAAO;QACNJ,KAAK;QACLK,KAAK,EAAEN,IAAI,CAACI;MACb,CAAC;IACF,CAAE,CAAC;EACJ,CAAC;EAED,MAAMG,SAAS,GAAGA,CAAA,KACjBrB,aAAa,GAAGX,cAAc,CAAEW,aAAc,CAAC,GAAGsB,SAAS;EAE5D,SAASC,cAAcA,CAAEH,KAAK,EAAG;IAChCd,aAAa,CACZD,qBAAqB,EACrBZ,iBAAiB,CAAEW,aAAa,EAAEgB,KAAM,CACzC,CAAC;IAED,MAAMI,YAAY,GAAGhB,aAAa,CAAC,CAAC,CAACiB,IAAI,CACtCX,IAAI,IAAMA,IAAI,CAACM,KAAK,KAAKA,KAC5B,CAAC;IACD,MAAMM,aAAa,GAAGlC,OAAO,EAC5B;IACAD,EAAE,CAAE,0BAA2B,CAAC,EAChCU,UAAU,EACVuB,YAAY,CAACT,KACd,CAAC;IACDR,mBAAmB,CAAEmB,aAAc,CAAC;EACrC;EAEA,OACCC,aAAA,CAACjC,MAAM;IACNkC,MAAM,EAAC,4BAA4B;IACnCC,GAAG,EAAG3B,SAAW;IACjB4B,OAAO,EAAGtB,aAAa,CAAC,CAAG;IAC3BuB,QAAQ,EAAGR,cAAgB;IAC3BS,gBAAgB,EAAG1C,QAAQ,CAAC2C,EAAE,KAAK,KAAO;IAC1CC,SAAS;IACTb,SAAS,EAAGA;IACZ;IAAA;IACAF,KAAK,EAAG3B,OAAO,CAAED,EAAE,CAAE,iBAAkB,CAAC,EAAEU,UAAW;EAAG,CACxD,CAAC;AAEJ,CAAC;AAED,eAAeF,wBAAwB"}