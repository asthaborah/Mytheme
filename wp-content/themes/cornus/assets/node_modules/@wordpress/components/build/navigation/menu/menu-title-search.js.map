{"version":3,"names":["_element","require","_i18n","_withSpokenMessages","_interopRequireDefault","_context","_context2","_constants","_searchControl","_navigationStyles","MenuTitleSearch","debouncedSpeak","onCloseSearch","onSearch","search","title","navigationTree","items","useNavigationContext","menu","useNavigationMenuContext","inputRef","useRef","useEffect","delayedFocus","setTimeout","current","focus","SEARCH_FOCUS_DELAY","clearTimeout","count","Object","values","filter","item","_isVisible","length","resultsFoundMessage","sprintf","_n","onClose","onKeyDown","event","code","defaultPrevented","preventDefault","inputId","placeholder","__","toLowerCase","trim","_react","createElement","MenuTitleSearchControlWrapper","default","__nextHasNoMarginBottom","className","id","onChange","value","ref","_default","exports","withSpokenMessages"],"sources":["@wordpress/components/src/navigation/menu/menu-title-search.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport { __, _n, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport withSpokenMessages from '../../higher-order/with-spoken-messages';\nimport { useNavigationMenuContext } from './context';\nimport { useNavigationContext } from '../context';\nimport { SEARCH_FOCUS_DELAY } from '../constants';\n\nimport type { NavigationMenuTitleSearchProps } from '../types';\nimport SearchControl from '../../search-control';\nimport { MenuTitleSearchControlWrapper } from '../styles/navigation-styles';\n\nfunction MenuTitleSearch( {\n\tdebouncedSpeak,\n\tonCloseSearch,\n\tonSearch,\n\tsearch,\n\ttitle,\n}: NavigationMenuTitleSearchProps ) {\n\tconst {\n\t\tnavigationTree: { items },\n\t} = useNavigationContext();\n\tconst { menu } = useNavigationMenuContext();\n\tconst inputRef = useRef< HTMLInputElement >( null );\n\n\t// Wait for the slide-in animation to complete before autofocusing the input.\n\t// This prevents scrolling to the input during the animation.\n\tuseEffect( () => {\n\t\tconst delayedFocus = setTimeout( () => {\n\t\t\tinputRef.current?.focus();\n\t\t}, SEARCH_FOCUS_DELAY );\n\n\t\treturn () => {\n\t\t\tclearTimeout( delayedFocus );\n\t\t};\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( ! search ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst count = Object.values( items ).filter(\n\t\t\t( item ) => item._isVisible\n\t\t).length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t\t// Ignore exhaustive-deps rule for now. See https://github.com/WordPress/gutenberg/pull/44090\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ items, search ] );\n\n\tconst onClose = () => {\n\t\tonSearch?.( '' );\n\t\tonCloseSearch();\n\t};\n\n\tconst onKeyDown: React.KeyboardEventHandler< HTMLInputElement > = (\n\t\tevent\n\t) => {\n\t\tif ( event.code === 'Escape' && ! event.defaultPrevented ) {\n\t\t\tevent.preventDefault();\n\t\t\tonClose();\n\t\t}\n\t};\n\n\tconst inputId = `components-navigation__menu-title-search-${ menu }`;\n\tconst placeholder = sprintf(\n\t\t/* translators: placeholder for menu search box. %s: menu title */\n\t\t__( 'Search %s' ),\n\t\ttitle?.toLowerCase()\n\t).trim();\n\n\treturn (\n\t\t<MenuTitleSearchControlWrapper>\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tclassName=\"components-navigation__menu-search-input\"\n\t\t\t\tid={ inputId }\n\t\t\t\tonChange={ ( value ) => onSearch?.( value ) }\n\t\t\t\tonKeyDown={ onKeyDown }\n\t\t\t\tplaceholder={ placeholder }\n\t\t\t\tonClose={ onClose }\n\t\t\t\tref={ inputRef }\n\t\t\t\tvalue={ search }\n\t\t\t/>\n\t\t</MenuTitleSearchControlWrapper>\n\t);\n}\n\nexport default withSpokenMessages( MenuTitleSearch );\n"],"mappings":"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"}