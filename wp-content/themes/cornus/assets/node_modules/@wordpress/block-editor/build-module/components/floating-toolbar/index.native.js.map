{"version":3,"names":["Animated","Easing","View","Platform","ToolbarButton","ToolbarGroup","useEffect","useState","useRef","withSelect","withDispatch","compose","__","styles","NavigateUpSVG","BlockSelectionButton","store","blockEditorStore","EASE_IN_DURATION","EASE_OUT_DURATION","TRANSLATION_RANGE","FloatingToolbar","selectedClientId","parentId","showFloatingToolbar","onNavigateUp","isRTL","opacity","Value","current","previousSelection","setPreviousSelection","timing","toValue","duration","easing","ease","useNativeDriver","start","clientId","translationRange","OS","translation","interpolate","inputRange","outputRange","animationStyle","transform","translateY","previousSelectedClientId","previousSelectedParentId","showPrevious","blockSelectionButtonClientId","showNavUpButton","createElement","style","floatingToolbar","pointerEvents","passedStyle","toolbar","title","onClick","icon","pipe","select","getSelectedBlockClientId","getBlockHierarchyRootClientId","getBlockRootClientId","getBlockCount","getSettings","rootBlockId","dispatch","selectBlock","initialPosition"],"sources":["@wordpress/block-editor/src/components/floating-toolbar/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Animated, Easing, View, Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { useEffect, useState, useRef } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\nimport NavigateUpSVG from './nav-up-icon';\nimport BlockSelectionButton from '../block-list/block-selection-button.native';\nimport { store as blockEditorStore } from '../../store';\n\nconst EASE_IN_DURATION = 250;\nconst EASE_OUT_DURATION = 80;\nconst TRANSLATION_RANGE = 8;\n\nconst FloatingToolbar = ( {\n\tselectedClientId,\n\tparentId,\n\tshowFloatingToolbar,\n\tonNavigateUp,\n\tisRTL,\n} ) => {\n\tconst opacity = useRef( new Animated.Value( 0 ) ).current;\n\t// Sustain old selection for proper block selection button rendering when exit animation is ongoing.\n\tconst [ previousSelection, setPreviousSelection ] = useState( {} );\n\n\tuseEffect( () => {\n\t\tAnimated.timing( opacity, {\n\t\t\ttoValue: showFloatingToolbar ? 1 : 0,\n\t\t\tduration: showFloatingToolbar\n\t\t\t\t? EASE_IN_DURATION\n\t\t\t\t: EASE_OUT_DURATION,\n\t\t\teasing: Easing.ease,\n\t\t\tuseNativeDriver: true,\n\t\t} ).start();\n\t}, [ showFloatingToolbar ] );\n\n\tuseEffect( () => {\n\t\tif ( showFloatingToolbar )\n\t\t\tsetPreviousSelection( { clientId: selectedClientId, parentId } );\n\t}, [ selectedClientId ] );\n\n\tconst translationRange =\n\t\t( Platform.OS === 'android' ? -1 : 1 ) * TRANSLATION_RANGE;\n\n\tconst translation = opacity.interpolate( {\n\t\tinputRange: [ 0, 1 ],\n\t\toutputRange: [ translationRange, 0 ],\n\t} );\n\n\tconst animationStyle = {\n\t\topacity,\n\t\ttransform: [ { translateY: translation } ],\n\t};\n\n\tconst {\n\t\tclientId: previousSelectedClientId,\n\t\tparentId: previousSelectedParentId,\n\t} = previousSelection;\n\n\tconst showPrevious = previousSelectedClientId && ! showFloatingToolbar;\n\tconst blockSelectionButtonClientId = showPrevious\n\t\t? previousSelectedClientId\n\t\t: selectedClientId;\n\tconst showNavUpButton =\n\t\t!! parentId || ( showPrevious && !! previousSelectedParentId );\n\n\treturn (\n\t\t!! opacity && (\n\t\t\t<Animated.View\n\t\t\t\tstyle={ [ styles.floatingToolbar, animationStyle ] }\n\t\t\t\tpointerEvents={ showFloatingToolbar ? 'auto' : 'none' }\n\t\t\t>\n\t\t\t\t{ showNavUpButton && (\n\t\t\t\t\t<ToolbarGroup passedStyle={ styles.toolbar }>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ttitle={ __( 'Navigate Up' ) }\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t! showPrevious &&\n\t\t\t\t\t\t\t\t( () => onNavigateUp( parentId ) )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticon={ <NavigateUpSVG isRTL={ isRTL } /> }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<View style={ styles.pipe } />\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t) }\n\t\t\t\t<BlockSelectionButton\n\t\t\t\t\tclientId={ blockSelectionButtonClientId }\n\t\t\t\t/>\n\t\t\t</Animated.View>\n\t\t)\n\t);\n};\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockHierarchyRootClientId,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockCount,\n\t\t\tgetSettings,\n\t\t} = select( blockEditorStore );\n\n\t\tconst selectedClientId = getSelectedBlockClientId();\n\n\t\tif ( ! selectedClientId ) return;\n\n\t\tconst rootBlockId = getBlockHierarchyRootClientId( selectedClientId );\n\n\t\treturn {\n\t\t\tselectedClientId,\n\t\t\tshowFloatingToolbar: !! getBlockCount( rootBlockId ),\n\t\t\tparentId: getBlockRootClientId( selectedClientId ),\n\t\t\tisRTL: getSettings().isRTL,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { selectBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonNavigateUp( clientId, initialPosition ) {\n\t\t\t\tselectBlock( clientId, initialPosition );\n\t\t\t},\n\t\t};\n\t} ),\n] )( FloatingToolbar );\n"],"mappings":"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"}