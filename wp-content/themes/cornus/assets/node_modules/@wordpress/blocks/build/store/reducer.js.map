{"version":3,"names":["_changeCase","require","_data","_i18n","_utils","DEFAULT_CATEGORIES","exports","slug","title","__","keyBlockTypesByName","types","reduce","newBlockTypes","block","name","getUniqueItemsByName","items","acc","currentItem","some","item","push","bootstrappedBlockTypes","state","action","type","blockType","serverDefinition","newDefinition","selectors","undefined","blockHooks","allowedBlocks","Object","fromEntries","entries","filter","value","map","key","camelCase","omit","names","unprocessedBlockTypes","blockTypes","blockStyles","_state$action$blockNa","_state$action$blockNa2","_blockType$styles","_state$blockType$name","styles","style","source","blockName","styleNames","indexOf","blockVariations","_state$action$blockNa3","_state$action$blockNa4","_blockType$variations","_state$blockType$name2","variations","variation","variationNames","createBlockNameSetterReducer","setActionType","defaultBlockName","freeformFallbackBlockName","unregisteredFallbackBlockName","groupingBlockName","categories","category","keys","length","categoryToChange","find","collections","namespace","icon","blockBindingsSources","_action$lockAttribute","sourceName","label","sourceLabel","useSource","lockAttributesEditing","_default","default","combineReducers"],"sources":["@wordpress/blocks/src/store/reducer.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { camelCase } from 'change-case';\n\n/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { omit } from '../api/utils';\n\n/**\n * @typedef {Object} WPBlockCategory\n *\n * @property {string} slug  Unique category slug.\n * @property {string} title Category label, for display in user interface.\n */\n\n/**\n * Default set of categories.\n *\n * @type {WPBlockCategory[]}\n */\nexport const DEFAULT_CATEGORIES = [\n\t{ slug: 'text', title: __( 'Text' ) },\n\t{ slug: 'media', title: __( 'Media' ) },\n\t{ slug: 'design', title: __( 'Design' ) },\n\t{ slug: 'widgets', title: __( 'Widgets' ) },\n\t{ slug: 'theme', title: __( 'Theme' ) },\n\t{ slug: 'embed', title: __( 'Embeds' ) },\n\t{ slug: 'reusable', title: __( 'Reusable blocks' ) },\n];\n\n// Key block types by their name.\nfunction keyBlockTypesByName( types ) {\n\treturn types.reduce(\n\t\t( newBlockTypes, block ) => ( {\n\t\t\t...newBlockTypes,\n\t\t\t[ block.name ]: block,\n\t\t} ),\n\t\t{}\n\t);\n}\n\n// Filter items to ensure they're unique by their name.\nfunction getUniqueItemsByName( items ) {\n\treturn items.reduce( ( acc, currentItem ) => {\n\t\tif ( ! acc.some( ( item ) => item.name === currentItem.name ) ) {\n\t\t\tacc.push( currentItem );\n\t\t}\n\t\treturn acc;\n\t}, [] );\n}\n\nfunction bootstrappedBlockTypes( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BOOTSTRAPPED_BLOCK_TYPE':\n\t\t\tconst { name, blockType } = action;\n\t\t\tconst serverDefinition = state[ name ];\n\t\t\tlet newDefinition;\n\t\t\t// Don't overwrite if already set. It covers the case when metadata\n\t\t\t// was initialized from the server.\n\t\t\tif ( serverDefinition ) {\n\t\t\t\t// The `selectors` prop is not yet included in the server provided\n\t\t\t\t// definitions and needs to be polyfilled. This can be removed when the\n\t\t\t\t// minimum supported WordPress is >= 6.3.\n\t\t\t\tif (\n\t\t\t\t\tserverDefinition.selectors === undefined &&\n\t\t\t\t\tblockType.selectors\n\t\t\t\t) {\n\t\t\t\t\tnewDefinition = {\n\t\t\t\t\t\t...serverDefinition,\n\t\t\t\t\t\tselectors: blockType.selectors,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// The `blockHooks` prop is not yet included in the server provided\n\t\t\t\t// definitions and needs to be polyfilled. This can be removed when the\n\t\t\t\t// minimum supported WordPress is >= 6.4.\n\t\t\t\tif (\n\t\t\t\t\tserverDefinition.blockHooks === undefined &&\n\t\t\t\t\tblockType.blockHooks\n\t\t\t\t) {\n\t\t\t\t\tnewDefinition = {\n\t\t\t\t\t\t...serverDefinition,\n\t\t\t\t\t\t...newDefinition,\n\t\t\t\t\t\tblockHooks: blockType.blockHooks,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// The `allowedBlocks` prop is not yet included in the server provided\n\t\t\t\t// definitions and needs to be polyfilled. This can be removed when the\n\t\t\t\t// minimum supported WordPress is >= 6.5.\n\t\t\t\tif (\n\t\t\t\t\tserverDefinition.allowedBlocks === undefined &&\n\t\t\t\t\tblockType.allowedBlocks\n\t\t\t\t) {\n\t\t\t\t\tnewDefinition = {\n\t\t\t\t\t\t...serverDefinition,\n\t\t\t\t\t\t...newDefinition,\n\t\t\t\t\t\tallowedBlocks: blockType.allowedBlocks,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewDefinition = Object.fromEntries(\n\t\t\t\t\tObject.entries( blockType )\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t( [ , value ] ) =>\n\t\t\t\t\t\t\t\tvalue !== null && value !== undefined\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map( ( [ key, value ] ) => [\n\t\t\t\t\t\t\tcamelCase( key ),\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t] )\n\t\t\t\t);\n\t\t\t\tnewDefinition.name = name;\n\t\t\t}\n\n\t\t\tif ( newDefinition ) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ name ]: newDefinition,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn state;\n\t\tcase 'REMOVE_BLOCK_TYPES':\n\t\t\treturn omit( state, action.names );\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the unprocessed block types in a form passed when registering the by block.\n * It's for internal use only. It allows recomputing the processed block types on-demand after block type filters\n * get added or removed.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function unprocessedBlockTypes( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_UNPROCESSED_BLOCK_TYPE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.name ]: action.blockType,\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_TYPES':\n\t\t\treturn omit( state, action.names );\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the processed block types with all filters applied.\n * The state is derived from the `unprocessedBlockTypes` reducer.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function blockTypes( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_TYPES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...keyBlockTypesByName( action.blockTypes ),\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_TYPES':\n\t\t\treturn omit( state, action.names );\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the block styles.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function blockStyles( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_TYPES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...Object.fromEntries(\n\t\t\t\t\tObject.entries(\n\t\t\t\t\t\tkeyBlockTypesByName( action.blockTypes )\n\t\t\t\t\t).map( ( [ name, blockType ] ) => [\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tgetUniqueItemsByName( [\n\t\t\t\t\t\t\t...( blockType.styles ?? [] ).map( ( style ) => ( {\n\t\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\t\tsource: 'block',\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t\t...( state[ blockType.name ] ?? [] ).filter(\n\t\t\t\t\t\t\t\t( { source } ) => 'block' !== source\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t] ),\n\t\t\t\t\t] )\n\t\t\t\t),\n\t\t\t};\n\t\tcase 'ADD_BLOCK_STYLES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: getUniqueItemsByName( [\n\t\t\t\t\t...( state[ action.blockName ] ?? [] ),\n\t\t\t\t\t...action.styles,\n\t\t\t\t] ),\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_STYLES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: (\n\t\t\t\t\tstate[ action.blockName ] ?? []\n\t\t\t\t).filter(\n\t\t\t\t\t( style ) => action.styleNames.indexOf( style.name ) === -1\n\t\t\t\t),\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the block variations.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function blockVariations( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_TYPES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...Object.fromEntries(\n\t\t\t\t\tObject.entries(\n\t\t\t\t\t\tkeyBlockTypesByName( action.blockTypes )\n\t\t\t\t\t).map( ( [ name, blockType ] ) => {\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tgetUniqueItemsByName( [\n\t\t\t\t\t\t\t\t...( blockType.variations ?? [] ).map(\n\t\t\t\t\t\t\t\t\t( variation ) => ( {\n\t\t\t\t\t\t\t\t\t\t...variation,\n\t\t\t\t\t\t\t\t\t\tsource: 'block',\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t...( state[ blockType.name ] ?? [] ).filter(\n\t\t\t\t\t\t\t\t\t( { source } ) => 'block' !== source\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t] ),\n\t\t\t\t\t\t];\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t};\n\t\tcase 'ADD_BLOCK_VARIATIONS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: getUniqueItemsByName( [\n\t\t\t\t\t...( state[ action.blockName ] ?? [] ),\n\t\t\t\t\t...action.variations,\n\t\t\t\t] ),\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_VARIATIONS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.blockName ]: (\n\t\t\t\t\tstate[ action.blockName ] ?? []\n\t\t\t\t).filter(\n\t\t\t\t\t( variation ) =>\n\t\t\t\t\t\taction.variationNames.indexOf( variation.name ) === -1\n\t\t\t\t),\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Higher-order Reducer creating a reducer keeping track of given block name.\n *\n * @param {string} setActionType Action type.\n *\n * @return {Function} Reducer.\n */\nexport function createBlockNameSetterReducer( setActionType ) {\n\treturn ( state = null, action ) => {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'REMOVE_BLOCK_TYPES':\n\t\t\t\tif ( action.names.indexOf( state ) !== -1 ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn state;\n\n\t\t\tcase setActionType:\n\t\t\t\treturn action.name || null;\n\t\t}\n\n\t\treturn state;\n\t};\n}\n\nexport const defaultBlockName = createBlockNameSetterReducer(\n\t'SET_DEFAULT_BLOCK_NAME'\n);\nexport const freeformFallbackBlockName = createBlockNameSetterReducer(\n\t'SET_FREEFORM_FALLBACK_BLOCK_NAME'\n);\nexport const unregisteredFallbackBlockName = createBlockNameSetterReducer(\n\t'SET_UNREGISTERED_FALLBACK_BLOCK_NAME'\n);\nexport const groupingBlockName = createBlockNameSetterReducer(\n\t'SET_GROUPING_BLOCK_NAME'\n);\n\n/**\n * Reducer managing the categories\n *\n * @param {WPBlockCategory[]} state  Current state.\n * @param {Object}            action Dispatched action.\n *\n * @return {WPBlockCategory[]} Updated state.\n */\nexport function categories( state = DEFAULT_CATEGORIES, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_CATEGORIES':\n\t\t\treturn action.categories || [];\n\t\tcase 'UPDATE_CATEGORY': {\n\t\t\tif (\n\t\t\t\t! action.category ||\n\t\t\t\t! Object.keys( action.category ).length\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\tconst categoryToChange = state.find(\n\t\t\t\t( { slug } ) => slug === action.slug\n\t\t\t);\n\t\t\tif ( categoryToChange ) {\n\t\t\t\treturn state.map( ( category ) => {\n\t\t\t\t\tif ( category.slug === action.slug ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...category,\n\t\t\t\t\t\t\t...action.category,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn category;\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\treturn state;\n}\n\nexport function collections( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_BLOCK_COLLECTION':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.namespace ]: {\n\t\t\t\t\ttitle: action.title,\n\t\t\t\t\ticon: action.icon,\n\t\t\t\t},\n\t\t\t};\n\t\tcase 'REMOVE_BLOCK_COLLECTION':\n\t\t\treturn omit( state, action.namespace );\n\t}\n\treturn state;\n}\n\nexport function blockBindingsSources( state = {}, action ) {\n\tif ( action.type === 'REGISTER_BLOCK_BINDINGS_SOURCE' ) {\n\t\treturn {\n\t\t\t...state,\n\t\t\t[ action.sourceName ]: {\n\t\t\t\tlabel: action.sourceLabel,\n\t\t\t\tuseSource: action.useSource,\n\t\t\t\tlockAttributesEditing: action.lockAttributesEditing ?? true,\n\t\t\t},\n\t\t};\n\t}\n\treturn state;\n}\n\nexport default combineReducers( {\n\tbootstrappedBlockTypes,\n\tunprocessedBlockTypes,\n\tblockTypes,\n\tblockStyles,\n\tblockVariations,\n\tdefaultBlockName,\n\tfreeformFallbackBlockName,\n\tunregisteredFallbackBlockName,\n\tgroupingBlockName,\n\tcategories,\n\tcollections,\n\tblockBindingsSources,\n} );\n"],"mappings":"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"}