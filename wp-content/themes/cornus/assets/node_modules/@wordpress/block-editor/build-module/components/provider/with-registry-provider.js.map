{"version":3,"names":["useState","useEffect","withRegistry","createRegistry","RegistryProvider","createHigherOrderComponent","storeConfig","STORE_NAME","blockEditorStoreName","withRegistryProvider","WrappedComponent","useSubRegistry","registry","props","createElement","subRegistry","setSubRegistry","newRegistry","registerStore","value"],"sources":["@wordpress/block-editor/src/components/provider/with-registry-provider.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport {\n\twithRegistry,\n\tcreateRegistry,\n\tRegistryProvider,\n} from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport { STORE_NAME as blockEditorStoreName } from '../../store/constants';\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) => {\n\t\treturn withRegistry(\n\t\t\t( { useSubRegistry = true, registry, ...props } ) => {\n\t\t\t\tif ( ! useSubRegistry ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent registry={ registry } { ...props } />\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\n\t\t\t\tuseEffect( () => {\n\t\t\t\t\tconst newRegistry = createRegistry( {}, registry );\n\t\t\t\t\tnewRegistry.registerStore(\n\t\t\t\t\t\tblockEditorStoreName,\n\t\t\t\t\t\tstoreConfig\n\t\t\t\t\t);\n\t\t\t\t\tsetSubRegistry( newRegistry );\n\t\t\t\t}, [ registry ] );\n\n\t\t\t\tif ( ! subRegistry ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\tregistry={ subRegistry }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RegistryProvider>\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t},\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,oBAAoB;AACxD,SACCC,YAAY,EACZC,cAAc,EACdC,gBAAgB,QACV,iBAAiB;AACxB,SAASC,0BAA0B,QAAQ,oBAAoB;;AAE/D;AACA;AACA;AACA,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,UAAU,IAAIC,oBAAoB,QAAQ,uBAAuB;AAE1E,MAAMC,oBAAoB,GAAGJ,0BAA0B,CACpDK,gBAAgB,IAAM;EACvB,OAAOR,YAAY,CAClB,CAAE;IAAES,cAAc,GAAG,IAAI;IAAEC,QAAQ;IAAE,GAAGC;EAAM,CAAC,KAAM;IACpD,IAAK,CAAEF,cAAc,EAAG;MACvB,OACCG,aAAA,CAACJ,gBAAgB;QAACE,QAAQ,EAAGA,QAAU;QAAA,GAAMC;MAAK,CAAI,CAAC;IAEzD;IAEA,MAAM,CAAEE,WAAW,EAAEC,cAAc,CAAE,GAAGhB,QAAQ,CAAE,IAAK,CAAC;IACxDC,SAAS,CAAE,MAAM;MAChB,MAAMgB,WAAW,GAAGd,cAAc,CAAE,CAAC,CAAC,EAAES,QAAS,CAAC;MAClDK,WAAW,CAACC,aAAa,CACxBV,oBAAoB,EACpBF,WACD,CAAC;MACDU,cAAc,CAAEC,WAAY,CAAC;IAC9B,CAAC,EAAE,CAAEL,QAAQ,CAAG,CAAC;IAEjB,IAAK,CAAEG,WAAW,EAAG;MACpB,OAAO,IAAI;IACZ;IAEA,OACCD,aAAA,CAACV,gBAAgB;MAACe,KAAK,EAAGJ;IAAa,GACtCD,aAAA,CAACJ,gBAAgB;MAChBE,QAAQ,EAAGG,WAAa;MAAA,GACnBF;IAAK,CACV,CACgB,CAAC;EAErB,CACD,CAAC;AACF,CAAC,EACD,sBACD,CAAC;AAED,eAAeJ,oBAAoB"}