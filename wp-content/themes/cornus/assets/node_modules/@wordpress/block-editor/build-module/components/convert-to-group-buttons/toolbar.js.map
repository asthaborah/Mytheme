{"version":3,"names":["useDispatch","useSelect","switchToBlockType","store","blocksStore","ToolbarButton","ToolbarGroup","group","row","stack","_x","useConvertToGroupButtonProps","blockEditorStore","layouts","type","flexWrap","orientation","BlockGroupToolbar","blocksSelection","clientIds","groupingBlockName","isGroupable","replaceBlocks","canRemove","variations","select","canRemoveBlocks","getBlockVariations","onConvertToGroup","layout","newBlocks","length","attributes","onConvertToRow","onConvertToStack","canInsertRow","find","name","canInsertStack","createElement","icon","label","onClick"],"sources":["@wordpress/block-editor/src/components/convert-to-group-buttons/toolbar.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { switchToBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { group, row, stack } from '@wordpress/icons';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useConvertToGroupButtonProps } from '../convert-to-group-buttons';\nimport { store as blockEditorStore } from '../../store';\n\nconst layouts = {\n\tgroup: { type: 'constrained' },\n\trow: { type: 'flex', flexWrap: 'nowrap' },\n\tstack: { type: 'flex', orientation: 'vertical' },\n};\n\nfunction BlockGroupToolbar() {\n\tconst { blocksSelection, clientIds, groupingBlockName, isGroupable } =\n\t\tuseConvertToGroupButtonProps();\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\n\tconst { canRemove, variations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canRemoveBlocks } = select( blockEditorStore );\n\t\t\tconst { getBlockVariations } = select( blocksStore );\n\n\t\t\treturn {\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\n\t\t\t\tvariations: getBlockVariations(\n\t\t\t\t\tgroupingBlockName,\n\t\t\t\t\t'transform'\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, groupingBlockName ]\n\t);\n\n\tconst onConvertToGroup = ( layout ) => {\n\t\tconst newBlocks = switchToBlockType(\n\t\t\tblocksSelection,\n\t\t\tgroupingBlockName\n\t\t);\n\n\t\tif ( typeof layout !== 'string' ) {\n\t\t\tlayout = 'group';\n\t\t}\n\n\t\tif ( newBlocks && newBlocks.length > 0 ) {\n\t\t\t// Because the block is not in the store yet we can't use\n\t\t\t// updateBlockAttributes so need to manually update attributes.\n\t\t\tnewBlocks[ 0 ].attributes.layout = layouts[ layout ];\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t}\n\t};\n\n\tconst onConvertToRow = () => onConvertToGroup( 'row' );\n\tconst onConvertToStack = () => onConvertToGroup( 'stack' );\n\n\t// Don't render the button if the current selection cannot be grouped.\n\t// A good example is selecting multiple button blocks within a Buttons block:\n\t// The group block is not a valid child of Buttons, so we should not show the button.\n\t// Any blocks that are locked against removal also cannot be grouped.\n\tif ( ! isGroupable || ! canRemove ) {\n\t\treturn null;\n\t}\n\n\tconst canInsertRow = !! variations.find(\n\t\t( { name } ) => name === 'group-row'\n\t);\n\tconst canInsertStack = !! variations.find(\n\t\t( { name } ) => name === 'group-stack'\n\t);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ group }\n\t\t\t\tlabel={ _x( 'Group', 'verb' ) }\n\t\t\t\tonClick={ onConvertToGroup }\n\t\t\t/>\n\t\t\t{ canInsertRow && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ row }\n\t\t\t\t\tlabel={ _x( 'Row', 'single horizontal line' ) }\n\t\t\t\t\tonClick={ onConvertToRow }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ canInsertStack && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ stack }\n\t\t\t\t\tlabel={ _x( 'Stack', 'verb' ) }\n\t\t\t\t\tonClick={ onConvertToStack }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default BlockGroupToolbar;\n"],"mappings":"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"}